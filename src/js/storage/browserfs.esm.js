var ba=(et,D)=>()=>(D||et((D={exports:{}}).exports,D),D.exports);var Oa=ba((yr,Qr)=>{(function(D,k){typeof yr=="object"&&typeof Qr=="object"?Qr.exports=k():typeof define=="function"&&define.amd?define([],k):typeof yr=="object"?yr.BrowserFS=k():D.BrowserFS=k()})(yr,function(){return function(et){var D={};function k(R){if(D[R])return D[R].exports;var j=D[R]={exports:{},id:R,loaded:!1};return et[R].call(j.exports,j,j.exports,k),j.loaded=!0,j.exports}return k.m=et,k.c=D,k.p="",k(0)}([function(et,D,k){(function(R,j,I,O){"use strict";Object.defineProperty(D,"__esModule",{value:!0});var F=k(2),d=k(9),s;(function(n){n[n.EPERM=1]="EPERM",n[n.ENOENT=2]="ENOENT",n[n.EIO=5]="EIO",n[n.EBADF=9]="EBADF",n[n.EACCES=13]="EACCES",n[n.EBUSY=16]="EBUSY",n[n.EEXIST=17]="EEXIST",n[n.ENOTDIR=20]="ENOTDIR",n[n.EISDIR=21]="EISDIR",n[n.EINVAL=22]="EINVAL",n[n.EFBIG=27]="EFBIG",n[n.ENOSPC=28]="ENOSPC",n[n.EROFS=30]="EROFS",n[n.ENOTEMPTY=39]="ENOTEMPTY",n[n.ENOTSUP=95]="ENOTSUP"})(s||(s={}));var v={};v[s.EPERM]="Operation not permitted.",v[s.ENOENT]="No such file or directory.",v[s.EIO]="Input/output error.",v[s.EBADF]="Bad file descriptor.",v[s.EACCES]="Permission denied.",v[s.EBUSY]="Resource busy or locked.",v[s.EEXIST]="File exists.",v[s.ENOTDIR]="File is not a directory.",v[s.EISDIR]="File is a directory.",v[s.EINVAL]="Invalid argument.",v[s.EFBIG]="File is too big.",v[s.ENOSPC]="No space left on disk.",v[s.EROFS]="Cannot modify a read-only file system.",v[s.ENOTEMPTY]="Directory is not empty.",v[s.ENOTSUP]="Operation is not supported.";var f=function(n){function t(r,e,i){e===void 0&&(e=v[r]),n.call(this,e),this.syscall="",this.errno=r,this.code=s[r],this.path=i,this.stack=new n().stack,this.message="Error: "+this.code+": "+e+(this.path?", '"+this.path+"'":"")}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.fromJSON=function(e){var i=new t(0);return i.errno=e.errno,i.code=e.code,i.path=e.path,i.stack=e.stack,i.message=e.message,i},t.fromBuffer=function(e,i){return i===void 0&&(i=0),t.fromJSON(JSON.parse(e.toString("utf8",i+4,i+4+e.readUInt32LE(i))))},t.FileError=function(e,i){return new t(e,v[e],i)},t.ENOENT=function(e){return this.FileError(s.ENOENT,e)},t.EEXIST=function(e){return this.FileError(s.EEXIST,e)},t.EISDIR=function(e){return this.FileError(s.EISDIR,e)},t.ENOTDIR=function(e){return this.FileError(s.ENOTDIR,e)},t.EPERM=function(e){return this.FileError(s.EPERM,e)},t.ENOTEMPTY=function(e){return this.FileError(s.ENOTEMPTY,e)},t.prototype.toString=function(){return this.message},t.prototype.toJSON=function(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message}},t.prototype.writeToBuffer=function(e,i){e===void 0&&(e=R.alloc(this.bufferSize())),i===void 0&&(i=0);var o=e.write(JSON.stringify(this.toJSON()),i+4);return e.writeUInt32LE(o,i),e},t.prototype.bufferSize=function(){return 4+R.byteLength(JSON.stringify(this.toJSON()))},t}(Error),x=Object.freeze({get ErrorCode(){return s},ErrorStrings:v,ApiError:f}),b;(function(n){n[n.NOP=0]="NOP",n[n.THROW_EXCEPTION=1]="THROW_EXCEPTION",n[n.TRUNCATE_FILE=2]="TRUNCATE_FILE",n[n.CREATE_FILE=3]="CREATE_FILE"})(b||(b={}));var m=function n(t){if(this.flagStr=t,n.validFlagStrs.indexOf(t)<0)throw new f(s.EINVAL,"Invalid flag: "+t)};m.getFileFlag=function(t){return m.flagCache.hasOwnProperty(t)?m.flagCache[t]:m.flagCache[t]=new m(t)},m.prototype.getFlagString=function(){return this.flagStr},m.prototype.isReadable=function(){return this.flagStr.indexOf("r")!==-1||this.flagStr.indexOf("+")!==-1},m.prototype.isWriteable=function(){return this.flagStr.indexOf("w")!==-1||this.flagStr.indexOf("a")!==-1||this.flagStr.indexOf("+")!==-1},m.prototype.isTruncating=function(){return this.flagStr.indexOf("w")!==-1},m.prototype.isAppendable=function(){return this.flagStr.indexOf("a")!==-1},m.prototype.isSynchronous=function(){return this.flagStr.indexOf("s")!==-1},m.prototype.isExclusive=function(){return this.flagStr.indexOf("x")!==-1},m.prototype.pathExistsAction=function(){return this.isExclusive()?b.THROW_EXCEPTION:this.isTruncating()?b.TRUNCATE_FILE:b.NOP},m.prototype.pathNotExistsAction=function(){return(this.isWriteable()||this.isAppendable())&&this.flagStr!=="r+"?b.CREATE_FILE:b.THROW_EXCEPTION},m.flagCache={},m.validFlagStrs=["r","r+","rs","rs+","w","wx","w+","wx+","a","ax","a+","ax+"];var N;(function(n){n[n.FILE=32768]="FILE",n[n.DIRECTORY=16384]="DIRECTORY",n[n.SYMLINK=40960]="SYMLINK"})(N||(N={}));var A=function(t,r,e,i,o,a){if(i===void 0&&(i=new Date),o===void 0&&(o=new Date),a===void 0&&(a=new Date),this.size=r,this.atime=i,this.mtime=o,this.ctime=a,this.dev=0,this.ino=0,this.rdev=0,this.nlink=1,this.blksize=4096,this.uid=0,this.gid=0,this.birthtime=new Date(0),this.fileData=null,e)this.mode=e;else switch(t){case N.FILE:this.mode=420;break;case N.DIRECTORY:default:this.mode=511}this.blocks=Math.ceil(r/512),this.mode<4096&&(this.mode|=t)};A.fromBuffer=function(t){var r=t.readUInt32LE(0),e=t.readUInt32LE(4),i=t.readDoubleLE(8),o=t.readDoubleLE(16),a=t.readDoubleLE(24);return new A(e&61440,r,e&4095,new Date(i),new Date(o),new Date(a))},A.prototype.toBuffer=function(){var t=R.alloc(32);return t.writeUInt32LE(this.size,0),t.writeUInt32LE(this.mode,4),t.writeDoubleLE(this.atime.getTime(),8),t.writeDoubleLE(this.mtime.getTime(),16),t.writeDoubleLE(this.ctime.getTime(),24),t},A.prototype.clone=function(){return new A(this.mode&61440,this.size,this.mode&4095,this.atime,this.mtime,this.ctime)},A.prototype.isFile=function(){return(this.mode&61440)===N.FILE},A.prototype.isDirectory=function(){return(this.mode&61440)===N.DIRECTORY},A.prototype.isSymbolicLink=function(){return(this.mode&61440)===N.SYMLINK},A.prototype.chmod=function(t){this.mode=this.mode&61440|t},A.prototype.isSocket=function(){return!1},A.prototype.isBlockDevice=function(){return!1},A.prototype.isCharacterDevice=function(){return!1},A.prototype.isFIFO=function(){return!1};var q=function(n,t){return n};function H(n){if(n)return n;throw new f(s.EIO,"Initialize BrowserFS with a file system using BrowserFS.initialize(filesystem)")}function C(n,t){switch(typeof n){case"number":return n;case"string":var r=parseInt(n,8);return isNaN(r)?t:r;default:return t}}function St(n){if(n instanceof Date)return n;if(typeof n=="number")return new Date(n*1e3);throw new f(s.EINVAL,"Invalid time.")}function $(n){if(n.indexOf("\0")>=0)throw new f(s.EINVAL,"Path must be a string without null bytes.");if(n==="")throw new f(s.EINVAL,"Path must not be empty.");return d.resolve(n)}function wt(n,t,r,e){switch(typeof n){case"object":return{encoding:typeof n.encoding<"u"?n.encoding:t,flag:typeof n.flag<"u"?n.flag:r,mode:C(n.mode,e)};case"string":return{encoding:n,flag:r,mode:e};default:return{encoding:t,flag:r,mode:e}}}function ht(){}var M=function(){this.F_OK=0,this.R_OK=4,this.W_OK=2,this.X_OK=1,this.root=null,this.fdMap={},this.nextFd=100};M.prototype.initialize=function(t){if(!t.constructor.isAvailable())throw new f(s.EINVAL,"Tried to instantiate BrowserFS with an unavailable file system.");return this.root=t},M.prototype._toUnixTimestamp=function(t){if(typeof t=="number")return t;if(t instanceof Date)return t.getTime()/1e3;throw new Error("Cannot parse time: "+t)},M.prototype.getRootFS=function(){return this.root?this.root:null},M.prototype.rename=function(t,r,e){e===void 0&&(e=ht);var i=q(e,1);try{H(this.root).rename($(t),$(r),i)}catch(o){i(o)}},M.prototype.renameSync=function(t,r){H(this.root).renameSync($(t),$(r))},M.prototype.exists=function(t,r){r===void 0&&(r=ht);var e=q(r,1);try{return H(this.root).exists($(t),e)}catch{return e(!1)}},M.prototype.existsSync=function(t){try{return H(this.root).existsSync($(t))}catch{return!1}},M.prototype.stat=function(t,r){r===void 0&&(r=ht);var e=q(r,2);try{return H(this.root).stat($(t),!1,e)}catch(i){return e(i)}},M.prototype.statSync=function(t){return H(this.root).statSync($(t),!1)},M.prototype.lstat=function(t,r){r===void 0&&(r=ht);var e=q(r,2);try{return H(this.root).stat($(t),!0,e)}catch(i){return e(i)}},M.prototype.lstatSync=function(t){return H(this.root).statSync($(t),!0)},M.prototype.truncate=function(t,r,e){r===void 0&&(r=0),e===void 0&&(e=ht);var i=0;typeof r=="function"?e=r:typeof r=="number"&&(i=r);var o=q(e,1);try{if(i<0)throw new f(s.EINVAL);return H(this.root).truncate($(t),i,o)}catch(a){return o(a)}},M.prototype.truncateSync=function(t,r){if(r===void 0&&(r=0),r<0)throw new f(s.EINVAL);return H(this.root).truncateSync($(t),r)},M.prototype.unlink=function(t,r){r===void 0&&(r=ht);var e=q(r,1);try{return H(this.root).unlink($(t),e)}catch(i){return e(i)}},M.prototype.unlinkSync=function(t){return H(this.root).unlinkSync($(t))},M.prototype.open=function(t,r,e,i){var o=this;i===void 0&&(i=ht);var a=C(e,420);i=typeof e=="function"?e:i;var u=q(i,2);try{H(this.root).open($(t),m.getFileFlag(r),a,function(h,p){p?u(h,o.getFdForFile(p)):u(h)})}catch(h){u(h)}},M.prototype.openSync=function(t,r,e){return e===void 0&&(e=420),this.getFdForFile(H(this.root).openSync($(t),m.getFileFlag(r),C(e,420)))},M.prototype.readFile=function(t,r,e){r===void 0&&(r={}),e===void 0&&(e=ht);var i=wt(r,null,"r",null);e=typeof r=="function"?r:e;var o=q(e,2);try{var a=m.getFileFlag(i.flag);return a.isReadable()?H(this.root).readFile($(t),i.encoding,a,o):o(new f(s.EINVAL,"Flag passed to readFile must allow for reading."))}catch(u){return o(u)}},M.prototype.readFileSync=function(t,r){r===void 0&&(r={});var e=wt(r,null,"r",null),i=m.getFileFlag(e.flag);if(!i.isReadable())throw new f(s.EINVAL,"Flag passed to readFile must allow for reading.");return H(this.root).readFileSync($(t),e.encoding,i)},M.prototype.writeFile=function(t,r,e,i){e===void 0&&(e={}),i===void 0&&(i=ht);var o=wt(e,"utf8","w",420);i=typeof e=="function"?e:i;var a=q(i,1);try{var u=m.getFileFlag(o.flag);return u.isWriteable()?H(this.root).writeFile($(t),r,o.encoding,u,o.mode,a):a(new f(s.EINVAL,"Flag passed to writeFile must allow for writing."))}catch(h){return a(h)}},M.prototype.writeFileSync=function(t,r,e){var i=wt(e,"utf8","w",420),o=m.getFileFlag(i.flag);if(!o.isWriteable())throw new f(s.EINVAL,"Flag passed to writeFile must allow for writing.");return H(this.root).writeFileSync($(t),r,i.encoding,o,i.mode)},M.prototype.appendFile=function(t,r,e,i){i===void 0&&(i=ht);var o=wt(e,"utf8","a",420);i=typeof e=="function"?e:i;var a=q(i,1);try{var u=m.getFileFlag(o.flag);if(!u.isAppendable())return a(new f(s.EINVAL,"Flag passed to appendFile must allow for appending."));H(this.root).appendFile($(t),r,o.encoding,u,o.mode,a)}catch(h){a(h)}},M.prototype.appendFileSync=function(t,r,e){var i=wt(e,"utf8","a",420),o=m.getFileFlag(i.flag);if(!o.isAppendable())throw new f(s.EINVAL,"Flag passed to appendFile must allow for appending.");return H(this.root).appendFileSync($(t),r,i.encoding,o,i.mode)},M.prototype.fstat=function(t,r){r===void 0&&(r=ht);var e=q(r,2);try{var i=this.fd2file(t);i.stat(e)}catch(o){e(o)}},M.prototype.fstatSync=function(t){return this.fd2file(t).statSync()},M.prototype.close=function(t,r){var e=this;r===void 0&&(r=ht);var i=q(r,1);try{this.fd2file(t).close(function(o){o||e.closeFd(t),i(o)})}catch(o){i(o)}},M.prototype.closeSync=function(t){this.fd2file(t).closeSync(),this.closeFd(t)},M.prototype.ftruncate=function(t,r,e){e===void 0&&(e=ht);var i=typeof r=="number"?r:0;e=typeof r=="function"?r:e;var o=q(e,1);try{var a=this.fd2file(t);if(i<0)throw new f(s.EINVAL);a.truncate(i,o)}catch(u){o(u)}},M.prototype.ftruncateSync=function(t,r){r===void 0&&(r=0);var e=this.fd2file(t);if(r<0)throw new f(s.EINVAL);e.truncateSync(r)},M.prototype.fsync=function(t,r){r===void 0&&(r=ht);var e=q(r,1);try{this.fd2file(t).sync(e)}catch(i){e(i)}},M.prototype.fsyncSync=function(t){this.fd2file(t).syncSync()},M.prototype.fdatasync=function(t,r){r===void 0&&(r=ht);var e=q(r,1);try{this.fd2file(t).datasync(e)}catch(i){e(i)}},M.prototype.fdatasyncSync=function(t){this.fd2file(t).datasyncSync()},M.prototype.write=function(t,r,e,i,o,a){a===void 0&&(a=ht);var u,h,p,E=null;if(typeof r=="string"){var L="utf8";switch(typeof e){case"function":a=e;break;case"number":E=e,L=typeof i=="string"?i:"utf8",a=typeof o=="function"?o:a;break;default:return a=typeof i=="function"?i:typeof o=="function"?o:a,a(new f(s.EINVAL,"Invalid arguments."))}u=R.from(r,L),h=0,p=u.length}else u=r,h=e,p=i,E=typeof o=="number"?o:null,a=typeof o=="function"?o:a;var z=q(a,3);try{var J=this.fd2file(t);E==null&&(E=J.getPos()),J.write(u,h,p,E,z)}catch(tt){z(tt)}},M.prototype.writeSync=function(t,r,e,i,o){var a,u=0,h,p;if(typeof r=="string"){p=typeof e=="number"?e:null;var E=typeof i=="string"?i:"utf8";u=0,a=R.from(r,E),h=a.length}else a=r,u=e,h=i,p=typeof o=="number"?o:null;var L=this.fd2file(t);return p==null&&(p=L.getPos()),L.writeSync(a,u,h,p)},M.prototype.read=function(t,r,e,i,o,a){a===void 0&&(a=ht);var u,h,p,E,L;if(typeof r=="number"){p=r,u=e;var z=i;a=typeof o=="function"?o:a,h=0,E=R.alloc(p),L=q(function(tt,ut,dt){if(tt)return a(tt);a(tt,dt.toString(z),ut)},3)}else E=r,h=e,p=i,u=o,L=q(a,3);try{var J=this.fd2file(t);u==null&&(u=J.getPos()),J.read(E,h,p,u,L)}catch(tt){L(tt)}},M.prototype.readSync=function(t,r,e,i,o){var a=!1,u,h,p,E,L="utf8";typeof r=="number"?(p=r,E=e,L=i,h=0,u=R.alloc(p),a=!0):(u=r,h=e,p=i,E=o);var z=this.fd2file(t);E==null&&(E=z.getPos());var J=z.readSync(u,h,p,E);return a?[u.toString(L),J]:J},M.prototype.fchown=function(t,r,e,i){i===void 0&&(i=ht);var o=q(i,1);try{this.fd2file(t).chown(r,e,o)}catch(a){o(a)}},M.prototype.fchownSync=function(t,r,e){this.fd2file(t).chownSync(r,e)},M.prototype.fchmod=function(t,r,e){var i=q(e,1);try{var o=typeof r=="string"?parseInt(r,8):r;this.fd2file(t).chmod(o,i)}catch(a){i(a)}},M.prototype.fchmodSync=function(t,r){var e=typeof r=="string"?parseInt(r,8):r;this.fd2file(t).chmodSync(e)},M.prototype.futimes=function(t,r,e,i){i===void 0&&(i=ht);var o=q(i,1);try{var a=this.fd2file(t);typeof r=="number"&&(r=new Date(r*1e3)),typeof e=="number"&&(e=new Date(e*1e3)),a.utimes(r,e,o)}catch(u){o(u)}},M.prototype.futimesSync=function(t,r,e){this.fd2file(t).utimesSync(St(r),St(e))},M.prototype.rmdir=function(t,r){r===void 0&&(r=ht);var e=q(r,1);try{t=$(t),H(this.root).rmdir(t,e)}catch(i){e(i)}},M.prototype.rmdirSync=function(t){return t=$(t),H(this.root).rmdirSync(t)},M.prototype.mkdir=function(t,r,e){e===void 0&&(e=ht),typeof r=="function"&&(e=r,r=511);var i=q(e,1);try{t=$(t),H(this.root).mkdir(t,r,i)}catch(o){i(o)}},M.prototype.mkdirSync=function(t,r){H(this.root).mkdirSync($(t),C(r,511))},M.prototype.readdir=function(t,r){r===void 0&&(r=ht);var e=q(r,2);try{t=$(t),H(this.root).readdir(t,e)}catch(i){e(i)}},M.prototype.readdirSync=function(t){return t=$(t),H(this.root).readdirSync(t)},M.prototype.link=function(t,r,e){e===void 0&&(e=ht);var i=q(e,1);try{t=$(t),r=$(r),H(this.root).link(t,r,i)}catch(o){i(o)}},M.prototype.linkSync=function(t,r){return t=$(t),r=$(r),H(this.root).linkSync(t,r)},M.prototype.symlink=function(t,r,e,i){i===void 0&&(i=ht);var o=typeof e=="string"?e:"file";i=typeof e=="function"?e:i;var a=q(i,1);try{if(o!=="file"&&o!=="dir")return a(new f(s.EINVAL,"Invalid type: "+o));t=$(t),r=$(r),H(this.root).symlink(t,r,o,a)}catch(u){a(u)}},M.prototype.symlinkSync=function(t,r,e){if(!e)e="file";else if(e!=="file"&&e!=="dir")throw new f(s.EINVAL,"Invalid type: "+e);return t=$(t),r=$(r),H(this.root).symlinkSync(t,r,e)},M.prototype.readlink=function(t,r){r===void 0&&(r=ht);var e=q(r,2);try{t=$(t),H(this.root).readlink(t,e)}catch(i){e(i)}},M.prototype.readlinkSync=function(t){return t=$(t),H(this.root).readlinkSync(t)},M.prototype.chown=function(t,r,e,i){i===void 0&&(i=ht);var o=q(i,1);try{t=$(t),H(this.root).chown(t,!1,r,e,o)}catch(a){o(a)}},M.prototype.chownSync=function(t,r,e){t=$(t),H(this.root).chownSync(t,!1,r,e)},M.prototype.lchown=function(t,r,e,i){i===void 0&&(i=ht);var o=q(i,1);try{t=$(t),H(this.root).chown(t,!0,r,e,o)}catch(a){o(a)}},M.prototype.lchownSync=function(t,r,e){t=$(t),H(this.root).chownSync(t,!0,r,e)},M.prototype.chmod=function(t,r,e){e===void 0&&(e=ht);var i=q(e,1);try{var o=C(r,-1);if(o<0)throw new f(s.EINVAL,"Invalid mode.");H(this.root).chmod($(t),!1,o,i)}catch(a){i(a)}},M.prototype.chmodSync=function(t,r){var e=C(r,-1);if(e<0)throw new f(s.EINVAL,"Invalid mode.");t=$(t),H(this.root).chmodSync(t,!1,e)},M.prototype.lchmod=function(t,r,e){e===void 0&&(e=ht);var i=q(e,1);try{var o=C(r,-1);if(o<0)throw new f(s.EINVAL,"Invalid mode.");H(this.root).chmod($(t),!0,o,i)}catch(a){i(a)}},M.prototype.lchmodSync=function(t,r){var e=C(r,-1);if(e<1)throw new f(s.EINVAL,"Invalid mode.");H(this.root).chmodSync($(t),!0,e)},M.prototype.utimes=function(t,r,e,i){i===void 0&&(i=ht);var o=q(i,1);try{H(this.root).utimes($(t),St(r),St(e),o)}catch(a){o(a)}},M.prototype.utimesSync=function(t,r,e){H(this.root).utimesSync($(t),St(r),St(e))},M.prototype.realpath=function(t,r,e){e===void 0&&(e=ht);var i=typeof r=="object"?r:{};e=typeof r=="function"?r:ht;var o=q(e,2);try{t=$(t),H(this.root).realpath(t,i,o)}catch(a){o(a)}},M.prototype.realpathSync=function(t,r){return r===void 0&&(r={}),t=$(t),H(this.root).realpathSync(t,r)},M.prototype.watchFile=function(t,r,e){throw e===void 0&&(e=ht),new f(s.ENOTSUP)},M.prototype.unwatchFile=function(t,r){throw r===void 0&&(r=ht),new f(s.ENOTSUP)},M.prototype.watch=function(t,r,e){throw e===void 0&&(e=ht),new f(s.ENOTSUP)},M.prototype.access=function(t,r,e){throw e===void 0&&(e=ht),new f(s.ENOTSUP)},M.prototype.accessSync=function(t,r){throw new f(s.ENOTSUP)},M.prototype.createReadStream=function(t,r){throw new f(s.ENOTSUP)},M.prototype.createWriteStream=function(t,r){throw new f(s.ENOTSUP)},M.prototype.wrapCallbacks=function(t){q=t},M.prototype.getFdForFile=function(t){var r=this.nextFd++;return this.fdMap[r]=t,r},M.prototype.fd2file=function(t){var r=this.fdMap[t];if(r)return r;throw new f(s.EBADF,"Invalid file descriptor.")},M.prototype.closeFd=function(t){delete this.fdMap[t]},M.Stats=A;var Q=new M,ft={},Rt=M.prototype;Object.keys(Rt).forEach(function(n){typeof Q[n]=="function"?ft[n]=function(){return Q[n].apply(Q,arguments)}:ft[n]=Q[n]}),ft.changeFSModule=function(n){Q=n},ft.getFSModule=function(){return Q},ft.FS=M;function pt(n,t,r,e,i){return n<t||r<t?n>r?r+1:n+1:e===i?t:t+1}function Dt(n,t){if(n===t)return 0;if(n.length>t.length){var r=n;n=t,t=r}for(var e=n.length,i=t.length;e>0&&n.charCodeAt(e-1)===t.charCodeAt(i-1);)e--,i--;for(var o=0;o<e&&n.charCodeAt(o)===t.charCodeAt(o);)o++;if(e-=o,i-=o,e===0||i===1)return i;for(var a=new Array(e<<1),u=0;u<e;)a[e+u]=n.charCodeAt(o+u),a[u]=++u;var h,p,E,L,z;for(h=0;h+3<i;)for(var J=t.charCodeAt(o+(p=h)),tt=t.charCodeAt(o+(E=h+1)),ut=t.charCodeAt(o+(L=h+2)),dt=t.charCodeAt(o+(z=h+3)),Ft=h+=4,Ht=0;Ht<e;){var ie=a[e+Ht],xe=a[Ht];p=pt(xe,p,E,J,ie),E=pt(p,E,L,tt,ie),L=pt(E,L,z,ut,ie),Ft=pt(L,z,Ft,dt,ie),a[Ht++]=Ft,z=L,L=E,E=p,p=xe}for(var ke=0;h<i;){var rr=t.charCodeAt(o+(p=h));ke=++h;for(var Le=0;Le<e;Le++){var De=a[Le];a[Le]=ke=De<p||ke<p?De>ke?ke+1:De+1:rr===a[e+Le]?p:p+1,p=De}}return ke}function kt(n,t,r){n&&console.warn("["+t+"] Direct file system constructor usage is deprecated for this file system, and will be removed in the next major version. Please use the '"+t+".Create("+JSON.stringify(r)+", callback)' method instead. See https://github.com/jvilk/BrowserFS/issues/176 for more details.")}var mt=typeof navigator<"u"&&!!(/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||navigator.userAgent.indexOf("Trident")!==-1),Xt=typeof window>"u";function U(){throw new Error("BFS has reached an impossible code path; please file a bug.")}function P(n,t,r){r.existsSync(n)||(P(d.dirname(n),t,r),r.mkdirSync(n,t))}function G(n){var t=st(n),r=t.byteOffset,e=t.byteLength;return r===0&&e===t.buffer.byteLength?t.buffer:t.buffer.slice(r,r+e)}function st(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function It(n){return n instanceof R?n:n instanceof Uint8Array?vt(n):R.from(n)}function vt(n){return n instanceof R?n:n.byteOffset===0&&n.byteLength===n.buffer.byteLength?Et(n.buffer):R.from(n.buffer,n.byteOffset,n.byteLength)}function Et(n){return R.from(n)}function bt(n,t,r){if(t===void 0&&(t=0),r===void 0&&(r=n.length),t<0||r<0||r>n.length||t>r)throw new TypeError("Invalid slice bounds on buffer of length "+n.length+": ["+t+", "+r+"]");if(n.length===0)return At();var e=st(n),i=n[0],o=(i+1)%255;return n[0]=o,e[0]===o?(e[0]=i,vt(e.slice(t,r))):(n[0]=i,vt(e.subarray(t,r)))}var zt=null;function At(){return zt||(zt=R.alloc(0))}function $t(n,t){R.isBuffer(n)?t():t(new f(s.EINVAL,"option must be a Buffer."))}function S(n,t,r){var e=n.Options,i=n.Name,o=0,a=!1,u=!1;function h(z){a||(z&&(a=!0,r(z)),o--,o===0&&u&&r())}var p=function(z){if(e.hasOwnProperty(z)){var J=e[z],tt=t[z];if(tt==null){if(!J.optional){var ut=Object.keys(t).filter(function(Ft){return!(Ft in e)}).map(function(Ft){return{str:Ft,distance:Dt(z,Ft)}}).filter(function(Ft){return Ft.distance<5}).sort(function(Ft,Ht){return Ft.distance-Ht.distance});return a?{}:(a=!0,{v:r(new f(s.EINVAL,"["+i+"] Required option '"+z+"' not provided."+(ut.length>0?" You provided unrecognized option '"+ut[0].str+"'; perhaps you meant to type '"+z+"'.":"")+`
Option description: `+J.description))})}}else{var dt=!1;if(Array.isArray(J.type)?dt=J.type.indexOf(typeof tt)!==-1:dt=typeof tt===J.type,dt)J.validator&&(o++,J.validator(tt,h));else return a?{}:(a=!0,{v:r(new f(s.EINVAL,"["+i+"] Value provided for option "+z+" is not the proper type. Expected "+(Array.isArray(J.type)?"one of {"+J.type.join(", ")+"}":J.type)+", but received "+typeof tt+`
Option description: `+J.description))})}}};for(var E in e){var L=p(E);if(L)return L.v}u=!0,o===0&&!a&&r()}var _=Object.freeze({deprecationMessage:kt,isIE:mt,isWebWorker:Xt,fail:U,mkdirpSync:P,buffer2ArrayBuffer:G,buffer2Uint8array:st,arrayish2Buffer:It,uint8Array2Buffer:vt,arrayBuffer2Buffer:Et,copyingSlice:bt,emptyBuffer:At,bufferValidator:$t,checkOptions:S}),X=function(t){this.fs=t,this.nodefs=t.getNodeFS(),this.FS=t.getFS(),this.PATH=t.getPATH(),this.ERRNO_CODES=t.getERRNO_CODES()};X.prototype.open=function(t){var r=this.fs.realPath(t.node),e=this.FS;try{e.isFile(t.node.mode)&&(t.nfd=this.nodefs.openSync(r,this.fs.flagsToPermissionString(t.flags)))}catch(i){throw i.code?new e.ErrnoError(this.ERRNO_CODES[i.code]):i}},X.prototype.close=function(t){var r=this.FS;try{r.isFile(t.node.mode)&&t.nfd&&this.nodefs.closeSync(t.nfd)}catch(e){throw e.code?new r.ErrnoError(this.ERRNO_CODES[e.code]):e}},X.prototype.read=function(t,r,e,i,o){try{return this.nodefs.readSync(t.nfd,vt(r),e,i,o)}catch(a){throw new this.FS.ErrnoError(this.ERRNO_CODES[a.code])}},X.prototype.write=function(t,r,e,i,o){try{return this.nodefs.writeSync(t.nfd,vt(r),e,i,o)}catch(a){throw new this.FS.ErrnoError(this.ERRNO_CODES[a.code])}},X.prototype.llseek=function(t,r,e){var i=r;if(e===1)i+=t.position;else if(e===2&&this.FS.isFile(t.node.mode))try{var o=this.nodefs.fstatSync(t.nfd);i+=o.size}catch(a){throw new this.FS.ErrnoError(this.ERRNO_CODES[a.code])}if(i<0)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return t.position=i,i};var K=function(t){this.fs=t,this.nodefs=t.getNodeFS(),this.FS=t.getFS(),this.PATH=t.getPATH(),this.ERRNO_CODES=t.getERRNO_CODES()};K.prototype.getattr=function(t){var r=this.fs.realPath(t),e;try{e=this.nodefs.lstatSync(r)}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}return{dev:e.dev,ino:e.ino,mode:e.mode,nlink:e.nlink,uid:e.uid,gid:e.gid,rdev:e.rdev,size:e.size,atime:e.atime,mtime:e.mtime,ctime:e.ctime,blksize:e.blksize,blocks:e.blocks}},K.prototype.setattr=function(t,r){var e=this.fs.realPath(t);try{if(r.mode!==void 0&&(this.nodefs.chmodSync(e,r.mode),t.mode=r.mode),r.timestamp!==void 0){var i=new Date(r.timestamp);this.nodefs.utimesSync(e,i,i)}}catch(o){if(!o.code)throw o;if(o.code!=="ENOTSUP")throw new this.FS.ErrnoError(this.ERRNO_CODES[o.code])}if(r.size!==void 0)try{this.nodefs.truncateSync(e,r.size)}catch(o){throw o.code?new this.FS.ErrnoError(this.ERRNO_CODES[o.code]):o}},K.prototype.lookup=function(t,r){var e=this.PATH.join2(this.fs.realPath(t),r),i=this.fs.getMode(e);return this.fs.createNode(t,r,i)},K.prototype.mknod=function(t,r,e,i){var o=this.fs.createNode(t,r,e,i),a=this.fs.realPath(o);try{this.FS.isDir(o.mode)?this.nodefs.mkdirSync(a,o.mode):this.nodefs.writeFileSync(a,"",{mode:o.mode})}catch(u){throw u.code?new this.FS.ErrnoError(this.ERRNO_CODES[u.code]):u}return o},K.prototype.rename=function(t,r,e){var i=this.fs.realPath(t),o=this.PATH.join2(this.fs.realPath(r),e);try{this.nodefs.renameSync(i,o),t.name=e,t.parent=r}catch(a){throw a.code?new this.FS.ErrnoError(this.ERRNO_CODES[a.code]):a}},K.prototype.unlink=function(t,r){var e=this.PATH.join2(this.fs.realPath(t),r);try{this.nodefs.unlinkSync(e)}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}},K.prototype.rmdir=function(t,r){var e=this.PATH.join2(this.fs.realPath(t),r);try{this.nodefs.rmdirSync(e)}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}},K.prototype.readdir=function(t){var r=this.fs.realPath(t);try{var e=this.nodefs.readdirSync(r);return e.push(".",".."),e}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}},K.prototype.symlink=function(t,r,e){var i=this.PATH.join2(this.fs.realPath(t),r);try{this.nodefs.symlinkSync(e,i)}catch(o){throw o.code?new this.FS.ErrnoError(this.ERRNO_CODES[o.code]):o}},K.prototype.readlink=function(t){var r=this.fs.realPath(t);try{return this.nodefs.readlinkSync(r)}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}};var lt=function(t,r,e,i){t===void 0&&(t=self.FS),r===void 0&&(r=self.PATH),e===void 0&&(e=self.ERRNO_CODES),i===void 0&&(i=ft),this.flagsToPermissionStringMap={0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},this.nodefs=i,this.FS=t,this.PATH=r,this.ERRNO_CODES=e,this.node_ops=new K(this),this.stream_ops=new X(this)};lt.prototype.mount=function(t){return this.createNode(null,"/",this.getMode(t.opts.root),0)},lt.prototype.createNode=function(t,r,e,i){var o=this.FS;if(!o.isDir(e)&&!o.isFile(e)&&!o.isLink(e))throw new o.ErrnoError(this.ERRNO_CODES.EINVAL);var a=o.createNode(t,r,e);return a.node_ops=this.node_ops,a.stream_ops=this.stream_ops,a},lt.prototype.getMode=function(t){var r;try{r=this.nodefs.lstatSync(t)}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}return r.mode},lt.prototype.realPath=function(t){for(var r=[];t.parent!==t;)r.push(t.name),t=t.parent;return r.push(t.mount.opts.root),r.reverse(),this.PATH.join.apply(null,r)},lt.prototype.flagsToPermissionString=function(t){var r=typeof t=="string"?parseInt(t,10):t;return r&=8191,r in this.flagsToPermissionStringMap?this.flagsToPermissionStringMap[r]:t},lt.prototype.getNodeFS=function(){return this.nodefs},lt.prototype.getFS=function(){return this.FS},lt.prototype.getPATH=function(){return this.PATH},lt.prototype.getERRNO_CODES=function(){return this.ERRNO_CODES};var rt=function(){};rt.prototype.supportsLinks=function(){return!1},rt.prototype.diskSpace=function(t,r){r(0,0)},rt.prototype.openFile=function(t,r,e){throw new f(s.ENOTSUP)},rt.prototype.createFile=function(t,r,e,i){throw new f(s.ENOTSUP)},rt.prototype.open=function(t,r,e,i){var o=this,a=function(u,h){if(u)switch(r.pathNotExistsAction()){case b.CREATE_FILE:return o.stat(d.dirname(t),!1,function(p,E){p?i(p):E&&!E.isDirectory()?i(f.ENOTDIR(d.dirname(t))):o.createFile(t,r,e,i)});case b.THROW_EXCEPTION:return i(f.ENOENT(t));default:return i(new f(s.EINVAL,"Invalid FileFlag object."))}else{if(h&&h.isDirectory())return i(f.EISDIR(t));switch(r.pathExistsAction()){case b.THROW_EXCEPTION:return i(f.EEXIST(t));case b.TRUNCATE_FILE:return o.openFile(t,r,function(p,E){p?i(p):E?E.truncate(0,function(){E.sync(function(){i(null,E)})}):U()});case b.NOP:return o.openFile(t,r,i);default:return i(new f(s.EINVAL,"Invalid FileFlag object."))}}};this.stat(t,!1,a)},rt.prototype.rename=function(t,r,e){e(new f(s.ENOTSUP))},rt.prototype.renameSync=function(t,r){throw new f(s.ENOTSUP)},rt.prototype.stat=function(t,r,e){e(new f(s.ENOTSUP))},rt.prototype.statSync=function(t,r){throw new f(s.ENOTSUP)},rt.prototype.openFileSync=function(t,r,e){throw new f(s.ENOTSUP)},rt.prototype.createFileSync=function(t,r,e){throw new f(s.ENOTSUP)},rt.prototype.openSync=function(t,r,e){var i;try{i=this.statSync(t,!1)}catch{switch(r.pathNotExistsAction()){case b.CREATE_FILE:var o=this.statSync(d.dirname(t),!1);if(!o.isDirectory())throw f.ENOTDIR(d.dirname(t));return this.createFileSync(t,r,e);case b.THROW_EXCEPTION:throw f.ENOENT(t);default:throw new f(s.EINVAL,"Invalid FileFlag object.")}}if(i.isDirectory())throw f.EISDIR(t);switch(r.pathExistsAction()){case b.THROW_EXCEPTION:throw f.EEXIST(t);case b.TRUNCATE_FILE:return this.unlinkSync(t),this.createFileSync(t,r,i.mode);case b.NOP:return this.openFileSync(t,r,e);default:throw new f(s.EINVAL,"Invalid FileFlag object.")}},rt.prototype.unlink=function(t,r){r(new f(s.ENOTSUP))},rt.prototype.unlinkSync=function(t){throw new f(s.ENOTSUP)},rt.prototype.rmdir=function(t,r){r(new f(s.ENOTSUP))},rt.prototype.rmdirSync=function(t){throw new f(s.ENOTSUP)},rt.prototype.mkdir=function(t,r,e){e(new f(s.ENOTSUP))},rt.prototype.mkdirSync=function(t,r){throw new f(s.ENOTSUP)},rt.prototype.readdir=function(t,r){r(new f(s.ENOTSUP))},rt.prototype.readdirSync=function(t){throw new f(s.ENOTSUP)},rt.prototype.exists=function(t,r){this.stat(t,null,function(e){r(!e)})},rt.prototype.existsSync=function(t){try{return this.statSync(t,!0),!0}catch{return!1}},rt.prototype.realpath=function(t,r,e){if(this.supportsLinks())for(var i=t.split(d.sep),o=0;o<i.length;o++){var a=i.slice(0,o+1);i[o]=d.join.apply(null,a)}else this.exists(t,function(u){u?e(null,t):e(f.ENOENT(t))})},rt.prototype.realpathSync=function(t,r){if(this.supportsLinks()){for(var e=t.split(d.sep),i=0;i<e.length;i++){var o=e.slice(0,i+1);e[i]=d.join.apply(d,o)}return e.join(d.sep)}else{if(this.existsSync(t))return t;throw f.ENOENT(t)}},rt.prototype.truncate=function(t,r,e){this.open(t,m.getFileFlag("r+"),420,function(i,o){if(i)return e(i);o.truncate(r,function(a){o.close(function(u){e(a||u)})})})},rt.prototype.truncateSync=function(t,r){var e=this.openSync(t,m.getFileFlag("r+"),420);try{e.truncateSync(r)}catch(i){throw i}finally{e.closeSync()}},rt.prototype.readFile=function(t,r,e,i){var o=i;this.open(t,e,420,function(a,u){if(a)return i(a);i=function(h,p){u.close(function(E){return h||(h=E),o(h,p)})},u.stat(function(h,p){if(h)return i(h);var E=R.alloc(p.size);u.read(E,0,p.size,0,function(L){if(L)return i(L);if(r===null)return i(L,E);try{i(null,E.toString(r))}catch(z){i(z)}})})})},rt.prototype.readFileSync=function(t,r,e){var i=this.openSync(t,e,420);try{var o=i.statSync(),a=R.alloc(o.size);return i.readSync(a,0,o.size,0),i.closeSync(),r===null?a:a.toString(r)}finally{i.closeSync()}},rt.prototype.writeFile=function(t,r,e,i,o,a){var u=a;this.open(t,i,420,function(h,p){if(h)return a(h);a=function(E){p.close(function(L){u(E||L)})};try{typeof r=="string"&&(r=R.from(r,e))}catch(E){return a(E)}p.write(r,0,r.length,0,a)})},rt.prototype.writeFileSync=function(t,r,e,i,o){var a=this.openSync(t,i,o);try{typeof r=="string"&&(r=R.from(r,e)),a.writeSync(r,0,r.length,0)}finally{a.closeSync()}},rt.prototype.appendFile=function(t,r,e,i,o,a){var u=a;this.open(t,i,o,function(h,p){if(h)return a(h);a=function(E){p.close(function(L){u(E||L)})},typeof r=="string"&&(r=R.from(r,e)),p.write(r,0,r.length,null,a)})},rt.prototype.appendFileSync=function(t,r,e,i,o){var a=this.openSync(t,i,o);try{typeof r=="string"&&(r=R.from(r,e)),a.writeSync(r,0,r.length,null)}finally{a.closeSync()}},rt.prototype.chmod=function(t,r,e,i){i(new f(s.ENOTSUP))},rt.prototype.chmodSync=function(t,r,e){throw new f(s.ENOTSUP)},rt.prototype.chown=function(t,r,e,i,o){o(new f(s.ENOTSUP))},rt.prototype.chownSync=function(t,r,e,i){throw new f(s.ENOTSUP)},rt.prototype.utimes=function(t,r,e,i){i(new f(s.ENOTSUP))},rt.prototype.utimesSync=function(t,r,e){throw new f(s.ENOTSUP)},rt.prototype.link=function(t,r,e){e(new f(s.ENOTSUP))},rt.prototype.linkSync=function(t,r){throw new f(s.ENOTSUP)},rt.prototype.symlink=function(t,r,e,i){i(new f(s.ENOTSUP))},rt.prototype.symlinkSync=function(t,r,e){throw new f(s.ENOTSUP)},rt.prototype.readlink=function(t,r){r(new f(s.ENOTSUP))},rt.prototype.readlinkSync=function(t){throw new f(s.ENOTSUP)};var _t=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.supportsSynch=function(){return!0},t.prototype.rename=function(e,i,o){try{this.renameSync(e,i),o()}catch(a){o(a)}},t.prototype.stat=function(e,i,o){try{o(null,this.statSync(e,i))}catch(a){o(a)}},t.prototype.open=function(e,i,o,a){try{a(null,this.openSync(e,i,o))}catch(u){a(u)}},t.prototype.unlink=function(e,i){try{this.unlinkSync(e),i()}catch(o){i(o)}},t.prototype.rmdir=function(e,i){try{this.rmdirSync(e),i()}catch(o){i(o)}},t.prototype.mkdir=function(e,i,o){try{this.mkdirSync(e,i),o()}catch(a){o(a)}},t.prototype.readdir=function(e,i){try{i(null,this.readdirSync(e))}catch(o){i(o)}},t.prototype.chmod=function(e,i,o,a){try{this.chmodSync(e,i,o),a()}catch(u){a(u)}},t.prototype.chown=function(e,i,o,a,u){try{this.chownSync(e,i,o,a),u()}catch(h){u(h)}},t.prototype.utimes=function(e,i,o,a){try{this.utimesSync(e,i,o),a()}catch(u){a(u)}},t.prototype.link=function(e,i,o){try{this.linkSync(e,i),o()}catch(a){o(a)}},t.prototype.symlink=function(e,i,o,a){try{this.symlinkSync(e,i,o),a()}catch(u){a(u)}},t.prototype.readlink=function(e,i){try{i(null,this.readlinkSync(e))}catch(o){i(o)}},t}(rt),yt=function(){};yt.prototype.sync=function(t){t(new f(s.ENOTSUP))},yt.prototype.syncSync=function(){throw new f(s.ENOTSUP)},yt.prototype.datasync=function(t){this.sync(t)},yt.prototype.datasyncSync=function(){return this.syncSync()},yt.prototype.chown=function(t,r,e){e(new f(s.ENOTSUP))},yt.prototype.chownSync=function(t,r){throw new f(s.ENOTSUP)},yt.prototype.chmod=function(t,r){r(new f(s.ENOTSUP))},yt.prototype.chmodSync=function(t){throw new f(s.ENOTSUP)},yt.prototype.utimes=function(t,r,e){e(new f(s.ENOTSUP))},yt.prototype.utimesSync=function(t,r){throw new f(s.ENOTSUP)};var Yt=function(n){function t(r,e,i,o,a){if(n.call(this),this._pos=0,this._dirty=!1,this._fs=r,this._path=e,this._flag=i,this._stat=o,a?this._buffer=a:this._buffer=At(),this._stat.size!==this._buffer.length&&this._flag.isReadable())throw new Error("Invalid buffer: Buffer is "+this._buffer.length+" long, yet Stats object specifies that file is "+this._stat.size+" long.")}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getBuffer=function(){return this._buffer},t.prototype.getStats=function(){return this._stat},t.prototype.getFlag=function(){return this._flag},t.prototype.getPath=function(){return this._path},t.prototype.getPos=function(){return this._flag.isAppendable()?this._stat.size:this._pos},t.prototype.advancePos=function(e){return this._pos+=e},t.prototype.setPos=function(e){return this._pos=e},t.prototype.sync=function(e){try{this.syncSync(),e()}catch(i){e(i)}},t.prototype.syncSync=function(){throw new f(s.ENOTSUP)},t.prototype.close=function(e){try{this.closeSync(),e()}catch(i){e(i)}},t.prototype.closeSync=function(){throw new f(s.ENOTSUP)},t.prototype.stat=function(e){try{e(null,this._stat.clone())}catch(i){e(i)}},t.prototype.statSync=function(){return this._stat.clone()},t.prototype.truncate=function(e,i){try{this.truncateSync(e),this._flag.isSynchronous()&&!ft.getRootFS().supportsSynch()&&this.sync(i),i()}catch(o){return i(o)}},t.prototype.truncateSync=function(e){if(this._dirty=!0,!this._flag.isWriteable())throw new f(s.EPERM,"File not opened with a writeable mode.");if(this._stat.mtime=new Date,e>this._buffer.length){var i=R.alloc(e-this._buffer.length,0);this.writeSync(i,0,i.length,this._buffer.length),this._flag.isSynchronous()&&ft.getRootFS().supportsSynch()&&this.syncSync();return}this._stat.size=e;var o=R.alloc(e);this._buffer.copy(o,0,0,e),this._buffer=o,this._flag.isSynchronous()&&ft.getRootFS().supportsSynch()&&this.syncSync()},t.prototype.write=function(e,i,o,a,u){try{u(null,this.writeSync(e,i,o,a),e)}catch(h){u(h)}},t.prototype.writeSync=function(e,i,o,a){if(this._dirty=!0,a==null&&(a=this.getPos()),!this._flag.isWriteable())throw new f(s.EPERM,"File not opened with a writeable mode.");var u=a+o;if(u>this._stat.size&&(this._stat.size=u,u>this._buffer.length)){var h=R.alloc(u);this._buffer.copy(h),this._buffer=h}var p=e.copy(this._buffer,a,i,i+o);return this._stat.mtime=new Date,this._flag.isSynchronous()?(this.syncSync(),p):(this.setPos(a+p),p)},t.prototype.read=function(e,i,o,a,u){try{u(null,this.readSync(e,i,o,a),e)}catch(h){u(h)}},t.prototype.readSync=function(e,i,o,a){if(!this._flag.isReadable())throw new f(s.EPERM,"File not opened with a readable mode.");a==null&&(a=this.getPos());var u=a+o;u>this._stat.size&&(o=this._stat.size-a);var h=this._buffer.copy(e,i,a,a+o);return this._stat.atime=new Date,this._pos=a+o,h},t.prototype.chmod=function(e,i){try{this.chmodSync(e),i()}catch(o){i(o)}},t.prototype.chmodSync=function(e){if(!this._fs.supportsProps())throw new f(s.ENOTSUP);this._dirty=!0,this._stat.chmod(e),this.syncSync()},t.prototype.isDirty=function(){return this._dirty},t.prototype.resetDirty=function(){this._dirty=!1},t}(yt),ae=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){e()},t.prototype.syncSync=function(){},t.prototype.close=function(e){e()},t.prototype.closeSync=function(){},t}(Yt),me=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},t.prototype.closeSync=function(){this.syncSync()},t}(Yt),g=function(n){function t(r,e,i){if(i===void 0&&(i=!0),n.call(this),this._queue=[],this._queueRunning=!1,this._isInitialized=!1,this._initializeCallbacks=[],this._sync=r,this._async=e,!r.supportsSynch())throw new Error("The first argument to AsyncMirror needs to be a synchronous file system.");kt(i,t.Name,{sync:"sync file system instance",async:"async file system instance"})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){try{var o=new t(e.sync,e.async,!1);o.initialize(function(a){a?i(a):i(null,o)},!1)}catch(a){i(a)}},t.isAvailable=function(){return!0},t.prototype.getName=function(){return t.Name},t.prototype._syncSync=function(e){this._sync.writeFileSync(e.getPath(),e.getBuffer(),null,m.getFileFlag("w"),e.getStats().mode),this.enqueueOp({apiMethod:"writeFile",arguments:[e.getPath(),e.getBuffer(),null,e.getFlag(),e.getStats().mode]})},t.prototype.initialize=function(e,i){var o=this;i===void 0&&(i=!0),i&&console.warn("[AsyncMirror] AsyncMirror.initialize() is deprecated and will be removed in the next major version. Please use 'AsyncMirror.Create({ sync: (sync file system instance), async: (async file system instance)}, cb)' to create and initialize AsyncMirror instances.");var a=this._initializeCallbacks,u=function(L){o._isInitialized=!L,o._initializeCallbacks=[],a.forEach(function(z){return z(L)})};if(this._isInitialized)e();else if(a.push(e)===1){var h=function(L,z,J){L!=="/"&&o._sync.mkdirSync(L,z),o._async.readdir(L,function(tt,ut){var dt=0;function Ft(Ht){Ht?J(Ht):dt<ut.length?(E(d.join(L,ut[dt]),Ft),dt++):J()}tt?J(tt):Ft()})},p=function(L,z,J){o._async.readFile(L,null,m.getFileFlag("r"),function(tt,ut){if(tt)J(tt);else try{o._sync.writeFileSync(L,ut,null,m.getFileFlag("w"),z)}catch(dt){tt=dt}finally{J(tt)}})},E=function(L,z){o._async.stat(L,!1,function(J,tt){J?z(J):tt.isDirectory()?h(L,tt.mode,z):p(L,tt.mode,z)})};h("/",0,u)}},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return this._sync.supportsProps()&&this._async.supportsProps()},t.prototype.renameSync=function(e,i){this.checkInitialized(),this._sync.renameSync(e,i),this.enqueueOp({apiMethod:"rename",arguments:[e,i]})},t.prototype.statSync=function(e,i){return this.checkInitialized(),this._sync.statSync(e,i)},t.prototype.openSync=function(e,i,o){this.checkInitialized();var a=this._sync.openSync(e,i,o);return a.closeSync(),new me(this,e,i,this._sync.statSync(e,!1),this._sync.readFileSync(e,null,m.getFileFlag("r")))},t.prototype.unlinkSync=function(e){this.checkInitialized(),this._sync.unlinkSync(e),this.enqueueOp({apiMethod:"unlink",arguments:[e]})},t.prototype.rmdirSync=function(e){this.checkInitialized(),this._sync.rmdirSync(e),this.enqueueOp({apiMethod:"rmdir",arguments:[e]})},t.prototype.mkdirSync=function(e,i){this.checkInitialized(),this._sync.mkdirSync(e,i),this.enqueueOp({apiMethod:"mkdir",arguments:[e,i]})},t.prototype.readdirSync=function(e){return this.checkInitialized(),this._sync.readdirSync(e)},t.prototype.existsSync=function(e){return this.checkInitialized(),this._sync.existsSync(e)},t.prototype.chmodSync=function(e,i,o){this.checkInitialized(),this._sync.chmodSync(e,i,o),this.enqueueOp({apiMethod:"chmod",arguments:[e,i,o]})},t.prototype.chownSync=function(e,i,o,a){this.checkInitialized(),this._sync.chownSync(e,i,o,a),this.enqueueOp({apiMethod:"chown",arguments:[e,i,o,a]})},t.prototype.utimesSync=function(e,i,o){this.checkInitialized(),this._sync.utimesSync(e,i,o),this.enqueueOp({apiMethod:"utimes",arguments:[e,i,o]})},t.prototype.checkInitialized=function(){if(!this._isInitialized)throw new f(s.EPERM,"AsyncMirrorFS is not initialized. Please initialize AsyncMirrorFS using its initialize() method before using it.")},t.prototype.enqueueOp=function(e){var i=this;if(this._queue.push(e),!this._queueRunning){this._queueRunning=!0;var o=function(a){if(a&&console.error("WARNING: File system has desynchronized. Received following error: "+a+`
$`),i._queue.length>0){var u=i._queue.shift(),h=u.arguments;h.push(o),i._async[u.apiMethod].apply(i._async,h)}else i._queueRunning=!1};o()}},t}(_t);g.Name="AsyncMirror",g.Options={sync:{type:"object",description:"The synchronous file system to mirror the asynchronous file system to."},async:{type:"object",description:"The asynchronous file system to mirror."}};function c(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}var l=Math.max;function w(n,t,r){return t=l(t===void 0?n.length-1:t,0),function(){for(var e=arguments,i=-1,o=l(e.length-t,0),a=Array(o);++i<o;)a[i]=e[t+i];i=-1;for(var u=Array(t+1);++i<t;)u[i]=e[i];return u[t]=r(a),c(n,this,u)}}function T(n){return n}function W(n,t){return w(n,t,T)}var Y=function(n){return W(function(t){var r=t.pop();n.call(this,t,r)})};function xt(n){return W(function(t,r){var e=Y(function(i,o){var a=this;return n(t,function(u,h){u.apply(a,i.concat(h))},o)});return r.length?e.apply(this,r):e})}var Lt=typeof j=="object"&&j&&j.Object===Object&&j,Ct=typeof self=="object"&&self&&self.Object===Object&&self,qt=Lt||Ct||Function("return this")(),Tt=qt.Symbol,Se=Object.prototype,Xe=Se.hasOwnProperty,Ce=Se.toString,Me=Tt?Tt.toStringTag:void 0;function Tr(n){var t=Xe.call(n,Me),r=n[Me];try{n[Me]=void 0;var e=!0}catch{}var i=Ce.call(n);return e&&(t?n[Me]=r:delete n[Me]),i}var Ar=Object.prototype,Cr=Ar.toString;function B(n){return Cr.call(n)}var it="[object Null]",y="[object Undefined]",at=Tt?Tt.toStringTag:void 0;function Mt(n){return n==null?n===void 0?y:it:at&&at in Object(n)?Tr(n):B(n)}function nt(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var se="[object AsyncFunction]",ot="[object Function]",Gt="[object GeneratorFunction]",V="[object Proxy]";function Z(n){if(!nt(n))return!1;var t=Mt(n);return t==ot||t==Gt||t==se||t==V}var Ye=9007199254740991;function Ut(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Ye}function ct(n){return n!=null&&Ut(n.length)&&!Z(n)}var Ue={};function Re(){}function jt(n){return function(){if(n!==null){var t=n;n=null,t.apply(this,arguments)}}}var Ot=typeof Symbol=="function"&&Symbol.iterator,ee=function(n){return Ot&&n[Ot]&&n[Ot]()};function oe(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}function re(n){return n!=null&&typeof n=="object"}var qe="[object Arguments]";function Pe(n){return re(n)&&Mt(n)==qe}var Zt=Object.prototype,ue=Zt.hasOwnProperty,te=Zt.propertyIsEnumerable,_e=Pe(function(){return arguments}())?Pe:function(n){return re(n)&&ue.call(n,"callee")&&!te.call(n,"callee")},ve=Array.isArray;function vr(){return!1}var $r=typeof D=="object"&&D&&!D.nodeType&&D,tn=$r&&typeof I=="object"&&I&&!I.nodeType&&I,Si=tn&&tn.exports===$r,en=Si?qt.Buffer:void 0,_i=en?en.isBuffer:void 0,Ei=_i||vr,Fi=9007199254740991,Ii=/^(?:0|[1-9]\d*)$/;function xi(n,t){return t=t??Fi,!!t&&(typeof n=="number"||Ii.test(n))&&n>-1&&n%1==0&&n<t}var ki="[object Arguments]",Ri="[object Array]",bi="[object Boolean]",Oi="[object Date]",Ni="[object Error]",Li="[object Function]",Di="[object Map]",Ti="[object Number]",Ai="[object Object]",Ci="[object RegExp]",Mi="[object Set]",Ui="[object String]",Pi="[object WeakMap]",Bi="[object ArrayBuffer]",zi="[object DataView]",ji="[object Float32Array]",Wi="[object Float64Array]",Hi="[object Int8Array]",Zi="[object Int16Array]",Vi="[object Int32Array]",Xi="[object Uint8Array]",Yi="[object Uint8ClampedArray]",qi="[object Uint16Array]",Gi="[object Uint32Array]",Pt={};Pt[ji]=Pt[Wi]=Pt[Hi]=Pt[Zi]=Pt[Vi]=Pt[Xi]=Pt[Yi]=Pt[qi]=Pt[Gi]=!0,Pt[ki]=Pt[Ri]=Pt[Bi]=Pt[bi]=Pt[zi]=Pt[Oi]=Pt[Ni]=Pt[Li]=Pt[Di]=Pt[Ti]=Pt[Ai]=Pt[Ci]=Pt[Mi]=Pt[Ui]=Pt[Pi]=!1;function Ki(n){return re(n)&&Ut(n.length)&&!!Pt[Mt(n)]}function Ji(n){return function(t){return n(t)}}var rn=typeof D=="object"&&D&&!D.nodeType&&D,nn=rn&&typeof I=="object"&&I&&!I.nodeType&&I,Qi=nn&&nn.exports===rn,Mr=Qi&&Lt.process,on=function(){try{return Mr&&Mr.binding&&Mr.binding("util")}catch{}}(),an=on&&on.isTypedArray,$i=an?Ji(an):Ki,to=Object.prototype,eo=to.hasOwnProperty;function ro(n,t){var r=ve(n),e=!r&&_e(n),i=!r&&!e&&Ei(n),o=!r&&!e&&!i&&$i(n),a=r||e||i||o,u=a?oe(n.length,String):[],h=u.length;for(var p in n)(t||eo.call(n,p))&&!(a&&(p=="length"||i&&(p=="offset"||p=="parent")||o&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||xi(p,h)))&&u.push(p);return u}var no=Object.prototype;function io(n){var t=n&&n.constructor,r=typeof t=="function"&&t.prototype||no;return n===r}function oo(n,t){return function(r){return n(t(r))}}var ao=oo(Object.keys,Object),so=Object.prototype,uo=so.hasOwnProperty;function fo(n){if(!io(n))return ao(n);var t=[];for(var r in Object(n))uo.call(n,r)&&r!="constructor"&&t.push(r);return t}function sn(n){return ct(n)?ro(n):fo(n)}function co(n){var t=-1,r=n.length;return function(){return++t<r?{value:n[t],key:t}:null}}function lo(n){var t=-1;return function(){var e=n.next();return e.done?null:(t++,{value:e.value,key:t})}}function ho(n){var t=sn(n),r=-1,e=t.length;return function(){var o=t[++r];return r<e?{value:n[o],key:o}:null}}function po(n){if(ct(n))return co(n);var t=ee(n);return t?lo(t):ho(n)}function un(n){return function(){if(n===null)throw new Error("Callback was already called.");var t=n;n=null,t.apply(this,arguments)}}function fn(n){return function(t,r,e){if(e=jt(e||Re),n<=0||!t)return e(null);var i=po(t),o=!1,a=0;function u(p,E){if(a-=1,p)o=!0,e(p);else{if(E===Ue||o&&a<=0)return o=!0,e(null);h()}}function h(){for(;a<n&&!o;){var p=i();if(p===null){o=!0,a<=0&&e(null);return}a+=1,r(p.value,p.key,un(u))}}h()}}function cn(n,t,r,e){fn(t)(n,r,e)}function Ur(n,t){return function(r,e,i){return n(r,t,e,i)}}function yo(n,t,r){r=jt(r||Re);var e=0,i=0,o=n.length;o===0&&r(null);function a(u,h){u?r(u):(++i===o||h===Ue)&&r(null)}for(;e<o;e++)t(n[e],e,un(a))}var vo=Ur(cn,1/0),ln=function(n,t,r){var e=ct(n)?yo:vo;e(n,t,r)};function go(n){return function(t,r,e){return n(ln,t,r,e)}}function hn(n,t,r,e){e=e||Re,t=t||[];var i=[],o=0;n(t,function(a,u,h){var p=o++;r(a,function(E,L){i[p]=L,h(E)})},function(a){e(a,i)})}var wo=go(hn);xt(wo);function mo(n){return function(t,r,e,i){return n(fn(r),t,e,i)}}var So=mo(hn),_o=Ur(So,1);xt(_o),W(function(n,t){return W(function(r){return n.apply(null,t.concat(r))})});function Eo(n,t){for(var r=-1,e=n==null?0:n.length;++r<e&&t(n[r],r,n)!==!1;);return n}function Fo(n){return function(t,r,e){for(var i=-1,o=Object(t),a=e(t),u=a.length;u--;){var h=a[n?u:++i];if(r(o[h],h,o)===!1)break}return t}}var Io=Fo();function Na(n,t){return n&&Io(n,t,sn)}function xo(n,t,r,e){for(var i=n.length,o=r+(e?1:-1);e?o--:++o<i;)if(t(n[o],o,n))return o;return-1}function ko(n){return n!==n}function Ro(n,t,r){for(var e=r-1,i=n.length;++e<i;)if(n[e]===t)return e;return-1}function La(n,t,r){return t===t?Ro(n,t,r):xo(n,ko,r)}var pn="\\ud800-\\udfff",bo="\\u0300-\\u036f",Oo="\\ufe20-\\ufe2f",No="\\u20d0-\\u20ff",Lo=bo+Oo+No,Do="\\ufe0e\\ufe0f",To="["+pn+"]",Pr="["+Lo+"]",Ao="\\ud83c[\\udffb-\\udfff]",Co="(?:"+Pr+"|"+Ao+")",dn="[^"+pn+"]",yn="(?:\\ud83c[\\udde6-\\uddff]){2}",vn="[\\ud800-\\udbff][\\udc00-\\udfff]",Mo="\\u200d",gn=Co+"?",wn="["+Do+"]?",Uo="(?:"+Mo+"(?:"+[dn,yn,vn].join("|")+")"+wn+gn+")*",Da=wn+gn+Uo,Ta="(?:"+[dn+Pr+"?",Pr,yn,vn,To].join("|")+")",mn=typeof setImmediate=="function"&&setImmediate,Sn=typeof O=="object"&&typeof O.nextTick=="function";function _n(n){setTimeout(n,0)}function En(n){return W(function(t,r){n(function(){t.apply(null,r)})})}var gr;mn?gr=setImmediate:Sn?gr=O.nextTick:gr=_n,En(gr);var Po=Ur(cn,1);function Bo(n,t,r,e){e=jt(e||Re),Po(n,function(i,o,a){r(t,i,function(u,h){t=h,a(u)})},function(i){e(i,t)})}var zo=W(function(t){return W(function(r){var e=this,i=r[r.length-1];typeof i=="function"?r.pop():i=Re,Bo(t,r,function(o,a,u){a.apply(e,o.concat(W(function(h,p){u(h,p)})))},function(o,a){i.apply(e,[o].concat(a))})})});W(function(n){return zo.apply(null,n.reverse())}),W(function(n){var t=[null].concat(n);return Y(function(r,e){return e.apply(this,t)})});function Fn(n){return W(function(t,r){t.apply(null,r.concat(W(function(e,i){typeof console=="object"&&(e?console.error&&console.error(e):console[n]&&Eo(i,function(o){console[n](o)}))})))})}Fn("dir");function jo(n){return function(t,r,e){return n(t,e)}}function In(n,t,r){ln(n,jo(t),r)}Fn("log");var wr;Sn?wr=O.nextTick:mn?wr=setImmediate:wr=_n,En(wr);var Aa=Math.ceil,Ca=Math.max,fe;function Wo(){fe||(fe={},fe[Dropbox.ApiError.NETWORK_ERROR]=s.EIO,fe[Dropbox.ApiError.INVALID_PARAM]=s.EINVAL,fe[Dropbox.ApiError.INVALID_TOKEN]=s.EPERM,fe[Dropbox.ApiError.OAUTH_ERROR]=s.EPERM,fe[Dropbox.ApiError.NOT_FOUND]=s.ENOENT,fe[Dropbox.ApiError.INVALID_METHOD]=s.EINVAL,fe[Dropbox.ApiError.NOT_ACCEPTABLE]=s.EINVAL,fe[Dropbox.ApiError.CONFLICT]=s.EINVAL,fe[Dropbox.ApiError.RATE_LIMITED]=s.EBUSY,fe[Dropbox.ApiError.SERVER_ERROR]=s.EBUSY,fe[Dropbox.ApiError.OVER_QUOTA]=s.ENOSPC)}function Ho(n){return n&&n.stat.isFile}function Zo(n){return n&&n.stat.isFolder}function Vo(n){return n==null||typeof n=="object"&&typeof n.byteLength=="number"}var ne=function(t){this._cache={},this._client=t};ne.prototype.readdir=function(t,r){var e=this,i=this.getCachedDirInfo(t);this._wrap(function(o){i!==null&&i.contents?e._client.readdir(t,{contentHash:i.stat.contentHash},o):e._client.readdir(t,o)},function(o,a,u,h){o?o.status===Dropbox.ApiError.NO_CONTENT&&i!==null?r(null,i.contents.slice(0)):r(o):(e.updateCachedDirInfo(t,u,a.slice(0)),h.forEach(function(p){e.updateCachedInfo(d.join(t,p.name),p)}),r(null,a))})},ne.prototype.remove=function(t,r){var e=this;this._wrap(function(i){e._client.remove(t,i)},function(i,o){i||e.updateCachedInfo(t,o),r(i)})},ne.prototype.move=function(t,r,e){var i=this;this._wrap(function(o){i._client.move(t,r,o)},function(o,a){o||(i.deleteCachedInfo(t),i.updateCachedInfo(r,a)),e(o)})},ne.prototype.stat=function(t,r){var e=this;this._wrap(function(i){e._client.stat(t,i)},function(i,o){i||e.updateCachedInfo(t,o),r(i,o)})},ne.prototype.readFile=function(t,r){var e=this,i=this.getCachedFileInfo(t);i!==null&&i.contents!==null?this.stat(t,function(o,a){o?r(o):a.contentHash===i.stat.contentHash?r(o,i.contents.slice(0),i.stat):e.readFile(t,r)}):this._wrap(function(o){e._client.readFile(t,{arrayBuffer:!0},o)},function(o,a,u){o||e.updateCachedInfo(t,u,a.slice(0)),r(o,a,u)})},ne.prototype.writeFile=function(t,r,e){var i=this;this._wrap(function(o){i._client.writeFile(t,r,o)},function(o,a){o||i.updateCachedInfo(t,a,r.slice(0)),e(o,a)})},ne.prototype.mkdir=function(t,r){var e=this;this._wrap(function(i){e._client.mkdir(t,i)},function(i,o){i||e.updateCachedInfo(t,o,[]),r(i)})},ne.prototype._wrap=function(t,r){var e=0,i=function(o){var a=2;if(o&&3>++e)switch(o.status){case Dropbox.ApiError.SERVER_ERROR:case Dropbox.ApiError.NETWORK_ERROR:case Dropbox.ApiError.RATE_LIMITED:setTimeout(function(){t(i)},a*1e3);break;default:r.apply(null,arguments);break}else r.apply(null,arguments)};t(i)},ne.prototype.getCachedInfo=function(t){return this._cache[t.toLowerCase()]},ne.prototype.putCachedInfo=function(t,r){this._cache[t.toLowerCase()]=r},ne.prototype.deleteCachedInfo=function(t){delete this._cache[t.toLowerCase()]},ne.prototype.getCachedDirInfo=function(t){var r=this.getCachedInfo(t);return Zo(r)?r:null},ne.prototype.getCachedFileInfo=function(t){var r=this.getCachedInfo(t);return Ho(r)?r:null},ne.prototype.updateCachedDirInfo=function(t,r,e){e===void 0&&(e=null);var i=this.getCachedInfo(t);r.contentHash!==null&&(i===void 0||i.stat.contentHash!==r.contentHash)&&this.putCachedInfo(t,{stat:r,contents:e})},ne.prototype.updateCachedFileInfo=function(t,r,e){e===void 0&&(e=null);var i=this.getCachedInfo(t);r.versionTag!==null&&(i===void 0||i.stat.versionTag!==r.versionTag)&&this.putCachedInfo(t,{stat:r,contents:e})},ne.prototype.updateCachedInfo=function(t,r,e){e===void 0&&(e=null),r.isFile&&Vo(e)?this.updateCachedFileInfo(t,r,e):r.isFolder&&Array.isArray(e)&&this.updateCachedDirInfo(t,r,e)};var Xo=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var i=this;if(this.isDirty()){var o=this.getBuffer(),a=G(o);this._fs._writeFileStrict(this.getPath(),a,function(u){u||i.resetDirty(),e(u)})}else e()},t.prototype.close=function(e){this.sync(e)},t}(Yt),mr=function(n){function t(r,e){e===void 0&&(e=!0),n.call(this),this._client=new ne(r),kt(e,t.Name,{client:"authenticated dropbox client instance"}),Wo()}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t(e.client,!1))},t.isAvailable=function(){return typeof Dropbox<"u"},t.prototype.getName=function(){return t.Name},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.empty=function(e){var i=this;this._client.readdir("/",function(o,a){if(o)e(i.convert(o,"/"));else{var u=function(p,E){var L=d.join("/",p);i._client.remove(L,function(z){E(z?i.convert(z,L):null)})},h=function(p){p?e(p):e()};In(a,u,h)}})},t.prototype.rename=function(e,i,o){var a=this;this._client.move(e,i,function(u){u?a._client.stat(i,function(h,p){if(h||p.isFolder){var E=u.response.error.indexOf(e)>-1?e:i;o(a.convert(u,E))}else a._client.remove(i,function(L){L?o(a.convert(L,i)):a.rename(e,i,o)})}):o()})},t.prototype.stat=function(e,i,o){var a=this;this._client.stat(e,function(u,h){if(u)o(a.convert(u,e));else if(h&&h.isRemoved)o(f.FileError(s.ENOENT,e));else{var p=new A(a._statType(h),h.size);return o(null,p)}})},t.prototype.open=function(e,i,o,a){var u=this;this._client.readFile(e,function(h,p,E){if(h)if(i.isReadable())a(u.convert(h,e));else switch(h.status){case Dropbox.ApiError.NOT_FOUND:var L=new ArrayBuffer(0);return u._writeFileStrict(e,L,function(tt,ut){if(tt)a(tt);else{var dt=u._makeFile(e,i,ut,Et(L));a(null,dt)}});default:return a(u.convert(h,e))}else{var z;p===null?z=At():z=Et(p);var J=u._makeFile(e,i,E,z);return a(null,J)}})},t.prototype._writeFileStrict=function(e,i,o){var a=this,u=d.dirname(e);this.stat(u,!1,function(h,p){h?o(f.FileError(s.ENOENT,u)):a._client.writeFile(e,i,function(E,L){E?o(a.convert(E,e)):o(null,L)})})},t.prototype._statType=function(e){return e.isFile?N.FILE:N.DIRECTORY},t.prototype._makeFile=function(e,i,o,a){var u=this._statType(o),h=new A(u,o.size);return new Xo(this,e,i,h,a)},t.prototype._remove=function(e,i,o){var a=this;this._client.stat(e,function(u,h){u?i(a.convert(u,e)):h.isFile&&!o?i(f.FileError(s.ENOTDIR,e)):!h.isFile&&o?i(f.FileError(s.EISDIR,e)):a._client.remove(e,function(p){i(p?a.convert(p,e):null)})})},t.prototype.unlink=function(e,i){this._remove(e,i,!0)},t.prototype.rmdir=function(e,i){this._remove(e,i,!1)},t.prototype.mkdir=function(e,i,o){var a=this,u=d.dirname(e);this._client.stat(u,function(h,p){h?o(a.convert(h,u)):a._client.mkdir(e,function(E){o(E?f.FileError(s.EEXIST,e):null)})})},t.prototype.readdir=function(e,i){var o=this;this._client.readdir(e,function(a,u){return a?i(o.convert(a)):i(null,u)})},t.prototype.convert=function(e,i){i===void 0&&(i=null);var o=fe[e.status];return o===void 0&&(o=s.EIO),i?f.FileError(o,i):new f(o)},t}(rt);mr.Name="Dropbox",mr.Options={client:{type:"object",description:"An *authenticated* Dropbox client. Must be from the 0.10 JS SDK.",validator:function(n,t){n.isAuthenticated&&n.isAuthenticated()?t():t(new f(s.EINVAL,"'client' option must be an authenticated Dropbox client from the v0.10 JS SDK."))}}};function Vt(n,t){t===void 0&&(t="");for(var r=n.errno,e=n.node,i=[];e&&(i.unshift(e.name),e!==e.parent);)e=e.parent;return new f(r,v[r],i.length>0?"/"+i.join("/"):t)}var Yo=function(n){function t(r,e,i,o){n.call(this),this._fs=r,this._FS=e,this._path=i,this._stream=o}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getPos=function(){},t.prototype.close=function(e){var i=null;try{this.closeSync()}catch(o){i=o}finally{e(i)}},t.prototype.closeSync=function(){try{this._FS.close(this._stream)}catch(e){throw Vt(e,this._path)}},t.prototype.stat=function(e){try{e(null,this.statSync())}catch(i){e(i)}},t.prototype.statSync=function(){try{return this._fs.statSync(this._path,!1)}catch(e){throw Vt(e,this._path)}},t.prototype.truncate=function(e,i){var o=null;try{this.truncateSync(e)}catch(a){o=a}finally{i(o)}},t.prototype.truncateSync=function(e){try{this._FS.ftruncate(this._stream.fd,e)}catch(i){throw Vt(i,this._path)}},t.prototype.write=function(e,i,o,a,u){try{u(null,this.writeSync(e,i,o,a),e)}catch(h){u(h)}},t.prototype.writeSync=function(e,i,o,a){try{var u=st(e),h=a===null?void 0:a;return this._FS.write(this._stream,u,i,o,h)}catch(p){throw Vt(p,this._path)}},t.prototype.read=function(e,i,o,a,u){try{u(null,this.readSync(e,i,o,a),e)}catch(h){u(h)}},t.prototype.readSync=function(e,i,o,a){try{var u=st(e),h=a===null?void 0:a;return this._FS.read(this._stream,u,i,o,h)}catch(p){throw Vt(p,this._path)}},t.prototype.sync=function(e){e()},t.prototype.syncSync=function(){},t.prototype.chown=function(e,i,o){var a=null;try{this.chownSync(e,i)}catch(u){a=u}finally{o(a)}},t.prototype.chownSync=function(e,i){try{this._FS.fchown(this._stream.fd,e,i)}catch(o){throw Vt(o,this._path)}},t.prototype.chmod=function(e,i){var o=null;try{this.chmodSync(e)}catch(a){o=a}finally{i(o)}},t.prototype.chmodSync=function(e){try{this._FS.fchmod(this._stream.fd,e)}catch(i){throw Vt(i,this._path)}},t.prototype.utimes=function(e,i,o){var a=null;try{this.utimesSync(e,i)}catch(u){a=u}finally{o(a)}},t.prototype.utimesSync=function(e,i){this._fs.utimesSync(this._path,e,i)},t}(yt),Sr=function(n){function t(r){n.call(this),this._FS=r}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t(e.FS))},t.isAvailable=function(){return!0},t.prototype.getName=function(){return this._FS.DB_NAME()},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsLinks=function(){return!0},t.prototype.supportsProps=function(){return!0},t.prototype.supportsSynch=function(){return!0},t.prototype.renameSync=function(e,i){try{this._FS.rename(e,i)}catch(o){throw o.errno===s.ENOENT?Vt(o,this.existsSync(e)?i:e):Vt(o)}},t.prototype.statSync=function(e,i){try{var o=i?this._FS.lstat(e):this._FS.stat(e),a=this.modeToFileType(o.mode);return new A(a,o.size,o.mode,o.atime,o.mtime,o.ctime)}catch(u){throw Vt(u,e)}},t.prototype.openSync=function(e,i,o){try{var a=this._FS.open(e,i.getFlagString(),o);if(this._FS.isDir(a.node.mode))throw this._FS.close(a),f.EISDIR(e);return new Yo(this,this._FS,e,a)}catch(u){throw Vt(u,e)}},t.prototype.unlinkSync=function(e){try{this._FS.unlink(e)}catch(i){throw Vt(i,e)}},t.prototype.rmdirSync=function(e){try{this._FS.rmdir(e)}catch(i){throw Vt(i,e)}},t.prototype.mkdirSync=function(e,i){try{this._FS.mkdir(e,i)}catch(o){throw Vt(o,e)}},t.prototype.readdirSync=function(e){try{return this._FS.readdir(e).filter(function(i){return i!=="."&&i!==".."})}catch(i){throw Vt(i,e)}},t.prototype.truncateSync=function(e,i){try{this._FS.truncate(e,i)}catch(o){throw Vt(o,e)}},t.prototype.readFileSync=function(e,i,o){try{var a=this._FS.readFile(e,{flags:o.getFlagString()}),u=vt(a);return i?u.toString(i):u}catch(h){throw Vt(h,e)}},t.prototype.writeFileSync=function(e,i,o,a,u){try{o&&(i=R.from(i,o));var h=st(i);this._FS.writeFile(e,h,{flags:a.getFlagString(),encoding:"binary"}),this._FS.chmod(e,u)}catch(p){throw Vt(p,e)}},t.prototype.chmodSync=function(e,i,o){try{i?this._FS.lchmod(e,o):this._FS.chmod(e,o)}catch(a){throw Vt(a,e)}},t.prototype.chownSync=function(e,i,o,a){try{i?this._FS.lchown(e,o,a):this._FS.chown(e,o,a)}catch(u){throw Vt(u,e)}},t.prototype.symlinkSync=function(e,i,o){try{this._FS.symlink(e,i)}catch(a){throw Vt(a)}},t.prototype.readlinkSync=function(e){try{return this._FS.readlink(e)}catch(i){throw Vt(i,e)}},t.prototype.utimesSync=function(e,i,o){try{this._FS.utime(e,i.getTime(),o.getTime())}catch(a){throw Vt(a,e)}},t.prototype.modeToFileType=function(e){if(this._FS.isDir(e))return N.DIRECTORY;if(this._FS.isFile(e))return N.FILE;if(this._FS.isLink(e))return N.SYMLINK;throw f.EPERM("Invalid mode: "+e)},t}(_t);Sr.Name="EmscriptenFileSystem",Sr.Options={FS:{type:"object",description:"The Emscripten file system to use (the `FS` variable)"}};var Ge=function(n){function t(r,e){n.call(this),this._folder=r,this._wrapped=e}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t(e.folder,e.wrapped))},t.isAvailable=function(){return!0},t.prototype.initialize=function(e){var i=this;this._wrapped.exists(this._folder,function(o){o?e():i._wrapped.isReadOnly()?e(f.ENOENT(i._folder)):i._wrapped.mkdir(i._folder,511,e)})},t.prototype.getName=function(){return this._wrapped.getName()},t.prototype.isReadOnly=function(){return this._wrapped.isReadOnly()},t.prototype.supportsProps=function(){return this._wrapped.supportsProps()},t.prototype.supportsSynch=function(){return this._wrapped.supportsSynch()},t.prototype.supportsLinks=function(){return!1},t}(rt);Ge.Name="FolderAdapter",Ge.Options={folder:{type:"string",description:"The folder to use as the root directory"},wrapped:{type:"object",description:"The file system to wrap"}};function xn(n,t){if(t!==null&&typeof t=="object"){var r=t,e=r.path;e&&(e="/"+d.relative(n,e),r.message=r.message.replace(r.path,e),r.path=e)}return t}function qo(n,t){return typeof t=="function"?function(r){arguments.length>0&&(arguments[0]=xn(n,r)),t.apply(null,arguments)}:t}function kn(n,t,r){return n.slice(n.length-4)!=="Sync"?function(){return arguments.length>0&&(t&&(arguments[0]=d.join(this._folder,arguments[0])),r&&(arguments[1]=d.join(this._folder,arguments[1])),arguments[arguments.length-1]=qo(this._folder,arguments[arguments.length-1])),this._wrapped[n].apply(this._wrapped,arguments)}:function(){try{return t&&(arguments[0]=d.join(this._folder,arguments[0])),r&&(arguments[1]=d.join(this._folder,arguments[1])),this._wrapped[n].apply(this._wrapped,arguments)}catch(e){throw xn(this._folder,e)}}}["diskSpace","stat","statSync","open","openSync","unlink","unlinkSync","rmdir","rmdirSync","mkdir","mkdirSync","readdir","readdirSync","exists","existsSync","realpath","realpathSync","truncate","truncateSync","readFile","readFileSync","writeFile","writeFileSync","appendFile","appendFileSync","chmod","chmodSync","chown","chownSync","utimes","utimesSync","readlink","readlinkSync"].forEach(function(n){Ge.prototype[n]=kn(n,!0,!1)}),["rename","renameSync","link","linkSync","symlink","symlinkSync"].forEach(function(n){Ge.prototype[n]=kn(n,!0,!0)});var _r;typeof window<"u"?_r=window:typeof self<"u"?_r=self:_r=j;var Kt=_r;function Go(n){return n.isDirectory}var Br=Kt.webkitRequestFileSystem||Kt.requestFileSystem||null;function Ko(n,t,r,e){if(typeof navigator.webkitPersistentStorage<"u")switch(n){case Kt.PERSISTENT:navigator.webkitPersistentStorage.requestQuota(t,r,e);break;case Kt.TEMPORARY:navigator.webkitTemporaryStorage.requestQuota(t,r,e);break;default:e(new TypeError("Invalid storage type: "+n));break}else Kt.webkitStorageInfo.requestQuota(n,t,r,e)}function Jo(n){return Array.prototype.slice.call(n||[],0)}function Ee(n,t,r){switch(n.name){case"PathExistsError":return f.EEXIST(t);case"QuotaExceededError":return f.FileError(s.ENOSPC,t);case"NotFoundError":return f.ENOENT(t);case"SecurityError":return f.FileError(s.EACCES,t);case"InvalidModificationError":return f.FileError(s.EPERM,t);case"TypeMismatchError":return f.FileError(r?s.ENOTDIR:s.EISDIR,t);case"EncodingError":case"InvalidStateError":case"NoModificationAllowedError":default:return f.FileError(s.EINVAL,t)}}var Qo=function(n){function t(r,e,i,o,a,u){n.call(this,r,i,o,a,u),this._entry=e}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var i=this;if(!this.isDirty())return e();this._entry.createWriter(function(o){var a=i.getBuffer(),u=new Blob([G(a)]),h=u.size;o.onwriteend=function(p){o.onwriteend=null,o.onerror=null,o.truncate(h),i.resetDirty(),e()},o.onerror=function(p){e(Ee(p,i.getPath(),!1))},o.write(u)})},t.prototype.close=function(e){this.sync(e)},t}(Yt),Er=function(n){function t(r,e,i){r===void 0&&(r=5),e===void 0&&(e=Kt.PERSISTENT),i===void 0&&(i=!0),n.call(this),this.size=1024*1024*r,this.type=e,kt(i,t.Name,{size:r,type:e})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){var o=new t(e.size,e.type,!1);o.allocate(function(a){return a?i(a):i(null,o)},!1)},t.isAvailable=function(){return!!Br},t.prototype.getName=function(){return t.Name},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.allocate=function(e,i){var o=this;e===void 0&&(e=function(){}),i===void 0&&(i=!0),i&&console.warn("[HTML5FS] HTML5FS.allocate() is deprecated and will be removed in the next major release. Please use 'HTML5FS.Create({type: "+this.type+", size: "+this.size+"}, cb)' to create and allocate HTML5FS instances.");var a=function(h){o.fs=h,e()},u=function(h){e(Ee(h,"/",!0))};this.type===Kt.PERSISTENT?Ko(this.type,this.size,function(h){Br(o.type,h,a,u)},u):Br(this.type,this.size,a,u)},t.prototype.empty=function(e){this._readdir("/",function(i,o){if(i)console.error("Failed to empty FS"),e(i);else{var a=function(h){i?(console.error("Failed to empty FS"),e(i)):e()},u=function(h,p){var E=function(){p()},L=function(z){p(Ee(z,h.fullPath,!h.isDirectory))};Go(h)?h.removeRecursively(E,L):h.remove(E,L)};In(o,u,a)}})},t.prototype.rename=function(e,i,o){var a=this,u=2,h=0,p=this.fs.root,E=e,L=function(J){--u<=0&&o(Ee(J,E,!1))},z=function(J){if(++h===2)return o(new f(s.EINVAL,"Something was identified as both a file and a directory. This should never happen."));if(e===i)return o();E=d.dirname(i),p.getDirectory(E,{},function(tt){E=d.basename(i),J.moveTo(tt,E,function(ut){o()},function(ut){J.isDirectory?(E=i,a.unlink(i,function(dt){dt?L(ut):a.rename(e,i,o)})):L(ut)})},L)};p.getFile(e,{},z,L),p.getDirectory(e,{},z,L)},t.prototype.stat=function(e,i,o){var a=this,u={create:!1},h=function(z){var J=function(tt){var ut=new A(N.FILE,tt.size);o(null,ut)};z.file(J,E)},p=function(z){var J=4096,tt=new A(N.DIRECTORY,J);o(null,tt)},E=function(z){o(Ee(z,e,!1))},L=function(){a.fs.root.getDirectory(e,u,p,E)};this.fs.root.getFile(e,u,h,L)},t.prototype.open=function(e,i,o,a){var u=this,h=function(p){p.name==="InvalidModificationError"&&i.isExclusive()?a(f.EEXIST(e)):a(Ee(p,e,!1))};this.fs.root.getFile(e,{create:i.pathNotExistsAction()===b.CREATE_FILE,exclusive:i.isExclusive()},function(p){p.file(function(E){var L=new FileReader;L.onloadend=function(z){var J=u._makeFile(e,p,i,E,L.result);a(null,J)},L.onerror=function(z){h(L.error)},L.readAsArrayBuffer(E)},h)},h)},t.prototype.unlink=function(e,i){this._remove(e,i,!0)},t.prototype.rmdir=function(e,i){var o=this;this.readdir(e,function(a,u){a?i(a):u.length>0?i(f.ENOTEMPTY(e)):o._remove(e,i,!1)})},t.prototype.mkdir=function(e,i,o){var a={create:!0,exclusive:!0},u=function(p){o()},h=function(p){o(Ee(p,e,!0))};this.fs.root.getDirectory(e,a,u,h)},t.prototype.readdir=function(e,i){this._readdir(e,function(o,a){if(a){for(var u=[],h=0,p=a;h<p.length;h+=1){var E=p[h];u.push(E.name)}i(null,u)}else return i(o)})},t.prototype._makeFile=function(e,i,o,a,u){u===void 0&&(u=new ArrayBuffer(0));var h=new A(N.FILE,a.size),p=Et(u);return new Qo(this,i,e,o,h,p)},t.prototype._readdir=function(e,i){var o=function(a){i(Ee(a,e,!0))};this.fs.root.getDirectory(e,{create:!1},function(a){var u=a.createReader(),h=[],p=function(){u.readEntries(function(E){E.length?(h=h.concat(Jo(E)),p()):i(null,h)},o)};p()},o)},t.prototype._remove=function(e,i,o){var a=function(p){var E=function(){i()},L=function(z){i(Ee(z,e,!o))};p.remove(E,L)},u=function(p){i(Ee(p,e,!o))},h={create:!1};o?this.fs.root.getFile(e,h,a,u):this.fs.root.getDirectory(e,h,a,u)},t}(rt);Er.Name="HTML5FS",Er.Options={size:{type:"number",optional:!0,description:"Storage quota to request, in megabytes. Allocated value may be less. Defaults to 5."},type:{type:"number",optional:!0,description:"window.PERSISTENT or window.TEMPORARY. Defaults to PERSISTENT."}};var ce=function(t,r,e,i,o,a){this.id=t,this.size=r,this.mode=e,this.atime=i,this.mtime=o,this.ctime=a};ce.fromBuffer=function(t){if(t===void 0)throw new Error("NO");return new ce(t.toString("ascii",30),t.readUInt32LE(0),t.readUInt16LE(4),t.readDoubleLE(6),t.readDoubleLE(14),t.readDoubleLE(22))},ce.prototype.toStats=function(){return new A((this.mode&61440)===N.DIRECTORY?N.DIRECTORY:N.FILE,this.size,this.mode,new Date(this.atime),new Date(this.mtime),new Date(this.ctime))},ce.prototype.getSize=function(){return 30+this.id.length},ce.prototype.toBuffer=function(t){return t===void 0&&(t=R.alloc(this.getSize())),t.writeUInt32LE(this.size,0),t.writeUInt16LE(this.mode,4),t.writeDoubleLE(this.atime,6),t.writeDoubleLE(this.mtime,14),t.writeDoubleLE(this.ctime,22),t.write(this.id,30,this.id.length,"ascii"),t},ce.prototype.update=function(t){var r=!1;this.size!==t.size&&(this.size=t.size,r=!0),this.mode!==t.mode&&(this.mode=t.mode,r=!0);var e=t.atime.getTime();this.atime!==e&&(this.atime=e,r=!0);var i=t.mtime.getTime();this.mtime!==i&&(this.mtime=i,r=!0);var o=t.ctime.getTime();return this.ctime!==o&&(this.ctime=o,r=!0),r},ce.prototype.isFile=function(){return(this.mode&61440)===N.FILE},ce.prototype.isDirectory=function(){return(this.mode&61440)===N.DIRECTORY};var Te="/",zr=null;function Rn(){return zr||(zr=R.from("{}"))}function Fr(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,r=n==="x"?t:t&3|8;return r.toString(16)})}function pe(n,t){return n?(t(n),!1):!0}function Qt(n,t,r){return n?(t.abort(function(){r(n)}),!1):!0}var be=function(t){this.store=t,this.originalData={},this.modifiedKeys=[]};be.prototype.get=function(t){var r=this.store.get(t);return this.stashOldValue(t,r),r},be.prototype.put=function(t,r,e){return this.markModified(t),this.store.put(t,r,e)},be.prototype.del=function(t){this.markModified(t),this.store.del(t)},be.prototype.commit=function(){},be.prototype.abort=function(){for(var t=this,r=0,e=t.modifiedKeys;r<e.length;r+=1){var i=e[r],o=t.originalData[i];o?t.store.put(i,o,!0):t.store.del(i)}},be.prototype.stashOldValue=function(t,r){this.originalData.hasOwnProperty(t)||(this.originalData[t]=r)},be.prototype.markModified=function(t){this.modifiedKeys.indexOf(t)===-1&&(this.modifiedKeys.push(t),this.originalData.hasOwnProperty(t)||(this.originalData[t]=this.store.get(t)))};var bn=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this.getPath(),this.getBuffer(),this.getStats()),this.resetDirty())},t.prototype.closeSync=function(){this.syncSync()},t}(Yt),On=function(n){function t(r){n.call(this),this.store=r.store,this.makeRootDirectory()}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.getName=function(){return this.store.name()},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.empty=function(){this.store.clear(),this.makeRootDirectory()},t.prototype.renameSync=function(e,i){var o=this.store.beginTransaction("readwrite"),a=d.dirname(e),u=d.basename(e),h=d.dirname(i),p=d.basename(i),E=this.findINode(o,a),L=this.getDirListing(o,a,E);if(!L[u])throw f.ENOENT(e);var z=L[u];if(delete L[u],(h+"/").indexOf(e+"/")===0)throw new f(s.EBUSY,a);var J,tt;if(h===a?(J=E,tt=L):(J=this.findINode(o,h),tt=this.getDirListing(o,h,J)),tt[p]){var ut=this.getINode(o,i,tt[p]);if(ut.isFile())try{o.del(ut.id),o.del(tt[p])}catch(dt){throw o.abort(),dt}else throw f.EPERM(i)}tt[p]=z;try{o.put(E.id,R.from(JSON.stringify(L)),!0),o.put(J.id,R.from(JSON.stringify(tt)),!0)}catch(dt){throw o.abort(),dt}o.commit()},t.prototype.statSync=function(e,i){return this.findINode(this.store.beginTransaction("readonly"),e).toStats()},t.prototype.createFileSync=function(e,i,o){var a=this.store.beginTransaction("readwrite"),u=At(),h=this.commitNewFile(a,e,N.FILE,o,u);return new bn(this,e,i,h.toStats(),u)},t.prototype.openFileSync=function(e,i){var o=this.store.beginTransaction("readonly"),a=this.findINode(o,e),u=o.get(a.id);if(u===void 0)throw f.ENOENT(e);return new bn(this,e,i,a.toStats(),u)},t.prototype.unlinkSync=function(e){this.removeEntry(e,!1)},t.prototype.rmdirSync=function(e){if(this.readdirSync(e).length>0)throw f.ENOTEMPTY(e);this.removeEntry(e,!0)},t.prototype.mkdirSync=function(e,i){var o=this.store.beginTransaction("readwrite"),a=R.from("{}");this.commitNewFile(o,e,N.DIRECTORY,i,a)},t.prototype.readdirSync=function(e){var i=this.store.beginTransaction("readonly");return Object.keys(this.getDirListing(i,e,this.findINode(i,e)))},t.prototype._syncSync=function(e,i,o){var a=this.store.beginTransaction("readwrite"),u=this._findINode(a,d.dirname(e),d.basename(e)),h=this.getINode(a,e,u),p=h.update(o);try{a.put(h.id,i,!0),p&&a.put(u,h.toBuffer(),!0)}catch(E){throw a.abort(),E}a.commit()},t.prototype.makeRootDirectory=function(){var e=this.store.beginTransaction("readwrite");if(e.get(Te)===void 0){var i=new Date().getTime(),o=new ce(Fr(),4096,511|N.DIRECTORY,i,i,i);e.put(o.id,Rn(),!1),e.put(Te,o.toBuffer(),!1),e.commit()}},t.prototype._findINode=function(e,i,o){var a=this,u=function(h){var p=a.getDirListing(e,i,h);if(p[o])return p[o];throw f.ENOENT(d.resolve(i,o))};return i==="/"?o===""?Te:u(this.getINode(e,i,Te)):u(this.getINode(e,i+d.sep+o,this._findINode(e,d.dirname(i),d.basename(i))))},t.prototype.findINode=function(e,i){return this.getINode(e,i,this._findINode(e,d.dirname(i),d.basename(i)))},t.prototype.getINode=function(e,i,o){var a=e.get(o);if(a===void 0)throw f.ENOENT(i);return ce.fromBuffer(a)},t.prototype.getDirListing=function(e,i,o){if(!o.isDirectory())throw f.ENOTDIR(i);var a=e.get(o.id);if(a===void 0)throw f.ENOENT(i);return JSON.parse(a.toString())},t.prototype.addNewNode=function(e,i){for(var o=0,a;o<5;)try{return a=Fr(),e.put(a,i,!1),a}catch{}throw new f(s.EIO,"Unable to commit data to key-value store.")},t.prototype.commitNewFile=function(e,i,o,a,u){var h=d.dirname(i),p=d.basename(i),E=this.findINode(e,h),L=this.getDirListing(e,h,E),z=new Date().getTime();if(i==="/"||L[p])throw f.EEXIST(i);var J;try{var tt=this.addNewNode(e,u);J=new ce(tt,u.length,a|o,z,z,z);var ut=this.addNewNode(e,J.toBuffer());L[p]=ut,e.put(E.id,R.from(JSON.stringify(L)),!0)}catch(dt){throw e.abort(),dt}return e.commit(),J},t.prototype.removeEntry=function(e,i){var o=this.store.beginTransaction("readwrite"),a=d.dirname(e),u=this.findINode(o,a),h=this.getDirListing(o,a,u),p=d.basename(e);if(!h[p])throw f.ENOENT(e);var E=h[p];delete h[p];var L=this.getINode(o,e,E);if(!i&&L.isDirectory())throw f.EISDIR(e);if(i&&!L.isDirectory())throw f.ENOTDIR(e);try{o.del(L.id),o.del(E),o.put(u.id,R.from(JSON.stringify(h)),!0)}catch(z){throw o.abort(),z}o.commit()},t}(_t),Nn=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var i=this;this.isDirty()?this._fs._sync(this.getPath(),this.getBuffer(),this.getStats(),function(o){o||i.resetDirty(),e(o)}):e()},t.prototype.close=function(e){this.sync(e)},t}(Yt),$o=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.init=function(e,i){this.store=e,this.makeRootDirectory(i)},t.prototype.getName=function(){return this.store.name()},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.empty=function(e){var i=this;this.store.clear(function(o){pe(o,e)&&i.makeRootDirectory(e)})},t.prototype.rename=function(e,i,o){var a=this,u=this.store.beginTransaction("readwrite"),h=d.dirname(e),p=d.basename(e),E=d.dirname(i),L=d.basename(i),z={},J={},tt=!1;if((E+"/").indexOf(e+"/")===0)return o(new f(s.EBUSY,h));var ut=function(){if(!(tt||!J.hasOwnProperty(h)||!J.hasOwnProperty(E))){var Ft=J[h],Ht=z[h],ie=J[E],xe=z[E];if(!Ft[p])o(f.ENOENT(e));else{var ke=Ft[p];delete Ft[p];var rr=function(){ie[L]=ke,u.put(Ht.id,R.from(JSON.stringify(Ft)),!0,function(Le){Qt(Le,u,o)&&(h===E?u.commit(o):u.put(xe.id,R.from(JSON.stringify(ie)),!0,function(De){Qt(De,u,o)&&u.commit(o)}))})};ie[L]?a.getINode(u,i,ie[L],function(Le,De){Qt(Le,u,o)&&(De.isFile()?u.del(De.id,function(mi){Qt(mi,u,o)&&u.del(ie[L],function(Ra){Qt(Ra,u,o)&&rr()})}):u.abort(function(mi){o(f.EPERM(i))}))}):rr()}}},dt=function(Ft){a.findINodeAndDirListing(u,Ft,function(Ht,ie,xe){Ht?tt||(tt=!0,u.abort(function(){o(Ht)})):(z[Ft]=ie,J[Ft]=xe,ut())})};dt(h),h!==E&&dt(E)},t.prototype.stat=function(e,i,o){var a=this.store.beginTransaction("readonly");this.findINode(a,e,function(u,h){pe(u,o)&&o(null,h.toStats())})},t.prototype.createFile=function(e,i,o,a){var u=this,h=this.store.beginTransaction("readwrite"),p=At();this.commitNewFile(h,e,N.FILE,o,p,function(E,L){pe(E,a)&&a(null,new Nn(u,e,i,L.toStats(),p))})},t.prototype.openFile=function(e,i,o){var a=this,u=this.store.beginTransaction("readonly");this.findINode(u,e,function(h,p){pe(h,o)&&u.get(p.id,function(E,L){pe(E,o)&&(L===void 0?o(f.ENOENT(e)):o(null,new Nn(a,e,i,p.toStats(),L)))})})},t.prototype.unlink=function(e,i){this.removeEntry(e,!1,i)},t.prototype.rmdir=function(e,i){var o=this;this.readdir(e,function(a,u){a?i(a):u.length>0?i(f.ENOTEMPTY(e)):o.removeEntry(e,!0,i)})},t.prototype.mkdir=function(e,i,o){var a=this.store.beginTransaction("readwrite"),u=R.from("{}");this.commitNewFile(a,e,N.DIRECTORY,i,u,o)},t.prototype.readdir=function(e,i){var o=this,a=this.store.beginTransaction("readonly");this.findINode(a,e,function(u,h){pe(u,i)&&o.getDirListing(a,e,h,function(p,E){pe(p,i)&&i(null,Object.keys(E))})})},t.prototype._sync=function(e,i,o,a){var u=this,h=this.store.beginTransaction("readwrite");this._findINode(h,d.dirname(e),d.basename(e),function(p,E){Qt(p,h,a)&&u.getINode(h,e,E,function(L,z){if(Qt(L,h,a)){var J=z.update(o);h.put(z.id,i,!0,function(tt){Qt(tt,h,a)&&(J?h.put(E,z.toBuffer(),!0,function(ut){Qt(ut,h,a)&&h.commit(a)}):h.commit(a))})}})})},t.prototype.makeRootDirectory=function(e){var i=this.store.beginTransaction("readwrite");i.get(Te,function(o,a){if(o||a===void 0){var u=new Date().getTime(),h=new ce(Fr(),4096,511|N.DIRECTORY,u,u,u);i.put(h.id,Rn(),!1,function(p){Qt(p,i,e)&&i.put(Te,h.toBuffer(),!1,function(E){E?i.abort(function(){e(E)}):i.commit(e)})})}else i.commit(e)})},t.prototype._findINode=function(e,i,o,a){var u=this,h=function(p,E,L){p?a(p):L[o]?a(null,L[o]):a(f.ENOENT(d.resolve(i,o)))};i==="/"?o===""?a(null,Te):this.getINode(e,i,Te,function(p,E){pe(p,a)&&u.getDirListing(e,i,E,function(L,z){h(L,E,z)})}):this.findINodeAndDirListing(e,i,h)},t.prototype.findINode=function(e,i,o){var a=this;this._findINode(e,d.dirname(i),d.basename(i),function(u,h){pe(u,o)&&a.getINode(e,i,h,o)})},t.prototype.getINode=function(e,i,o,a){e.get(o,function(u,h){pe(u,a)&&(h===void 0?a(f.ENOENT(i)):a(null,ce.fromBuffer(h)))})},t.prototype.getDirListing=function(e,i,o,a){o.isDirectory()?e.get(o.id,function(u,h){if(pe(u,a))try{a(null,JSON.parse(h.toString()))}catch{a(f.ENOENT(i))}}):a(f.ENOTDIR(i))},t.prototype.findINodeAndDirListing=function(e,i,o){var a=this;this.findINode(e,i,function(u,h){pe(u,o)&&a.getDirListing(e,i,h,function(p,E){pe(p,o)&&o(null,h,E)})})},t.prototype.addNewNode=function(e,i,o){var a=0,u,h=function(){++a===5?o(new f(s.EIO,"Unable to commit data to key-value store.")):(u=Fr(),e.put(u,i,!1,function(p,E){p||!E?h():o(null,u)}))};h()},t.prototype.commitNewFile=function(e,i,o,a,u,h){var p=this,E=d.dirname(i),L=d.basename(i),z=new Date().getTime();if(i==="/")return h(f.EEXIST(i));this.findINodeAndDirListing(e,E,function(J,tt,ut){Qt(J,e,h)&&(ut[L]?e.abort(function(){h(f.EEXIST(i))}):p.addNewNode(e,u,function(dt,Ft){if(Qt(dt,e,h)){var Ht=new ce(Ft,u.length,a|o,z,z,z);p.addNewNode(e,Ht.toBuffer(),function(ie,xe){Qt(ie,e,h)&&(ut[L]=xe,e.put(tt.id,R.from(JSON.stringify(ut)),!0,function(ke){Qt(ke,e,h)&&e.commit(function(rr){Qt(rr,e,h)&&h(null,Ht)})}))})}}))})},t.prototype.removeEntry=function(e,i,o){var a=this,u=this.store.beginTransaction("readwrite"),h=d.dirname(e),p=d.basename(e);this.findINodeAndDirListing(u,h,function(E,L,z){if(Qt(E,u,o))if(!z[p])u.abort(function(){o(f.ENOENT(e))});else{var J=z[p];delete z[p],a.getINode(u,e,J,function(tt,ut){Qt(tt,u,o)&&(!i&&ut.isDirectory()?u.abort(function(){o(f.EISDIR(e))}):i&&!ut.isDirectory()?u.abort(function(){o(f.ENOTDIR(e))}):u.del(ut.id,function(dt){Qt(dt,u,o)&&u.del(J,function(Ft){Qt(Ft,u,o)&&u.put(L.id,R.from(JSON.stringify(z)),!0,function(Ht){Qt(Ht,u,o)&&u.commit(o)})})}))})}})},t}(rt),Be=function(){this.store={}};Be.prototype.name=function(){return Ke.Name},Be.prototype.clear=function(){this.store={}},Be.prototype.beginTransaction=function(t){return new be(this)},Be.prototype.get=function(t){return this.store[t]},Be.prototype.put=function(t,r,e){return!e&&this.store.hasOwnProperty(t)?!1:(this.store[t]=r,!0)},Be.prototype.del=function(t){delete this.store[t]};var Ke=function(n){function t(){n.call(this,{store:new Be})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t)},t}(On);Ke.Name="InMemory",Ke.Options={};var jr=Kt.indexedDB||Kt.mozIndexedDB||Kt.webkitIndexedDB||Kt.msIndexedDB;function nr(n,t){switch(t===void 0&&(t=n.toString()),n.name){case"NotFoundError":return new f(s.ENOENT,t);case"QuotaExceededError":return new f(s.ENOSPC,t);default:return new f(s.EIO,t)}}function ir(n,t,r){return t===void 0&&(t=s.EIO),r===void 0&&(r=null),function(e){e.preventDefault(),n(new f(t,r!==null?r:void 0))}}var Wr=function(t,r){this.tx=t,this.store=r};Wr.prototype.get=function(t,r){try{var e=this.store.get(t);e.onerror=ir(r),e.onsuccess=function(i){var o=i.target.result;o===void 0?r(null,o):r(null,Et(o))}}catch(i){r(nr(i))}};var ta=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.put=function(e,i,o,a){try{var u=G(i),h;o?h=this.store.put(u,e):h=this.store.add(u,e),h.onerror=ir(a),h.onsuccess=function(p){a(null,!0)}}catch(p){a(nr(p))}},t.prototype.del=function(e,i){try{var o=this.store.delete(e);o.onerror=ir(i),o.onsuccess=function(a){i()}}catch(a){i(nr(a))}},t.prototype.commit=function(e){setTimeout(e,0)},t.prototype.abort=function(e){var i=null;try{this.tx.abort()}catch(o){i=nr(o)}finally{e(i)}},t}(Wr),Ir=function(t,r){var e=this;r===void 0&&(r="browserfs"),this.storeName=r;var i=jr.open(this.storeName,1);i.onupgradeneeded=function(o){var a=o.target.result;a.objectStoreNames.contains(e.storeName)&&a.deleteObjectStore(e.storeName),a.createObjectStore(e.storeName)},i.onsuccess=function(o){e.db=o.target.result,t(null,e)},i.onerror=ir(t,s.EACCES)};Ir.prototype.name=function(){return or.Name+" - "+this.storeName},Ir.prototype.clear=function(t){try{var r=this.db.transaction(this.storeName,"readwrite"),e=r.objectStore(this.storeName),i=e.clear();i.onsuccess=function(o){setTimeout(t,0)},i.onerror=ir(t)}catch(o){t(nr(o))}},Ir.prototype.beginTransaction=function(t){t===void 0&&(t="readonly");var r=this.db.transaction(this.storeName,t),e=r.objectStore(this.storeName);if(t==="readwrite")return new ta(r,e);if(t==="readonly")return new Wr(r,e);throw new f(s.EINVAL,"Invalid transaction type.")};var or=function(n){function t(r,e,i){var o=this;i===void 0&&(i=!0),n.call(this),this.store=new Ir(function(a){a?r(a):o.init(o.store,function(u){r(u,o)})},e),kt(i,t.Name,{storeName:e})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){new t(i,e.storeName,!1)},t.isAvailable=function(){try{return typeof jr<"u"&&jr.open("__browserfs_test__")!==null}catch{return!1}},t}($o);or.Name="IndexedDB",or.Options={storeName:{type:"string",optional:!0,description:"The name of this file system. You can have multiple IndexedDB file systems operating at once, but each must have a different name."}};var Hr=!1,ar;try{Kt.localStorage.setItem("__test__",String.fromCharCode(55296)),Hr=Kt.localStorage.getItem("__test__")===String.fromCharCode(55296)}catch{Hr=!1}ar=Hr?"binary_string":"binary_string_ie",R.isEncoding(ar)||(ar="base64");var ze=function(){};ze.prototype.name=function(){return sr.Name},ze.prototype.clear=function(){Kt.localStorage.clear()},ze.prototype.beginTransaction=function(t){return new be(this)},ze.prototype.get=function(t){try{var r=Kt.localStorage.getItem(t);if(r!==null)return R.from(r,ar)}catch{}},ze.prototype.put=function(t,r,e){try{return!e&&Kt.localStorage.getItem(t)!==null?!1:(Kt.localStorage.setItem(t,r.toString(ar)),!0)}catch{throw new f(s.ENOSPC,"LocalStorage is full.")}},ze.prototype.del=function(t){try{Kt.localStorage.removeItem(t)}catch(r){throw new f(s.EIO,"Unable to delete key "+t+": "+r)}};var sr=function(n){function t(){n.call(this,{store:new ze})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t)},t.isAvailable=function(){return typeof Kt.localStorage<"u"},t}(On);sr.Name="LocalStorage",sr.Options={};var Je=function(n){function t(){n.call(this),this.mountList=[],this.mntMap={},this.rootFs=new Ke}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){var o=new t;Object.keys(e).forEach(function(a){o.mount(a,e[a])}),i(null,o)},t.isAvailable=function(){return!0},t.prototype.mount=function(e,i){if(e[0]!=="/"&&(e="/"+e),e=d.resolve(e),this.mntMap[e])throw new f(s.EINVAL,"Mount point "+e+" is already taken.");P(e,511,this.rootFs),this.mntMap[e]=i,this.mountList.push(e),this.mountList=this.mountList.sort(function(o,a){return a.length-o.length})},t.prototype.umount=function(e){var i=this;if(e[0]!=="/"&&(e="/"+e),e=d.resolve(e),!this.mntMap[e])throw new f(s.EINVAL,"Mount point "+e+" is already unmounted.");for(delete this.mntMap[e],this.mountList.splice(this.mountList.indexOf(e),1);e!=="/"&&i.rootFs.readdirSync(e).length===0;)i.rootFs.rmdirSync(e),e=d.dirname(e)},t.prototype._getFs=function(e){for(var i=this,o=this.mountList,a=o.length,u=0;u<a;u++){var h=o[u];if(h.length<=e.length&&e.indexOf(h)===0)return e=e.substr(h.length>1?h.length:0),e===""&&(e="/"),{fs:i.mntMap[h],path:e}}return{fs:this.rootFs,path:e}},t.prototype.getName=function(){return t.Name},t.prototype.diskSpace=function(e,i){i(0,0)},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.standardizeError=function(e,i,o){var a=e.message.indexOf(i);return a!==-1&&(e.message=e.message.substr(0,a)+o+e.message.substr(a+i.length),e.path=o),e},t.prototype.rename=function(e,i,o){var a=this,u=this._getFs(e),h=this._getFs(i);return u.fs===h.fs?u.fs.rename(u.path,h.path,function(p){p&&a.standardizeError(a.standardizeError(p,u.path,e),h.path,i),o(p)}):ft.readFile(e,function(p,E){if(p)return o(p);ft.writeFile(i,E,function(L){if(L)return o(L);ft.unlink(e,o)})})},t.prototype.renameSync=function(e,i){var o=this._getFs(e),a=this._getFs(i);if(o.fs===a.fs)try{return o.fs.renameSync(o.path,a.path)}catch(h){throw this.standardizeError(this.standardizeError(h,o.path,e),a.path,i),h}var u=ft.readFileSync(e);return ft.writeFileSync(i,u),ft.unlinkSync(e)},t.prototype.readdirSync=function(e){var i=this._getFs(e),o=null;if(i.fs!==this.rootFs)try{o=this.rootFs.readdirSync(e)}catch{}try{var a=i.fs.readdirSync(i.path);return o===null?a:a.concat(o.filter(function(u){return a.indexOf(u)===-1}))}catch(u){if(o===null)throw this.standardizeError(u,i.path,e);return o}},t.prototype.readdir=function(e,i){var o=this,a=this._getFs(e);a.fs.readdir(a.path,function(u,h){if(a.fs!==o.rootFs)try{var p=o.rootFs.readdirSync(e);h?h=h.concat(p.filter(function(E){return h.indexOf(E)===-1})):h=p}catch{if(u)return i(o.standardizeError(u,a.path,e))}else if(u)return i(o.standardizeError(u,a.path,e));i(null,h)})},t.prototype.rmdirSync=function(e){var i=this._getFs(e);if(this._containsMountPt(e))throw f.ENOTEMPTY(e);try{i.fs.rmdirSync(i.path)}catch(o){throw this.standardizeError(o,i.path,e)}},t.prototype.rmdir=function(e,i){var o=this,a=this._getFs(e);this._containsMountPt(e)?i(f.ENOTEMPTY(e)):a.fs.rmdir(a.path,function(u){i(u?o.standardizeError(u,a.path,e):null)})},t.prototype._containsMountPt=function(e){for(var i=this.mountList,o=i.length,a=0;a<o;a++){var u=i[a];if(u.length>=e.length&&u.slice(0,e.length)===e)return!0}return!1},t}(rt);Je.Name="MountableFileSystem",Je.Options={};function Ln(n,t,r){return t?function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];var o=e[0],a=this._getFs(o);e[0]=a.path;try{return a.fs[n].apply(a.fs,e)}catch(u){throw this.standardizeError(u,a.path,o),u}}:function(){for(var e=this,i=[],o=arguments.length;o--;)i[o]=arguments[o];var a=i[0],u=this._getFs(a);if(i[0]=u.path,typeof i[i.length-1]=="function"){var h=i[i.length-1];i[i.length-1]=function(){for(var p=[],E=arguments.length;E--;)p[E]=arguments[E];p.length>0&&p[0]instanceof f&&e.standardizeError(p[0],u.path,a),h.apply(null,p)}}return u.fs[n].apply(u.fs,i)}}for(var Dn=[["exists","unlink","readlink"],["stat","mkdir","realpath","truncate"],["open","readFile","chmod","utimes"],["chown"],["writeFile","appendFile"]],ur=0;ur<Dn.length;ur++)for(var ea=Dn[ur],Zr=0,Tn=ea;Zr<Tn.length;Zr+=1){var xr=Tn[Zr];Je.prototype[xr]=Ln(xr,!1,ur+1),Je.prototype[xr+"Sync"]=Ln(xr+"Sync",!0,ur+1)}var fr;if(typeof setImmediate<"u")fr=setImmediate;else{var ge=Kt,Qe=[],An="zero-timeout-message",ra=function(){if(typeof ge.importScripts<"u"||!ge.postMessage)return!1;var n=!0,t=ge.onmessage;return ge.onmessage=function(){n=!1},ge.postMessage("","*"),ge.onmessage=t,n};if(ra()){fr=function(n){Qe.push(n),ge.postMessage(An,"*")};var Cn=function(n){if(n.source===self&&n.data===An&&(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0,Qe.length>0)){var t=Qe.shift();return t()}};ge.addEventListener?ge.addEventListener("message",Cn,!0):ge.attachEvent("onmessage",Cn)}else if(ge.MessageChannel){var Mn=new ge.MessageChannel;Mn.port1.onmessage=function(n){if(Qe.length>0)return Qe.shift()()},fr=function(n){Qe.push(n),Mn.port2.postMessage("")}}else fr=function(n){return setTimeout(n,0)}}var Vr=fr,cr=function(){this._locked=!1,this._waiters=[]};cr.prototype.lock=function(t){if(this._locked){this._waiters.push(t);return}this._locked=!0,t()},cr.prototype.unlock=function(){if(!this._locked)throw new Error("unlock of a non-locked mutex");var t=this._waiters.shift();if(t){Vr(t);return}this._locked=!1},cr.prototype.tryLock=function(){return this._locked?!1:(this._locked=!0,!0)},cr.prototype.isLocked=function(){return this._locked};var gt=function(t){this._fs=t,this._mu=new cr};gt.prototype.getName=function(){return"LockedFS<"+this._fs.getName()+">"},gt.prototype.getFSUnlocked=function(){return this._fs},gt.prototype.initialize=function(t){this._fs.initialize(t)},gt.prototype.diskSpace=function(t,r){this._fs.diskSpace(t,r)},gt.prototype.isReadOnly=function(){return this._fs.isReadOnly()},gt.prototype.supportsLinks=function(){return this._fs.supportsLinks()},gt.prototype.supportsProps=function(){return this._fs.supportsProps()},gt.prototype.supportsSynch=function(){return this._fs.supportsSynch()},gt.prototype.rename=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.rename(t,r,function(o){i._mu.unlock(),e(o)})})},gt.prototype.renameSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.renameSync(t,r)},gt.prototype.stat=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.stat(t,r,function(o,a){i._mu.unlock(),e(o,a)})})},gt.prototype.statSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.statSync(t,r)},gt.prototype.open=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.open(t,r,e,function(a,u){o._mu.unlock(),i(a,u)})})},gt.prototype.openSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.openSync(t,r,e)},gt.prototype.unlink=function(t,r){var e=this;this._mu.lock(function(){e._fs.unlink(t,function(i){e._mu.unlock(),r(i)})})},gt.prototype.unlinkSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.unlinkSync(t)},gt.prototype.rmdir=function(t,r){var e=this;this._mu.lock(function(){e._fs.rmdir(t,function(i){e._mu.unlock(),r(i)})})},gt.prototype.rmdirSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.rmdirSync(t)},gt.prototype.mkdir=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.mkdir(t,r,function(o){i._mu.unlock(),e(o)})})},gt.prototype.mkdirSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.mkdirSync(t,r)},gt.prototype.readdir=function(t,r){var e=this;this._mu.lock(function(){e._fs.readdir(t,function(i,o){e._mu.unlock(),r(i,o)})})},gt.prototype.readdirSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readdirSync(t)},gt.prototype.exists=function(t,r){var e=this;this._mu.lock(function(){e._fs.exists(t,function(i){e._mu.unlock(),r(i)})})},gt.prototype.existsSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.existsSync(t)},gt.prototype.realpath=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.realpath(t,r,function(o,a){i._mu.unlock(),e(o,a)})})},gt.prototype.realpathSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.realpathSync(t,r)},gt.prototype.truncate=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.truncate(t,r,function(o){i._mu.unlock(),e(o)})})},gt.prototype.truncateSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.truncateSync(t,r)},gt.prototype.readFile=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.readFile(t,r,e,function(a,u){o._mu.unlock(),i(a,u)})})},gt.prototype.readFileSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readFileSync(t,r,e)},gt.prototype.writeFile=function(t,r,e,i,o,a){var u=this;this._mu.lock(function(){u._fs.writeFile(t,r,e,i,o,function(h){u._mu.unlock(),a(h)})})},gt.prototype.writeFileSync=function(t,r,e,i,o){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.writeFileSync(t,r,e,i,o)},gt.prototype.appendFile=function(t,r,e,i,o,a){var u=this;this._mu.lock(function(){u._fs.appendFile(t,r,e,i,o,function(h){u._mu.unlock(),a(h)})})},gt.prototype.appendFileSync=function(t,r,e,i,o){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.appendFileSync(t,r,e,i,o)},gt.prototype.chmod=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.chmod(t,r,e,function(a){o._mu.unlock(),i(a)})})},gt.prototype.chmodSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chmodSync(t,r,e)},gt.prototype.chown=function(t,r,e,i,o){var a=this;this._mu.lock(function(){a._fs.chown(t,r,e,i,function(u){a._mu.unlock(),o(u)})})},gt.prototype.chownSync=function(t,r,e,i){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chownSync(t,r,e,i)},gt.prototype.utimes=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.utimes(t,r,e,function(a){o._mu.unlock(),i(a)})})},gt.prototype.utimesSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.utimesSync(t,r,e)},gt.prototype.link=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.link(t,r,function(o){i._mu.unlock(),e(o)})})},gt.prototype.linkSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.linkSync(t,r)},gt.prototype.symlink=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.symlink(t,r,e,function(a){o._mu.unlock(),i(a)})})},gt.prototype.symlinkSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.symlinkSync(t,r,e)},gt.prototype.readlink=function(t,r){var e=this;this._mu.lock(function(){e._fs.readlink(t,function(i,o){e._mu.unlock(),r(i,o)})})},gt.prototype.readlinkSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readlinkSync(t)};var Oe="/.deletedFiles.log";function Un(n){return 146|n}function de(n){return m.getFileFlag(n)}var Pn=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var i=this;if(!this.isDirty()){e(null);return}this._fs._syncAsync(this,function(o){i.resetDirty(),e(o)})},t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},t.prototype.close=function(e){this.sync(e)},t.prototype.closeSync=function(){this.syncSync()},t}(Yt),Bn=function(n){function t(r,e){if(n.call(this),this._isInitialized=!1,this._initializeCallbacks=[],this._deletedFiles={},this._deleteLog="",this._deleteLogUpdatePending=!1,this._deleteLogUpdateNeeded=!1,this._deleteLogError=null,this._writable=r,this._readable=e,this._writable.isReadOnly())throw new f(s.EINVAL,"Writable file system must be writable.")}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.getOverlayedFileSystems=function(){return{readable:this._readable,writable:this._writable}},t.prototype._syncAsync=function(e,i){var o=this;this.createParentDirectoriesAsync(e.getPath(),function(a){if(a)return i(a);o._writable.writeFile(e.getPath(),e.getBuffer(),null,de("w"),e.getStats().mode,i)})},t.prototype._syncSync=function(e){this.createParentDirectories(e.getPath()),this._writable.writeFileSync(e.getPath(),e.getBuffer(),null,de("w"),e.getStats().mode)},t.prototype.getName=function(){return lr.Name},t.prototype.initialize=function(e){var i=this,o=this._initializeCallbacks,a=function(u){i._isInitialized=!u,i._initializeCallbacks=[],o.forEach(function(h){return h(u)})};if(this._isInitialized)return e();o.push(e),o.length===1&&this._writable.readFile(Oe,"utf8",de("r"),function(u,h){if(u){if(u.errno!==s.ENOENT)return a(u)}else i._deleteLog=h;i._reparseDeletionLog(),a()})},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSynch=function(){return this._readable.supportsSynch()&&this._writable.supportsSynch()},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return this._readable.supportsProps()&&this._writable.supportsProps()},t.prototype.getDeletionLog=function(){return this._deleteLog},t.prototype.restoreDeletionLog=function(e){this._deleteLog=e,this._reparseDeletionLog(),this.updateLog("")},t.prototype.rename=function(e,i,o){var a=this;if(!(!this.checkInitAsync(o)||this.checkPathAsync(e,o)||this.checkPathAsync(i,o))){if(e===Oe||i===Oe)return o(f.EPERM("Cannot rename deletion log."));if(e===i)return o();this.stat(e,!1,function(u,h){return u?o(u):a.stat(i,!1,function(p,E){var L=a;function z(tt){var ut=tt.shift();if(!ut)return o();var dt=d.resolve(e,ut),Ft=d.resolve(i,ut);L.rename(dt,Ft,function(Ht){if(Ht)return o(Ht);z(tt)})}var J=511;if(h.isDirectory()){if(p)return p.errno!==s.ENOENT?o(p):a._writable.exists(e,function(tt){if(tt)return a._writable.rename(e,i,o);a._writable.mkdir(i,J,function(ut){if(ut)return o(ut);a._readable.readdir(e,function(dt,Ft){if(dt)return o();z(Ft)})})});if(J=E.mode,!E.isDirectory())return o(f.ENOTDIR(i));a.readdir(i,function(tt,ut){if(ut&&ut.length)return o(f.ENOTEMPTY(i));a._readable.readdir(e,function(dt,Ft){if(dt)return o();z(Ft)})})}if(E&&E.isDirectory())return o(f.EISDIR(i));a.readFile(e,null,de("r"),function(tt,ut){return tt?o(tt):a.writeFile(i,ut,null,de("w"),h.mode,function(dt){return dt?o(dt):a.unlink(e,o)})})})})}},t.prototype.renameSync=function(e,i){var o=this;if(this.checkInitialized(),this.checkPath(e),this.checkPath(i),e===Oe||i===Oe)throw f.EPERM("Cannot rename deletion log.");var a=this.statSync(e,!1);if(a.isDirectory()){if(e===i)return;var u=511;if(this.existsSync(i)){var h=this.statSync(i,!1);if(u=h.mode,h.isDirectory()){if(this.readdirSync(i).length>0)throw f.ENOTEMPTY(i)}else throw f.ENOTDIR(i)}this._writable.existsSync(e)?this._writable.renameSync(e,i):this._writable.existsSync(i)||this._writable.mkdirSync(i,u),this._readable.existsSync(e)&&this._readable.readdirSync(e).forEach(function(p){o.renameSync(d.resolve(e,p),d.resolve(i,p))})}else{if(this.existsSync(i)&&this.statSync(i,!1).isDirectory())throw f.EISDIR(i);this.writeFileSync(i,this.readFileSync(e,null,de("r")),null,de("w"),a.mode)}e!==i&&this.existsSync(e)&&this.unlinkSync(e)},t.prototype.stat=function(e,i,o){var a=this;!this.checkInitAsync(o)||this._writable.stat(e,i,function(u,h){u&&u.errno===s.ENOENT?(a._deletedFiles[e]&&o(f.ENOENT(e)),a._readable.stat(e,i,function(p,E){E&&(E=E.clone(),E.mode=Un(E.mode)),o(p,E)})):o(u,h)})},t.prototype.statSync=function(e,i){this.checkInitialized();try{return this._writable.statSync(e,i)}catch{if(this._deletedFiles[e])throw f.ENOENT(e);var o=this._readable.statSync(e,i).clone();return o.mode=Un(o.mode),o}},t.prototype.open=function(e,i,o,a){var u=this;!this.checkInitAsync(a)||this.checkPathAsync(e,a)||this.stat(e,!1,function(h,p){if(p)switch(i.pathExistsAction()){case b.TRUNCATE_FILE:return u.createParentDirectoriesAsync(e,function(E){if(E)return a(E);u._writable.open(e,i,o,a)});case b.NOP:return u._writable.exists(e,function(E){E?u._writable.open(e,i,o,a):(p=p.clone(),p.mode=o,u._readable.readFile(e,null,de("r"),function(L,z){if(L)return a(L);p.size===-1&&(p.size=z.length);var J=new Pn(u,e,i,p,z);a(null,J)}))});default:return a(f.EEXIST(e))}else switch(i.pathNotExistsAction()){case b.CREATE_FILE:return u.createParentDirectoriesAsync(e,function(E){return E?a(E):u._writable.open(e,i,o,a)});default:return a(f.ENOENT(e))}})},t.prototype.openSync=function(e,i,o){if(this.checkInitialized(),this.checkPath(e),e===Oe)throw f.EPERM("Cannot open deletion log.");if(this.existsSync(e))switch(i.pathExistsAction()){case b.TRUNCATE_FILE:return this.createParentDirectories(e),this._writable.openSync(e,i,o);case b.NOP:if(this._writable.existsSync(e))return this._writable.openSync(e,i,o);var a=this._readable.readFileSync(e,null,de("r")),u=this._readable.statSync(e,!1).clone();return u.mode=o,new Pn(this,e,i,u,a);default:throw f.EEXIST(e)}else switch(i.pathNotExistsAction()){case b.CREATE_FILE:return this.createParentDirectories(e),this._writable.openSync(e,i,o);default:throw f.ENOENT(e)}},t.prototype.unlink=function(e,i){var o=this;!this.checkInitAsync(i)||this.checkPathAsync(e,i)||this.exists(e,function(a){if(!a)return i(f.ENOENT(e));o._writable.exists(e,function(u){if(u)return o._writable.unlink(e,function(h){if(h)return i(h);o.exists(e,function(p){p&&o.deletePath(e),i(null)})});o.deletePath(e),i(null)})})},t.prototype.unlinkSync=function(e){if(this.checkInitialized(),this.checkPath(e),this.existsSync(e))this._writable.existsSync(e)&&this._writable.unlinkSync(e),this.existsSync(e)&&this.deletePath(e);else throw f.ENOENT(e)},t.prototype.rmdir=function(e,i){var o=this;if(!!this.checkInitAsync(i)){var a=function(){o.readdir(e,function(u,h){if(u)return i(u);if(h.length)return i(f.ENOTEMPTY(e));o.deletePath(e),i(null)})};this.exists(e,function(u){if(!u)return i(f.ENOENT(e));o._writable.exists(e,function(h){h?o._writable.rmdir(e,function(p){if(p)return i(p);o._readable.exists(e,function(E){E?a():i()})}):a()})})}},t.prototype.rmdirSync=function(e){if(this.checkInitialized(),this.existsSync(e)){if(this._writable.existsSync(e)&&this._writable.rmdirSync(e),this.existsSync(e)){if(this.readdirSync(e).length>0)throw f.ENOTEMPTY(e);this.deletePath(e)}}else throw f.ENOENT(e)},t.prototype.mkdir=function(e,i,o){var a=this;!this.checkInitAsync(o)||this.exists(e,function(u){if(u)return o(f.EEXIST(e));a.createParentDirectoriesAsync(e,function(h){if(h)return o(h);a._writable.mkdir(e,i,o)})})},t.prototype.mkdirSync=function(e,i){if(this.checkInitialized(),this.existsSync(e))throw f.EEXIST(e);this.createParentDirectories(e),this._writable.mkdirSync(e,i)},t.prototype.readdir=function(e,i){var o=this;!this.checkInitAsync(i)||this.stat(e,!1,function(a,u){if(a)return i(a);if(!u.isDirectory())return i(f.ENOTDIR(e));o._writable.readdir(e,function(h,p){if(h&&h.code!=="ENOENT")return i(h);(h||!p)&&(p=[]),o._readable.readdir(e,function(E,L){(E||!L)&&(L=[]);var z={},J=p.concat(L.filter(function(tt){return!o._deletedFiles[e+"/"+tt]})).filter(function(tt){var ut=!z[tt];return z[tt]=!0,ut});i(null,J)})})})},t.prototype.readdirSync=function(e){var i=this;this.checkInitialized();var o=this.statSync(e,!1);if(!o.isDirectory())throw f.ENOTDIR(e);var a=[];try{a=a.concat(this._writable.readdirSync(e))}catch{}try{a=a.concat(this._readable.readdirSync(e).filter(function(h){return!i._deletedFiles[e+"/"+h]}))}catch{}var u={};return a.filter(function(h){var p=!u[h];return u[h]=!0,p})},t.prototype.exists=function(e,i){var o=this;this.checkInitialized(),this._writable.exists(e,function(a){if(a)return i(!0);o._readable.exists(e,function(u){i(u&&o._deletedFiles[e]!==!0)})})},t.prototype.existsSync=function(e){return this.checkInitialized(),this._writable.existsSync(e)||this._readable.existsSync(e)&&this._deletedFiles[e]!==!0},t.prototype.chmod=function(e,i,o,a){var u=this;!this.checkInitAsync(a)||this.operateOnWritableAsync(e,function(h){if(h)return a(h);u._writable.chmod(e,i,o,a)})},t.prototype.chmodSync=function(e,i,o){var a=this;this.checkInitialized(),this.operateOnWritable(e,function(){a._writable.chmodSync(e,i,o)})},t.prototype.chown=function(e,i,o,a,u){var h=this;!this.checkInitAsync(u)||this.operateOnWritableAsync(e,function(p){if(p)return u(p);h._writable.chown(e,i,o,a,u)})},t.prototype.chownSync=function(e,i,o,a){var u=this;this.checkInitialized(),this.operateOnWritable(e,function(){u._writable.chownSync(e,i,o,a)})},t.prototype.utimes=function(e,i,o,a){var u=this;!this.checkInitAsync(a)||this.operateOnWritableAsync(e,function(h){if(h)return a(h);u._writable.utimes(e,i,o,a)})},t.prototype.utimesSync=function(e,i,o){var a=this;this.checkInitialized(),this.operateOnWritable(e,function(){a._writable.utimesSync(e,i,o)})},t.prototype.deletePath=function(e){this._deletedFiles[e]=!0,this.updateLog("d"+e+`
`)},t.prototype.updateLog=function(e){var i=this;this._deleteLog+=e,this._deleteLogUpdatePending?this._deleteLogUpdateNeeded=!0:(this._deleteLogUpdatePending=!0,this._writable.writeFile(Oe,this._deleteLog,"utf8",m.getFileFlag("w"),420,function(o){i._deleteLogUpdatePending=!1,o?i._deleteLogError=o:i._deleteLogUpdateNeeded&&(i._deleteLogUpdateNeeded=!1,i.updateLog(""))}))},t.prototype._reparseDeletionLog=function(){var e=this;this._deletedFiles={},this._deleteLog.split(`
`).forEach(function(i){e._deletedFiles[i.slice(1)]=i.slice(0,1)==="d"})},t.prototype.checkInitialized=function(){if(this._isInitialized){if(this._deleteLogError!==null){var e=this._deleteLogError;throw this._deleteLogError=null,e}}else throw new f(s.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")},t.prototype.checkInitAsync=function(e){if(this._isInitialized){if(this._deleteLogError!==null){var i=this._deleteLogError;return this._deleteLogError=null,e(i),!1}}else return e(new f(s.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")),!1;return!0},t.prototype.checkPath=function(e){if(e===Oe)throw f.EPERM(e)},t.prototype.checkPathAsync=function(e,i){return e===Oe?(i(f.EPERM(e)),!0):!1},t.prototype.createParentDirectoriesAsync=function(e,i){var o=d.dirname(e),a=[],u=this;this._writable.stat(o,!1,h);function h(E,L){E?(a.push(o),o=d.dirname(o),u._writable.stat(o,!1,h)):p()}function p(){if(!a.length)return i();var E=a.pop();u._readable.stat(E,!1,function(L,z){if(!z)return i();u._writable.mkdir(E,z.mode,function(J){if(J)return i(J);p()})})}},t.prototype.createParentDirectories=function(e){for(var i=this,o=d.dirname(e),a=[];!this._writable.existsSync(o);)a.push(o),o=d.dirname(o);a=a.reverse(),a.forEach(function(u){i._writable.mkdirSync(u,i.statSync(u,!1).mode)})},t.prototype.operateOnWritable=function(e,i){if(this.existsSync(e))this._writable.existsSync(e)||this.copyToWritable(e),i();else throw f.ENOENT(e)},t.prototype.operateOnWritableAsync=function(e,i){var o=this;this.exists(e,function(a){if(!a)return i(f.ENOENT(e));o._writable.exists(e,function(u){if(u)i();else return o.copyToWritableAsync(e,i)})})},t.prototype.copyToWritable=function(e){var i=this.statSync(e,!1);i.isDirectory()?this._writable.mkdirSync(e,i.mode):this.writeFileSync(e,this._readable.readFileSync(e,null,de("r")),null,de("w"),this.statSync(e,!1).mode)},t.prototype.copyToWritableAsync=function(e,i){var o=this;this.stat(e,!1,function(a,u){if(a)return i(a);if(u.isDirectory())return o._writable.mkdir(e,u.mode,i);o._readable.readFile(e,null,de("r"),function(h,p){if(h)return i(h);o.writeFile(e,p,null,de("w"),u.mode,i)})})},t}(rt),lr=function(n){function t(r,e,i){i===void 0&&(i=!0),n.call(this,new Bn(r,e)),kt(i,t.Name,{readable:"readable file system",writable:"writable file system"})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){try{var o=new t(e.writable,e.readable,!1);o.initialize(function(a){i(a,o)},!1)}catch(a){i(a)}},t.isAvailable=function(){return Bn.isAvailable()},t.prototype.initialize=function(e,i){i===void 0&&(i=!0),i&&console.warn("[OverlayFS] OverlayFS.initialize() is deprecated and will be removed in the next major release. Please use 'OverlayFS.Create({readable: readable file system instance, writable: writable file system instance}, cb)' to create and initialize OverlayFS instances."),n.prototype.initialize.call(this,e)},t.prototype.getOverlayedFileSystems=function(){return n.prototype.getFSUnlocked.call(this).getOverlayedFileSystems()},t.prototype.unwrap=function(){return n.prototype.getFSUnlocked.call(this)},t}(gt);lr.Name="OverlayFS",lr.Options={writable:{type:"object",description:"The file system to write modified files to."},readable:{type:"object",description:"The file system that initially populates this file system."}};var Wt;(function(n){n[n.CB=0]="CB",n[n.FD=1]="FD",n[n.API_ERROR=2]="API_ERROR",n[n.STATS=3]="STATS",n[n.PROBE=4]="PROBE",n[n.FILEFLAG=5]="FILEFLAG",n[n.BUFFER=6]="BUFFER",n[n.ERROR=7]="ERROR"})(Wt||(Wt={}));var Xr=function(){this._callbacks={},this._nextId=0};Xr.prototype.toRemoteArg=function(t){var r=this._nextId++;return this._callbacks[r]=t,{type:Wt.CB,id:r}},Xr.prototype.toLocalArg=function(t){var r=this._callbacks[t];return delete this._callbacks[t],r};var kr=function(){this._fileDescriptors={},this._nextId=0};kr.prototype.toRemoteArg=function(t,r,e,i){var o=this._nextId++,a,u;this._fileDescriptors[o]=t,t.stat(function(h,p){h?i(h):(u=je(p.toBuffer()),e.isReadable()?t.read(R.alloc(p.size),0,p.size,0,function(E,L,z){E?i(E):(a=je(z),i(null,{type:Wt.FD,id:o,data:a,stat:u,path:r,flag:e.getFlagString()}))}):i(null,{type:Wt.FD,id:o,data:new ArrayBuffer(0),stat:u,path:r,flag:e.getFlagString()}))})},kr.prototype.applyFdAPIRequest=function(t,r){var e=this,i=t.args[0];this._applyFdChanges(i,function(o,a){o?r(o):a[t.method](function(u){t.method==="close"&&delete e._fileDescriptors[i.id],r(u)})})},kr.prototype._applyFdChanges=function(t,r){var e=this._fileDescriptors[t.id],i=We(t.data),o=A.fromBuffer(We(t.stat)),a=m.getFileFlag(t.flag);a.isWriteable()?e.write(i,0,i.length,a.isAppendable()?e.getPos():0,function(u){function h(){e.stat(function(p,E){p?r(p):E.mode!==o.mode?e.chmod(o.mode,function(L){r(L,e)}):r(p,e)})}u?r(u):a.isAppendable()?h():e.truncate(i.length,function(){h()})}):r(null,e)};function Rr(n){return{type:Wt.API_ERROR,errorData:je(n.writeToBuffer())}}function zn(n){return f.fromBuffer(We(n.errorData))}function jn(n){return{type:Wt.ERROR,name:n.name,message:n.message,stack:n.stack}}function Wn(n){var t=Kt[n.name];typeof t!="function"&&(t=Error);var r=new t(n.message);return r.stack=n.stack,r}function Hn(n){return{type:Wt.STATS,statsData:je(n.toBuffer())}}function Zn(n){return A.fromBuffer(We(n.statsData))}function Vn(n){return{type:Wt.FILEFLAG,flagStr:n.getFlagString()}}function Xn(n){return m.getFileFlag(n.flagStr)}function je(n){return G(n)}function We(n){return Et(n)}function Yn(n){return{type:Wt.BUFFER,data:je(n)}}function qn(n){return We(n.data)}function na(n){return n&&typeof n=="object"&&n.hasOwnProperty("browserfsMessage")&&n.browserfsMessage}function ia(n){return n&&typeof n=="object"&&n.hasOwnProperty("browserfsMessage")&&n.browserfsMessage}var Gn=function(n){function t(r,e,i,o,a,u){n.call(this,r,e,i,o,u),this._remoteFdId=a}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getRemoteFdId=function(){return this._remoteFdId},t.prototype.toRemoteArg=function(){return{type:Wt.FD,id:this._remoteFdId,data:je(this.getBuffer()),stat:je(this.getStats().toBuffer()),path:this.getPath(),flag:this.getFlag().getFlagString()}},t.prototype.sync=function(e){this._syncClose("sync",e)},t.prototype.close=function(e){this._syncClose("close",e)},t.prototype._syncClose=function(e,i){var o=this;this.isDirty()?this._fs.syncClose(e,this,function(a){a||o.resetDirty(),i(a)}):i()},t}(Yt),br=function(n){function t(r,e){var i=this;e===void 0&&(e=!0),n.call(this),this._callbackConverter=new Xr,this._isInitialized=!1,this._isReadOnly=!1,this._supportLinks=!1,this._supportProps=!1,this._worker=r,kt(e,t.Name,{worker:"Web Worker instance"}),this._worker.addEventListener("message",function(o){var a=o.data;if(ia(a)){var u,h=a.args,p=new Array(h.length);for(u=0;u<p.length;u++)p[u]=i._argRemote2Local(h[u]);i._callbackConverter.toLocalArg(a.cbId).apply(null,p)}})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){var o=new t(e.worker,!1);o.initialize(function(){i(null,o)})},t.isAvailable=function(){return typeof importScripts<"u"||typeof Worker<"u"},t.attachRemoteListener=function(e){var i=new kr;function o(u,h,p){switch(typeof u){case"object":u instanceof A?p(null,Hn(u)):u instanceof f?p(null,Rr(u)):u instanceof yt?p(null,i.toRemoteArg(u,h[0],h[1],p)):u instanceof m?p(null,Vn(u)):u instanceof R?p(null,Yn(u)):u instanceof Error?p(null,jn(u)):p(null,u);break;default:p(null,u);break}}function a(u,h){if(!u)return u;switch(typeof u){case"object":if(typeof u.type=="number"){var p=u;switch(p.type){case Wt.CB:var E=u.id;return function(){var L=arguments,z,J=new Array(arguments.length),tt,ut=arguments.length;function dt(Ft){ut>0&&(ut=-1,tt={browserfsMessage:!0,cbId:E,args:[Rr(Ft)]},e.postMessage(tt))}for(z=0;z<arguments.length;z++)(function(Ft,Ht){o(Ht,h,function(ie,xe){J[Ft]=xe,ie?dt(ie):--ut===0&&(tt={browserfsMessage:!0,cbId:E,args:J},e.postMessage(tt))})})(z,L[z]);arguments.length===0&&(tt={browserfsMessage:!0,cbId:E,args:J},e.postMessage(tt))};case Wt.API_ERROR:return zn(p);case Wt.STATS:return Zn(p);case Wt.FILEFLAG:return Xn(p);case Wt.BUFFER:return qn(p);case Wt.ERROR:return Wn(p);default:return u}}else return u;default:return u}}e.addEventListener("message",function(u){var h=u.data;if(na(h)){var p=h.args,E=new Array(p.length);switch(h.method){case"close":case"sync":(function(){var J=p[1];i.applyFdAPIRequest(h,function(tt){var ut={browserfsMessage:!0,cbId:J.id,args:tt?[Rr(tt)]:[]};e.postMessage(ut)})})();break;case"probe":(function(){var J=ft.getRootFS(),tt=p[1],ut={type:Wt.PROBE,isReadOnly:J.isReadOnly(),supportsLinks:J.supportsLinks(),supportsProps:J.supportsProps()},dt={browserfsMessage:!0,cbId:tt.id,args:[ut]};e.postMessage(dt)})();break;default:for(var L=0;L<p.length;L++)E[L]=a(p[L],E);var z=ft.getRootFS();z[h.method].apply(z,E);break}}})},t.prototype.getName=function(){return t.Name},t.prototype.initialize=function(e){var i=this;if(this._isInitialized)e();else{var o={browserfsMessage:!0,method:"probe",args:[this._argLocal2Remote(At()),this._callbackConverter.toRemoteArg(function(a){i._isInitialized=!0,i._isReadOnly=a.isReadOnly,i._supportLinks=a.supportsLinks,i._supportProps=a.supportsProps,e()})]};this._worker.postMessage(o)}},t.prototype.isReadOnly=function(){return this._isReadOnly},t.prototype.supportsSynch=function(){return!1},t.prototype.supportsLinks=function(){return this._supportLinks},t.prototype.supportsProps=function(){return this._supportProps},t.prototype.rename=function(e,i,o){this._rpc("rename",arguments)},t.prototype.stat=function(e,i,o){this._rpc("stat",arguments)},t.prototype.open=function(e,i,o,a){this._rpc("open",arguments)},t.prototype.unlink=function(e,i){this._rpc("unlink",arguments)},t.prototype.rmdir=function(e,i){this._rpc("rmdir",arguments)},t.prototype.mkdir=function(e,i,o){this._rpc("mkdir",arguments)},t.prototype.readdir=function(e,i){this._rpc("readdir",arguments)},t.prototype.exists=function(e,i){this._rpc("exists",arguments)},t.prototype.realpath=function(e,i,o){this._rpc("realpath",arguments)},t.prototype.truncate=function(e,i,o){this._rpc("truncate",arguments)},t.prototype.readFile=function(e,i,o,a){this._rpc("readFile",arguments)},t.prototype.writeFile=function(e,i,o,a,u,h){this._rpc("writeFile",arguments)},t.prototype.appendFile=function(e,i,o,a,u,h){this._rpc("appendFile",arguments)},t.prototype.chmod=function(e,i,o,a){this._rpc("chmod",arguments)},t.prototype.chown=function(e,i,o,a,u){this._rpc("chown",arguments)},t.prototype.utimes=function(e,i,o,a){this._rpc("utimes",arguments)},t.prototype.link=function(e,i,o){this._rpc("link",arguments)},t.prototype.symlink=function(e,i,o,a){this._rpc("symlink",arguments)},t.prototype.readlink=function(e,i){this._rpc("readlink",arguments)},t.prototype.syncClose=function(e,i,o){this._worker.postMessage({browserfsMessage:!0,method:e,args:[i.toRemoteArg(),this._callbackConverter.toRemoteArg(o)]})},t.prototype._argRemote2Local=function(e){if(!e)return e;switch(typeof e){case"object":if(typeof e.type=="number"){var i=e;switch(i.type){case Wt.API_ERROR:return zn(i);case Wt.FD:var o=i;return new Gn(this,o.path,m.getFileFlag(o.flag),A.fromBuffer(We(o.stat)),o.id,We(o.data));case Wt.STATS:return Zn(i);case Wt.FILEFLAG:return Xn(i);case Wt.BUFFER:return qn(i);case Wt.ERROR:return Wn(i);default:return e}}else return e;default:return e}},t.prototype._rpc=function(e,i){for(var o=this,a=new Array(i.length),u=0;u<i.length;u++)a[u]=o._argLocal2Remote(i[u]);var h={browserfsMessage:!0,method:e,args:a};this._worker.postMessage(h)},t.prototype._argLocal2Remote=function(e){if(!e)return e;switch(typeof e){case"object":return e instanceof A?Hn(e):e instanceof f?Rr(e):e instanceof Gn?e.toRemoteArg():e instanceof m?Vn(e):e instanceof R?Yn(e):e instanceof Error?jn(e):"Unknown argument";case"function":return this._callbackConverter.toRemoteArg(e);default:return e}},t}(rt);br.Name="WorkerFS",br.Options={worker:{type:"object",description:"The target worker that you want to connect to, or the current worker if in a worker context.",validator:function(n,t){n.postMessage?t():t(new f(s.EINVAL,"option must be a Web Worker instance."))}}};function oa(n,t,r){var e=new XMLHttpRequest;e.open("GET",n,!0);var i=!0;switch(t){case"buffer":e.responseType="arraybuffer";break;case"json":try{e.responseType="json",i=e.responseType==="json"}catch{i=!1}break;default:return r(new f(s.EINVAL,"Invalid download type: "+t))}e.onreadystatechange=function(o){if(e.readyState===4)if(e.status===200)switch(t){case"buffer":return r(null,e.response?R.from(e.response):At());case"json":return i?r(null,e.response):r(null,JSON.parse(e.responseText))}else return r(new f(e.status,"XHR error."))},e.send()}function aa(n,t){var r=new XMLHttpRequest;r.open("GET",n,!1);var e=null,i=null;if(r.overrideMimeType("text/plain; charset=x-user-defined"),r.onreadystatechange=function(o){if(r.readyState===4)if(r.status===200)switch(t){case"buffer":var a=r.responseText;e=R.alloc(a.length);for(var u=0;u<a.length;u++)e[u]=a.charCodeAt(u);return;case"json":e=JSON.parse(r.responseText);return}else{i=new f(r.status,"XHR error.");return}},r.send(),i)throw i;return e}function sa(n,t){var r=new XMLHttpRequest;switch(r.open("GET",n,!1),t){case"buffer":r.responseType="arraybuffer";break;case"json":break;default:throw new f(s.EINVAL,"Invalid download type: "+t)}var e,i;if(r.onreadystatechange=function(o){if(r.readyState===4)if(r.status===200)switch(t){case"buffer":e=R.from(r.response);break;case"json":e=JSON.parse(r.response);break}else i=new f(r.status,"XHR error.")},r.send(),i)throw i;return e}function Kn(n,t,r){var e=new XMLHttpRequest;e.open("HEAD",t,n),e.onreadystatechange=function(i){if(e.readyState===4)if(e.status===200)try{return r(null,parseInt(e.getResponseHeader("Content-Length")||"-1",10))}catch{return r(new f(s.EIO,"XHR HEAD error: Could not read content-length."))}else return r(new f(e.status,"XHR HEAD error."))},e.send()}var Jn=oa,ua=mt&&typeof Blob<"u"?sa:aa;function fa(n){var t=-1;return Kn(!1,n,function(r,e){if(r)throw r;t=e}),t}function ca(n,t){Kn(!0,n,t)}var we=function(){this._index={},this.addPath("/",new le)};we.fromListing=function(t){var r=new we,e=new le;r._index["/"]=e;for(var i=[["",t,e]];i.length>0;){var o=void 0,a=i.pop(),u=a[0],h=a[1],p=a[2];for(var E in h)if(h.hasOwnProperty(E)){var L=h[E],z=u+"/"+E;L?(r._index[z]=o=new le,i.push([z,L,o])):o=new $e(new A(N.FILE,-1,365)),p&&(p._ls[E]=o)}}return r},we.prototype.fileIterator=function(t){var r=this;for(var e in r._index)if(r._index.hasOwnProperty(e))for(var i=r._index[e],o=i.getListing(),a=0,u=o;a<u.length;a+=1){var h=u[a],p=i.getItem(h);Ne(p)&&t(p.getData())}},we.prototype.addPath=function(t,r){if(!r)throw new Error("Inode must be specified");if(t[0]!=="/")throw new Error("Path must be absolute, got: "+t);if(this._index.hasOwnProperty(t))return this._index[t]===r;var e=this._split_path(t),i=e[0],o=e[1],a=this._index[i];return a===void 0&&t!=="/"&&(a=new le,!this.addPath(i,a))||t!=="/"&&!a.addItem(o,r)?!1:(Ae(r)&&(this._index[t]=r),!0)},we.prototype.addPathFast=function(t,r){var e=t.lastIndexOf("/"),i=e===0?"/":t.substring(0,e),o=t.substring(e+1),a=this._index[i];return a===void 0&&(a=new le,this.addPathFast(i,a)),a.addItem(o,r)?(r.isDir()&&(this._index[t]=r),!0):!1},we.prototype.removePath=function(t){var r=this,e=this._split_path(t),i=e[0],o=e[1],a=this._index[i];if(a===void 0)return null;var u=a.remItem(o);if(u===null)return null;if(Ae(u)){for(var h=u.getListing(),p=0,E=h;p<E.length;p+=1){var L=E[p];r.removePath(t+"/"+L)}t!=="/"&&delete this._index[t]}return u},we.prototype.ls=function(t){var r=this._index[t];return r===void 0?null:r.getListing()},we.prototype.getInode=function(t){var r=this._split_path(t),e=r[0],i=r[1],o=this._index[e];return o===void 0?null:e===t?o:o.getItem(i)},we.prototype._split_path=function(t){var r=d.dirname(t),e=t.substr(r.length+(r==="/"?0:1));return[r,e]};var $e=function(t){this.data=t};$e.prototype.isFile=function(){return!0},$e.prototype.isDir=function(){return!1},$e.prototype.getData=function(){return this.data},$e.prototype.setData=function(t){this.data=t};var le=function(t){t===void 0&&(t=null),this.data=t,this._ls={}};le.prototype.isFile=function(){return!1},le.prototype.isDir=function(){return!0},le.prototype.getData=function(){return this.data},le.prototype.getStats=function(){return new A(N.DIRECTORY,4096,365)},le.prototype.getListing=function(){return Object.keys(this._ls)},le.prototype.getItem=function(t){var r=this._ls[t];return r||null},le.prototype.addItem=function(t,r){return t in this._ls?!1:(this._ls[t]=r,!0)},le.prototype.remItem=function(t){var r=this._ls[t];return r===void 0?null:(delete this._ls[t],r)};function Ne(n){return!!n&&n.isFile()}function Ae(n){return!!n&&n.isDir()}function la(n,t,r){try{r(null,n.toString(t))}catch(e){r(e)}}var Or=function(n){function t(r,e,i){e===void 0&&(e=""),i===void 0&&(i=!0),n.call(this),r||(r="index.json"),e.length>0&&e.charAt(e.length-1)!=="/"&&(e=e+"/"),this.prefixUrl=e;var o=null;if(typeof r=="string"){if(o=this._requestFileSync(r,"json"),!o)throw new Error("Unable to find listing at URL: ${listingUrlOrObj}")}else o=r;kt(i,t.Name,{index:typeof r=="string"?r:"file index as an object",baseUrl:e}),this._index=we.fromListing(o)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){e.index===void 0&&(e.index="index.json"),typeof e.index=="string"?t.FromURL(e.index,i,e.baseUrl,!1):i(null,new t(e.index,e.baseUrl,!1))},t.isAvailable=function(){return typeof XMLHttpRequest<"u"&&XMLHttpRequest!==null},t.FromURL=function(e,i,o,a){o===void 0&&(o=e.slice(0,e.lastIndexOf("/")+1)),a===void 0&&(a=!0),a&&console.warn(`[XmlHttpRequest] XmlHttpRequest.FromURL() is deprecated and will be removed in the next major release. Please use 'XmlHttpRequest.Create({ index: "`+e+'", baseUrl: "'+o+`" }, cb)' instead.`),Jn(e,"json",function(u,h){u?i(u):i(null,new t(h,o,!1))})},t.prototype.empty=function(){this._index.fileIterator(function(e){e.fileData=null})},t.prototype.getName=function(){return t.Name},t.prototype.diskSpace=function(e,i){i(0,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.preloadFile=function(e,i){var o=this._index.getInode(e);if(Ne(o)){if(o===null)throw f.ENOENT(e);var a=o.getData();a.size=i.length,a.fileData=i}else throw f.EISDIR(e)},t.prototype.stat=function(e,i,o){var a=this._index.getInode(e);if(a===null)return o(f.ENOENT(e));var u;Ne(a)?(u=a.getData(),u.size<0?this._requestFileSizeAsync(e,function(h,p){if(h)return o(h);u.size=p,o(null,u.clone())}):o(null,u.clone())):Ae(a)?(u=a.getStats(),o(null,u)):o(f.FileError(s.EINVAL,e))},t.prototype.statSync=function(e,i){var o=this._index.getInode(e);if(o===null)throw f.ENOENT(e);var a;if(Ne(o))a=o.getData(),a.size<0&&(a.size=this._requestFileSizeSync(e));else if(Ae(o))a=o.getStats();else throw f.FileError(s.EINVAL,e);return a},t.prototype.open=function(e,i,o,a){if(i.isWriteable())return a(new f(s.EPERM,e));var u=this,h=this._index.getInode(e);if(h===null)return a(f.ENOENT(e));if(Ne(h)){var p=h.getData();switch(i.pathExistsAction()){case b.THROW_EXCEPTION:case b.TRUNCATE_FILE:return a(f.EEXIST(e));case b.NOP:if(p.fileData)return a(null,new ae(u,e,i,p.clone(),p.fileData));this._requestFileAsync(e,"buffer",function(E,L){return E?a(E):(p.size=L.length,p.fileData=L,a(null,new ae(u,e,i,p.clone(),L)))});break;default:return a(new f(s.EINVAL,"Invalid FileMode object."))}}else return a(f.EISDIR(e))},t.prototype.openSync=function(e,i,o){if(i.isWriteable())throw new f(s.EPERM,e);var a=this._index.getInode(e);if(a===null)throw f.ENOENT(e);if(Ne(a)){var u=a.getData();switch(i.pathExistsAction()){case b.THROW_EXCEPTION:case b.TRUNCATE_FILE:throw f.EEXIST(e);case b.NOP:if(u.fileData)return new ae(this,e,i,u.clone(),u.fileData);var h=this._requestFileSync(e,"buffer");return u.size=h.length,u.fileData=h,new ae(this,e,i,u.clone(),h);default:throw new f(s.EINVAL,"Invalid FileMode object.")}}else throw f.EISDIR(e)},t.prototype.readdir=function(e,i){try{i(null,this.readdirSync(e))}catch(o){i(o)}},t.prototype.readdirSync=function(e){var i=this._index.getInode(e);if(i===null)throw f.ENOENT(e);if(Ae(i))return i.getListing();throw f.ENOTDIR(e)},t.prototype.readFile=function(e,i,o,a){var u=a;this.open(e,o,420,function(h,p){if(h)return a(h);a=function(z,J){p.close(function(tt){return z||(z=tt),u(z,J)})};var E=p,L=E.getBuffer();i===null?a(h,bt(L)):la(L,i,a)})},t.prototype.readFileSync=function(e,i,o){var a=this.openSync(e,o,420);try{var u=a,h=u.getBuffer();return i===null?bt(h):h.toString(i)}finally{a.closeSync()}},t.prototype.getXhrPath=function(e){return e.charAt(0)==="/"&&(e=e.slice(1)),this.prefixUrl+e},t.prototype._requestFileAsync=function(e,i,o){Jn(this.getXhrPath(e),i,o)},t.prototype._requestFileSync=function(e,i){return ua(this.getXhrPath(e),i)},t.prototype._requestFileSizeAsync=function(e,i){ca(this.getXhrPath(e),i)},t.prototype._requestFileSizeSync=function(e){return fa(this.getXhrPath(e))},t}(rt);Or.Name="XmlHttpRequest",Or.Options={index:{type:["string","object"],optional:!0,description:"URL to a file index as a JSON file or the file index object itself, generated with the make_xhrfs_index script. Defaults to `index.json`."},baseUrl:{type:"string",optional:!0,description:"Used as the URL prefix for fetched files. Default: Fetch files relative to the index."}};var He=function(){};He.str2byte=function(t,r){for(var e=t.length>r.length?r.length:t.length,i=0;i<e;i++){var o=t.charCodeAt(i);if(o>127){var a=He.extendedChars.indexOf(t.charAt(i));a>-1&&(o=a+128)}r[o]=i}return e},He.byte2str=function(t){for(var r=new Array(t.length),e=0;e<t.length;e++){var i=t[e];i>127?r[e]=He.extendedChars[i-128]:r[e]=String.fromCharCode(i)}return r.join("")},He.byteLength=function(t){return t.length},He.extendedChars=["\xC7","\xFC","\xE9","\xE2","\xE4","\xE0","\xE5","\xE7","\xEA","\xEB","\xE8","\xEF","\xEE","\xEC","\xC4","\xC5","\xC9","\xE6","\xC6","\xF4","\xF6","\xF2","\xFB","\xF9","\xFF","\xD6","\xDC","\xF8","\xA3","\xD8","\xD7","\u0192","\xE1","\xED","\xF3","\xFA","\xF1","\xD1","\xAA","\xBA","\xBF","\xAE","\xAC","\xBD","\xBC","\xA1","\xAB","\xBB","_","_","_","\xA6","\xA6","\xC1","\xC2","\xC0","\xA9","\xA6","\xA6","+","+","\xA2","\xA5","+","+","-","-","+","-","+","\xE3","\xC3","+","+","-","-","\xA6","-","+","\xA4","\xF0","\xD0","\xCA","\xCB","\xC8","i","\xCD","\xCE","\xCF","+","+","_","_","\xA6","\xCC","_","\xD3","\xDF","\xD4","\xD2","\xF5","\xD5","\xB5","\xFE","\xDE","\xDA","\xDB","\xD9","\xFD","\xDD","\xAF","\xB4","\xAD","\xB1","_","\xBE","\xB6","\xA7","\xF7","\xB8","\xB0","\xA8","\xB7","\xB9","\xB3","\xB2","_"," "];var ha=k(31).inflateRaw,Qn={},$n;(function(n){n[n.MSDOS=0]="MSDOS",n[n.AMIGA=1]="AMIGA",n[n.OPENVMS=2]="OPENVMS",n[n.UNIX=3]="UNIX",n[n.VM_CMS=4]="VM_CMS",n[n.ATARI_ST=5]="ATARI_ST",n[n.OS2_HPFS=6]="OS2_HPFS",n[n.MAC=7]="MAC",n[n.Z_SYSTEM=8]="Z_SYSTEM",n[n.CP_M=9]="CP_M",n[n.NTFS=10]="NTFS",n[n.MVS=11]="MVS",n[n.VSE=12]="VSE",n[n.ACORN_RISC=13]="ACORN_RISC",n[n.VFAT=14]="VFAT",n[n.ALT_MVS=15]="ALT_MVS",n[n.BEOS=16]="BEOS",n[n.TANDEM=17]="TANDEM",n[n.OS_400=18]="OS_400",n[n.OSX=19]="OSX"})($n||($n={}));var tr;(function(n){n[n.STORED=0]="STORED",n[n.SHRUNK=1]="SHRUNK",n[n.REDUCED_1=2]="REDUCED_1",n[n.REDUCED_2=3]="REDUCED_2",n[n.REDUCED_3=4]="REDUCED_3",n[n.REDUCED_4=5]="REDUCED_4",n[n.IMPLODE=6]="IMPLODE",n[n.DEFLATE=8]="DEFLATE",n[n.DEFLATE64=9]="DEFLATE64",n[n.TERSE_OLD=10]="TERSE_OLD",n[n.BZIP2=12]="BZIP2",n[n.LZMA=14]="LZMA",n[n.TERSE_NEW=18]="TERSE_NEW",n[n.LZ77=19]="LZ77",n[n.WAVPACK=97]="WAVPACK",n[n.PPMD=98]="PPMD"})(tr||(tr={}));function ti(n,t){var r=t&31,e=(t>>5&15)-1,i=(t>>9)+1980,o=n&31,a=n>>5&63,u=n>>11;return new Date(i,e,r,u,a,o)}function Nr(n,t,r,e){return e===0?"":t?n.toString("utf8",r,r+e):He.byte2str(n.slice(r,r+e))}var ye=function(t){if(this.data=t,t.readUInt32LE(0)!==67324752)throw new f(s.EINVAL,"Invalid Zip file: Local file header has invalid signature: "+this.data.readUInt32LE(0))};ye.prototype.versionNeeded=function(){return this.data.readUInt16LE(4)},ye.prototype.flags=function(){return this.data.readUInt16LE(6)},ye.prototype.compressionMethod=function(){return this.data.readUInt16LE(8)},ye.prototype.lastModFileTime=function(){return ti(this.data.readUInt16LE(10),this.data.readUInt16LE(12))},ye.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(10)},ye.prototype.crc32=function(){return this.data.readUInt32LE(14)},ye.prototype.fileNameLength=function(){return this.data.readUInt16LE(26)},ye.prototype.extraFieldLength=function(){return this.data.readUInt16LE(28)},ye.prototype.fileName=function(){return Nr(this.data,this.useUTF8(),30,this.fileNameLength())},ye.prototype.extraField=function(){var t=30+this.fileNameLength();return this.data.slice(t,t+this.extraFieldLength())},ye.prototype.totalSize=function(){return 30+this.fileNameLength()+this.extraFieldLength()},ye.prototype.useUTF8=function(){return(this.flags()&2048)===2048};var hr=function(t,r,e){this.header=t,this.record=r,this.data=e};hr.prototype.decompress=function(){var t=this.header.compressionMethod(),r=Qn[t];if(r)return r(this.data,this.record.compressedSize(),this.record.uncompressedSize(),this.record.flag());var e=tr[t];throw e||(e="Unknown: "+t),new f(s.EINVAL,"Invalid compression method on file '"+this.header.fileName()+"': "+e)},hr.prototype.getHeader=function(){return this.header},hr.prototype.getRecord=function(){return this.record},hr.prototype.getRawData=function(){return this.data};var Yr=function(t){this.data=t};Yr.prototype.crc32=function(){return this.data.readUInt32LE(0)},Yr.prototype.compressedSize=function(){return this.data.readUInt32LE(4)},Yr.prototype.uncompressedSize=function(){return this.data.readUInt32LE(8)};var ei=function(t){if(this.data=t,this.data.readUInt32LE(0)!==134630224)throw new f(s.EINVAL,"Invalid archive extra data record signature: "+this.data.readUInt32LE(0))};ei.prototype.length=function(){return this.data.readUInt32LE(4)},ei.prototype.extraFieldData=function(){return this.data.slice(8,8+this.length())};var ri=function(t){if(this.data=t,this.data.readUInt32LE(0)!==84233040)throw new f(s.EINVAL,"Invalid digital signature signature: "+this.data.readUInt32LE(0))};ri.prototype.size=function(){return this.data.readUInt16LE(4)},ri.prototype.signatureData=function(){return this.data.slice(6,6+this.size())};var Nt=function(t,r){if(this.zipData=t,this.data=r,this.data.readUInt32LE(0)!==33639248)throw new f(s.EINVAL,"Invalid Zip file: Central directory record has invalid signature: "+this.data.readUInt32LE(0));this._filename=this.produceFilename()};Nt.prototype.versionMadeBy=function(){return this.data.readUInt16LE(4)},Nt.prototype.versionNeeded=function(){return this.data.readUInt16LE(6)},Nt.prototype.flag=function(){return this.data.readUInt16LE(8)},Nt.prototype.compressionMethod=function(){return this.data.readUInt16LE(10)},Nt.prototype.lastModFileTime=function(){return ti(this.data.readUInt16LE(12),this.data.readUInt16LE(14))},Nt.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(12)},Nt.prototype.crc32=function(){return this.data.readUInt32LE(16)},Nt.prototype.compressedSize=function(){return this.data.readUInt32LE(20)},Nt.prototype.uncompressedSize=function(){return this.data.readUInt32LE(24)},Nt.prototype.fileNameLength=function(){return this.data.readUInt16LE(28)},Nt.prototype.extraFieldLength=function(){return this.data.readUInt16LE(30)},Nt.prototype.fileCommentLength=function(){return this.data.readUInt16LE(32)},Nt.prototype.diskNumberStart=function(){return this.data.readUInt16LE(34)},Nt.prototype.internalAttributes=function(){return this.data.readUInt16LE(36)},Nt.prototype.externalAttributes=function(){return this.data.readUInt32LE(38)},Nt.prototype.headerRelativeOffset=function(){return this.data.readUInt32LE(42)},Nt.prototype.produceFilename=function(){var t=Nr(this.data,this.useUTF8(),46,this.fileNameLength());return t.replace(/\\/g,"/")},Nt.prototype.fileName=function(){return this._filename},Nt.prototype.rawFileName=function(){return this.data.slice(46,46+this.fileNameLength())},Nt.prototype.extraField=function(){var t=44+this.fileNameLength();return this.data.slice(t,t+this.extraFieldLength())},Nt.prototype.fileComment=function(){var t=46+this.fileNameLength()+this.extraFieldLength();return Nr(this.data,this.useUTF8(),t,this.fileCommentLength())},Nt.prototype.rawFileComment=function(){var t=46+this.fileNameLength()+this.extraFieldLength();return this.data.slice(t,t+this.fileCommentLength())},Nt.prototype.totalSize=function(){return 46+this.fileNameLength()+this.extraFieldLength()+this.fileCommentLength()},Nt.prototype.isDirectory=function(){var t=this.fileName();return!!(this.externalAttributes()&16)||t.charAt(t.length-1)==="/"},Nt.prototype.isFile=function(){return!this.isDirectory()},Nt.prototype.useUTF8=function(){return(this.flag()&2048)===2048},Nt.prototype.isEncrypted=function(){return(this.flag()&1)===1},Nt.prototype.getFileData=function(){var t=this.headerRelativeOffset(),r=new ye(this.zipData.slice(t));return new hr(r,this,this.zipData.slice(t+r.totalSize()))},Nt.prototype.getData=function(){return this.getFileData().decompress()},Nt.prototype.getRawData=function(){return this.getFileData().getRawData()},Nt.prototype.getStats=function(){return new A(N.FILE,this.uncompressedSize(),365,new Date,this.lastModFileTime())};var Fe=function(t){if(this.data=t,this.data.readUInt32LE(0)!==101010256)throw new f(s.EINVAL,"Invalid Zip file: End of central directory record has invalid signature: "+this.data.readUInt32LE(0))};Fe.prototype.diskNumber=function(){return this.data.readUInt16LE(4)},Fe.prototype.cdDiskNumber=function(){return this.data.readUInt16LE(6)},Fe.prototype.cdDiskEntryCount=function(){return this.data.readUInt16LE(8)},Fe.prototype.cdTotalEntryCount=function(){return this.data.readUInt16LE(10)},Fe.prototype.cdSize=function(){return this.data.readUInt32LE(12)},Fe.prototype.cdOffset=function(){return this.data.readUInt32LE(16)},Fe.prototype.cdZipCommentLength=function(){return this.data.readUInt16LE(20)},Fe.prototype.cdZipComment=function(){return Nr(this.data,!0,22,this.cdZipCommentLength())},Fe.prototype.rawCdZipComment=function(){return this.data.slice(22,22+this.cdZipCommentLength())};var ni=function(t,r,e,i){this.index=t,this.directoryEntries=r,this.eocd=e,this.data=i},Ze=function(n){function t(r,e,i){e===void 0&&(e=""),i===void 0&&(i=!0),n.call(this),this.name=e,this._index=new we,this._directoryEntries=[],this._eocd=null,kt(i,t.Name,{zipData:"zip data as a Buffer",name:e}),r instanceof ni?(this._index=r.index,this._directoryEntries=r.directoryEntries,this._eocd=r.eocd,this.data=r.data):(this.data=r,this.populateIndex())}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){try{t.computeIndex(e.zipData,function(o){var a=new t(o,e.name,!1);i(null,a)},!1)}catch(o){i(o)}},t.isAvailable=function(){return!0},t.RegisterDecompressionMethod=function(e,i){Qn[e]=i},t.computeIndex=function(e,i,o){o===void 0&&(o=!0),o&&console.warn("[ZipFS] ZipFS.computeIndex is now deprecated, and will be removed in the next major release. Please update your code to use 'ZipFS.Create({ zipData: zip file as a Buffer}, cb)' instead.");var a=new we,u=t.getEOCD(e);if(u.diskNumber()!==u.cdDiskNumber())throw new f(s.EINVAL,"ZipFS does not support spanned zip files.");var h=u.cdOffset();if(h===4294967295)throw new f(s.EINVAL,"ZipFS does not support Zip64.");var p=h+u.cdSize();t.computeIndexResponsive(e,a,h,p,i,[],u)},t.getEOCD=function(e){for(var i=22,o=Math.min(i+65535,e.length-1),a=i;a<o;a++)if(e.readUInt32LE(e.length-a)===101010256)return new Fe(e.slice(e.length-a));throw new f(s.EINVAL,"Invalid ZIP file: Could not locate End of Central Directory signature.")},t.addToIndex=function(e,i){var o=e.fileName();if(o.charAt(0)==="/")throw new Error("WHY IS THIS ABSOLUTE");o.charAt(o.length-1)==="/"&&(o=o.substr(0,o.length-1)),e.isDirectory()?i.addPathFast("/"+o,new le(e)):i.addPathFast("/"+o,new $e(e))},t.computeIndexResponsive=function(e,i,o,a,u,h,p){if(o<a){for(var E=0;E++<200&&o<a;){var L=new Nt(e,e.slice(o));t.addToIndex(L,i),o+=L.totalSize(),h.push(L)}Vr(function(){t.computeIndexResponsive(e,i,o,a,u,h,p)})}else u(new ni(i,h,p,e))},t.prototype.getName=function(){return t.Name+(this.name!==""?" "+this.name:"")},t.prototype.getCentralDirectoryEntry=function(e){var i=this._index.getInode(e);if(i===null)throw f.ENOENT(e);if(Ne(i))return i.getData();if(Ae(i))return i.getData();throw f.EPERM("Invalid inode: "+i)},t.prototype.getCentralDirectoryEntryAt=function(e){var i=this._directoryEntries[e];if(!i)throw new RangeError("Invalid directory index: "+e+".");return i},t.prototype.getNumberOfCentralDirectoryEntries=function(){return this._directoryEntries.length},t.prototype.getEndOfCentralDirectory=function(){return this._eocd},t.prototype.diskSpace=function(e,i){i(this.data.length,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.statSync=function(e,i){var o=this._index.getInode(e);if(o===null)throw f.ENOENT(e);var a;if(Ne(o))a=o.getData().getStats();else if(Ae(o))a=o.getStats();else throw new f(s.EINVAL,"Invalid inode.");return a},t.prototype.openSync=function(e,i,o){if(i.isWriteable())throw new f(s.EPERM,e);var a=this._index.getInode(e);if(a)if(Ne(a)){var u=a.getData(),h=u.getStats();switch(i.pathExistsAction()){case b.THROW_EXCEPTION:case b.TRUNCATE_FILE:throw f.EEXIST(e);case b.NOP:return new ae(this,e,i,h,u.getData());default:throw new f(s.EINVAL,"Invalid FileMode object.")}}else throw f.EISDIR(e);else throw f.ENOENT(e)},t.prototype.readdirSync=function(e){var i=this._index.getInode(e);if(i){if(Ae(i))return i.getListing();throw f.ENOTDIR(e)}else throw f.ENOENT(e)},t.prototype.readFileSync=function(e,i,o){var a=this.openSync(e,o,420);try{var u=a,h=u.getBuffer();return i===null?bt(h):h.toString(i)}finally{a.closeSync()}},t.prototype.populateIndex=function(){var e=this,i=this._eocd=t.getEOCD(this.data);if(i.diskNumber()!==i.cdDiskNumber())throw new f(s.EINVAL,"ZipFS does not support spanned zip files.");var o=i.cdOffset();if(o===4294967295)throw new f(s.EINVAL,"ZipFS does not support Zip64.");for(var a=o+i.cdSize();o<a;){var u=new Nt(e.data,e.data.slice(o));o+=u.totalSize(),t.addToIndex(u,e._index),e._directoryEntries.push(u)}},t}(_t);Ze.Name="ZipFS",Ze.Options={zipData:{type:"object",description:"The zip file as a Buffer object.",validator:$t},name:{type:"string",optional:!0,description:"The name of the zip file (optional)."}},Ze.CompressionMethod=tr,Ze.RegisterDecompressionMethod(tr.DEFLATE,function(n,t,r){return It(ha(n.slice(0,t),{chunkSize:r}))}),Ze.RegisterDecompressionMethod(tr.STORED,function(n,t,r){return bt(n,0,r)});var pa="IEEE_P1282";function he(n,t,r){return n.toString("ascii",t,t+r).trim()}function qr(n,t,r){if(r===1)return String.fromCharCode(n[t]);for(var e=Math.floor(r/2),i=new Array(e),o=0;o<e;o++){var a=t+(o<<1);i[o]=String.fromCharCode(n[a+1]|n[a]<<8)}return i.join("")}function Ie(n,t){var r=parseInt(he(n,t,4),10),e=parseInt(he(n,t+4,2),10),i=parseInt(he(n,t+6,2),10),o=parseInt(he(n,t+8,2),10),a=parseInt(he(n,t+10,2),10),u=parseInt(he(n,t+12,2),10),h=parseInt(he(n,t+14,2),10);return new Date(r,e,i,o,a,u,h*100)}function Ve(n,t){var r=n[t],e=n[t+1],i=n[t+2],o=n[t+3],a=n[t+4],u=n[t+5];return new Date(r,e-1,i,o,a,u)}function da(n,t){var r=n.slice(t),e=new Jt(r);switch(e.signatureWord()){case 17221:return new ui(r);case 20548:return new ga(r);case 21328:return new fi(r);case 21332:return new ci(r);case 17746:return new li(r);case 17747:return new wa(r);case 20568:return new pi(r);case 20558:return new ma(r);case 21324:return new Gr(r);case 20045:return new di(r);case 17228:return new Kr(r);case 20556:return new Sa(r);case 21061:return new yi(r);case 21574:return new vi(r);case 21318:return new _a(r);case 21074:return new hi(r);default:return e}}function ii(n,t,r,e){r=r-4;for(var i=new Array;t<r;){var o=da(n,t),a=o.length();if(a===0)return i;if(t+=a,o instanceof ci)break;o instanceof ui?i=i.concat(o.getEntries(e)):i.push(o)}return i}var er=function(t){this._data=t};er.prototype.type=function(){return this._data[0]},er.prototype.standardIdentifier=function(){return he(this._data,1,5)},er.prototype.version=function(){return this._data[6]},er.prototype.data=function(){return this._data.slice(7,2048)};var oi=function(n){function t(r){n.call(this,r),this._root=null}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.systemIdentifier=function(){return this._getString32(8)},t.prototype.volumeIdentifier=function(){return this._getString32(40)},t.prototype.volumeSpaceSize=function(){return this._data.readUInt32LE(80)},t.prototype.volumeSetSize=function(){return this._data.readUInt16LE(120)},t.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(124)},t.prototype.logicalBlockSize=function(){return this._data.readUInt16LE(128)},t.prototype.pathTableSize=function(){return this._data.readUInt32LE(132)},t.prototype.locationOfTypeLPathTable=function(){return this._data.readUInt32LE(140)},t.prototype.locationOfOptionalTypeLPathTable=function(){return this._data.readUInt32LE(144)},t.prototype.locationOfTypeMPathTable=function(){return this._data.readUInt32BE(148)},t.prototype.locationOfOptionalTypeMPathTable=function(){return this._data.readUInt32BE(152)},t.prototype.rootDirectoryEntry=function(e){return this._root===null&&(this._root=this._constructRootDirectoryRecord(this._data.slice(156)),this._root.rootCheckForRockRidge(e)),this._root},t.prototype.volumeSetIdentifier=function(){return this._getString(190,128)},t.prototype.publisherIdentifier=function(){return this._getString(318,128)},t.prototype.dataPreparerIdentifier=function(){return this._getString(446,128)},t.prototype.applicationIdentifier=function(){return this._getString(574,128)},t.prototype.copyrightFileIdentifier=function(){return this._getString(702,38)},t.prototype.abstractFileIdentifier=function(){return this._getString(740,36)},t.prototype.bibliographicFileIdentifier=function(){return this._getString(776,37)},t.prototype.volumeCreationDate=function(){return Ie(this._data,813)},t.prototype.volumeModificationDate=function(){return Ie(this._data,830)},t.prototype.volumeExpirationDate=function(){return Ie(this._data,847)},t.prototype.volumeEffectiveDate=function(){return Ie(this._data,864)},t.prototype.fileStructureVersion=function(){return this._data[881]},t.prototype.applicationUsed=function(){return this._data.slice(883,883+512)},t.prototype.reserved=function(){return this._data.slice(1395,1395+653)},t.prototype._getString32=function(e){return this._getString(e,32)},t}(er),ya=function(n){function t(r){if(n.call(this,r),this.type()!==1)throw new f(s.EIO,"Invalid primary volume descriptor.")}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.name=function(){return"ISO9660"},t.prototype._constructRootDirectoryRecord=function(e){return new ai(e,-1)},t.prototype._getString=function(e,i){return this._getString(e,i)},t}(oi),va=function(n){function t(r){if(n.call(this,r),this.type()!==2)throw new f(s.EIO,"Invalid supplementary volume descriptor.");var e=this.escapeSequence(),i=e[2];if(e[0]!==37||e[1]!==47||i!==64&&i!==67&&i!==69)throw new f(s.EIO,"Unrecognized escape sequence for SupplementaryVolumeDescriptor: "+e.toString())}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.name=function(){return"Joliet"},t.prototype.escapeSequence=function(){return this._data.slice(88,120)},t.prototype._constructRootDirectoryRecord=function(e){return new si(e,-1)},t.prototype._getString=function(e,i){return qr(this._data,e,i)},t}(oi),Bt=function(t,r){this._suEntries=null,this._fileOrDir=null,this._data=t,this._rockRidgeOffset=r};Bt.prototype.hasRockRidge=function(){return this._rockRidgeOffset>-1},Bt.prototype.getRockRidgeOffset=function(){return this._rockRidgeOffset},Bt.prototype.rootCheckForRockRidge=function(t){var r=this.getDirectory(t);this._rockRidgeOffset=r.getDotEntry(t)._getRockRidgeOffset(t),this._rockRidgeOffset>-1&&(this._fileOrDir=null)},Bt.prototype.length=function(){return this._data[0]},Bt.prototype.extendedAttributeRecordLength=function(){return this._data[1]},Bt.prototype.lba=function(){return this._data.readUInt32LE(2)*2048},Bt.prototype.dataLength=function(){return this._data.readUInt32LE(10)},Bt.prototype.recordingDate=function(){return Ve(this._data,18)},Bt.prototype.fileFlags=function(){return this._data[25]},Bt.prototype.fileUnitSize=function(){return this._data[26]},Bt.prototype.interleaveGapSize=function(){return this._data[27]},Bt.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(28)},Bt.prototype.identifier=function(){return this._getString(33,this._data[32])},Bt.prototype.fileName=function(t){if(this.hasRockRidge()){var r=this._rockRidgeFilename(t);if(r!==null)return r}var e=this.identifier();if(this.isDirectory(t))return e;var i=e.indexOf(";");return i===-1?e:e[i-1]==="."?e.slice(0,i-1):e.slice(0,i)},Bt.prototype.isDirectory=function(t){var r=!!(this.fileFlags()&2);return!r&&this.hasRockRidge()&&(r=this.getSUEntries(t).filter(function(e){return e instanceof Kr}).length>0),r},Bt.prototype.isSymlink=function(t){return this.hasRockRidge()&&this.getSUEntries(t).filter(function(r){return r instanceof Gr}).length>0},Bt.prototype.getSymlinkPath=function(t){for(var r="",e=this.getSUEntries(t),i=this._getGetString(),o=0,a=e;o<a.length;o+=1){var u=a[o];if(u instanceof Gr){for(var h=u.componentRecords(),p=0,E=h;p<E.length;p+=1){var L=E[p],z=L.flags();z&2?r+="./":z&4?r+="../":z&8?r+="/":(r+=L.content(i),z&1||(r+="/"))}if(!u.continueFlag())break}}return r.length>1&&r[r.length-1]==="/"?r.slice(0,r.length-1):r},Bt.prototype.getFile=function(t){if(this.isDirectory(t))throw new Error("Tried to get a File from a directory.");return this._fileOrDir===null&&(this._fileOrDir=t.slice(this.lba(),this.lba()+this.dataLength())),this._fileOrDir},Bt.prototype.getDirectory=function(t){if(!this.isDirectory(t))throw new Error("Tried to get a Directory from a file.");return this._fileOrDir===null&&(this._fileOrDir=this._constructDirectory(t)),this._fileOrDir},Bt.prototype.getSUEntries=function(t){return this._suEntries||this._constructSUEntries(t),this._suEntries},Bt.prototype._rockRidgeFilename=function(t){var r=this.getSUEntries(t).filter(function(h){return h instanceof di});if(r.length===0||r[0].flags()&6)return null;for(var e="",i=this._getGetString(),o=0,a=r;o<a.length;o+=1){var u=a[o];if(e+=u.name(i),!(u.flags()&1))break}return e},Bt.prototype._constructSUEntries=function(t){var r=33+this._data[32];r%2===1&&r++,r+=this._rockRidgeOffset,this._suEntries=ii(this._data,r,this.length(),t)},Bt.prototype._getRockRidgeOffset=function(t){this._rockRidgeOffset=0;var r=this.getSUEntries(t);if(r.length>0){var e=r[0];if(e instanceof fi&&e.checkBytesPass())for(var i=1;i<r.length;i++){var o=r[i];if(o instanceof hi||o instanceof li&&o.extensionIdentifier()===pa)return e.bytesSkipped()}}return this._rockRidgeOffset=-1,-1};var ai=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype._getString=function(e,i){return he(this._data,e,i)},t.prototype._constructDirectory=function(e){return new Ea(this,e)},t.prototype._getGetString=function(){return he},t}(Bt),si=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype._getString=function(e,i){return qr(this._data,e,i)},t.prototype._constructDirectory=function(e){return new Fa(this,e)},t.prototype._getGetString=function(){return qr},t}(Bt),Jt=function(t){this._data=t};Jt.prototype.signatureWord=function(){return this._data.readUInt16BE(0)},Jt.prototype.signatureWordString=function(){return he(this._data,0,2)},Jt.prototype.length=function(){return this._data[2]},Jt.prototype.suVersion=function(){return this._data[3]};var ui=function(n){function t(r){n.call(this,r),this._entries=null}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.continuationLba=function(){return this._data.readUInt32LE(4)},t.prototype.continuationLbaOffset=function(){return this._data.readUInt32LE(12)},t.prototype.continuationLength=function(){return this._data.readUInt32LE(20)},t.prototype.getEntries=function(e){if(!this._entries){var i=this.continuationLba()*2048+this.continuationLbaOffset();this._entries=ii(e,i,this.continuationLength(),e)}return this._entries},t}(Jt),ga=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}(Jt),fi=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.checkBytesPass=function(){return this._data[4]===190&&this._data[5]===239},t.prototype.bytesSkipped=function(){return this._data[6]},t}(Jt),ci=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}(Jt),li=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.identifierLength=function(){return this._data[4]},t.prototype.descriptorLength=function(){return this._data[5]},t.prototype.sourceLength=function(){return this._data[6]},t.prototype.extensionVersion=function(){return this._data[7]},t.prototype.extensionIdentifier=function(){return he(this._data,8,this.identifierLength())},t.prototype.extensionDescriptor=function(){return he(this._data,8+this.identifierLength(),this.descriptorLength())},t.prototype.extensionSource=function(){return he(this._data,8+this.identifierLength()+this.descriptorLength(),this.sourceLength())},t}(Jt),wa=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.extensionSequence=function(){return this._data[4]},t}(Jt),hi=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}(Jt),pi=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.mode=function(){return this._data.readUInt32LE(4)},t.prototype.fileLinks=function(){return this._data.readUInt32LE(12)},t.prototype.uid=function(){return this._data.readUInt32LE(20)},t.prototype.gid=function(){return this._data.readUInt32LE(28)},t.prototype.inode=function(){return this._data.readUInt32LE(36)},t}(Jt),ma=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.devTHigh=function(){return this._data.readUInt32LE(4)},t.prototype.devTLow=function(){return this._data.readUInt32LE(12)},t}(Jt),Gr=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.continueFlag=function(){return this.flags()&1},t.prototype.componentRecords=function(){for(var e=this,i=new Array,o=5;o<this.length();){var a=new pr(e._data.slice(o));i.push(a),o+=a.length()}return i},t}(Jt),pr=function(t){this._data=t};pr.prototype.flags=function(){return this._data[0]},pr.prototype.length=function(){return 2+this.componentLength()},pr.prototype.componentLength=function(){return this._data[1]},pr.prototype.content=function(t){return t(this._data,2,this.componentLength())};var di=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.name=function(e){return e(this._data,5,this.length()-5)},t}(Jt),Kr=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.childDirectoryLba=function(){return this._data.readUInt32LE(4)},t}(Jt),Sa=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.parentDirectoryLba=function(){return this._data.readUInt32LE(4)},t}(Jt),yi=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}(Jt),vi=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.creation=function(){return this.flags()&1?this._longFormDates()?Ie(this._data,5):Ve(this._data,5):null},t.prototype.modify=function(){if(this.flags()&2){var e=this.flags()&1?1:0;return this._longFormDates?Ie(this._data,5+e*17):Ve(this._data,5+e*7)}else return null},t.prototype.access=function(){if(this.flags()&4){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,this._longFormDates?Ie(this._data,5+e*17):Ve(this._data,5+e*7)}else return null},t.prototype.backup=function(){if(this.flags()&16){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,this._longFormDates?Ie(this._data,5+e*17):Ve(this._data,5+e*7)}else return null},t.prototype.expiration=function(){if(this.flags()&32){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,e+=this.flags()&16?1:0,this._longFormDates?Ie(this._data,5+e*17):Ve(this._data,5+e*7)}else return null},t.prototype.effective=function(){if(this.flags()&64){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,e+=this.flags()&16?1:0,e+=this.flags()&32?1:0,this._longFormDates?Ie(this._data,5+e*17):Ve(this._data,5+e*7)}else return null},t.prototype._longFormDates=function(){return!!this.flags()},t}(Jt),_a=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.virtualSizeHigh=function(){return this._data.readUInt32LE(4)},t.prototype.virtualSizeLow=function(){return this._data.readUInt32LE(12)},t.prototype.tableDepth=function(){return this._data[20]},t}(Jt),dr=function(t,r){var e=this;this._fileList=[],this._fileMap={},this._record=t;var i=t.lba(),o=i+t.dataLength();if(!(t.fileFlags()&2)){var a=t.getSUEntries(r).filter(function(E){return E instanceof Kr})[0];i=a.childDirectoryLba()*2048,o=1/0}for(;i<o;){var u=r[i];if(u===0){i++;continue}var h=e._constructDirectoryRecord(r.slice(i)),p=h.fileName(r);p!=="\0"&&p!==""?(!h.hasRockRidge()||h.getSUEntries(r).filter(function(E){return E instanceof yi}).length===0)&&(e._fileMap[p]=h,e._fileList.push(p)):o===1/0&&(o=i+h.dataLength()),i+=h.length()}};dr.prototype.getRecord=function(t){return this._fileMap[t]},dr.prototype.getFileList=function(){return this._fileList},dr.prototype.getDotEntry=function(t){return this._constructDirectoryRecord(t.slice(this._record.lba()))};var Ea=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype._constructDirectoryRecord=function(e){return new ai(e,this._record.getRockRidgeOffset())},t}(dr),Fa=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype._constructDirectoryRecord=function(e){return new si(e,this._record.getRockRidgeOffset())},t}(dr),Lr=function(n){function t(r,e,i){var o=this;e===void 0&&(e=""),i===void 0&&(i=!0),n.call(this),this._data=r,kt(i,t.Name,{data:"ISO data as a Buffer",name:e});for(var a=!1,u=16*2048,h=new Array;!a;){var p=r.slice(u),E=new er(p);switch(E.type()){case 1:h.push(new ya(p));break;case 2:h.push(new va(p));break;case 255:a=!0;break}u+=2048}if(h.length===0)throw new f(s.EIO,"Unable to find a suitable volume descriptor.");h.forEach(function(L){(!o._pvd||o._pvd.type()!==2)&&(o._pvd=L)}),this._root=this._pvd.rootDirectoryEntry(r),this._name=e}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){var o,a;try{o=new t(e.data,e.name,!1)}catch(u){u=u}finally{i(a,o)}},t.isAvailable=function(){return!0},t.prototype.getName=function(){var e="IsoFS"+this._name+(this._pvd?"-"+this._pvd.name():"");return this._root&&this._root.hasRockRidge()&&(e+="-RockRidge"),e},t.prototype.diskSpace=function(e,i){i(this._data.length,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.statSync=function(e,i){var o=this._getDirectoryRecord(e);if(o===null)throw f.ENOENT(e);return this._getStats(e,o)},t.prototype.openSync=function(e,i,o){if(i.isWriteable())throw new f(s.EPERM,e);var a=this._getDirectoryRecord(e);if(a){if(a.isSymlink(this._data))return this.openSync(d.resolve(e,a.getSymlinkPath(this._data)),i,o);if(a.isDirectory(this._data))throw f.EISDIR(e);var u=a.getFile(this._data),h=this._getStats(e,a);switch(i.pathExistsAction()){case b.THROW_EXCEPTION:case b.TRUNCATE_FILE:throw f.EEXIST(e);case b.NOP:return new ae(this,e,i,h,u);default:throw new f(s.EINVAL,"Invalid FileMode object.")}}else throw f.ENOENT(e)},t.prototype.readdirSync=function(e){var i=this._getDirectoryRecord(e);if(i){if(i.isDirectory(this._data))return i.getDirectory(this._data).getFileList().slice(0);throw f.ENOTDIR(e)}else throw f.ENOENT(e)},t.prototype.readFileSync=function(e,i,o){var a=this.openSync(e,o,420);try{var u=a,h=u.getBuffer();return i===null?bt(h):h.toString(i)}finally{a.closeSync()}},t.prototype._getDirectoryRecord=function(e){var i=this;if(e==="/")return this._root;for(var o=e.split("/").slice(1),a=this._root,u=0,h=o;u<h.length;u+=1){var p=h[u];if(a.isDirectory(i._data)){if(a=a.getDirectory(i._data).getRecord(p),!a)return null}else return null}return a},t.prototype._getStats=function(e,i){if(i.isSymlink(this._data)){var o=d.resolve(e,i.getSymlinkPath(this._data)),a=this._getDirectoryRecord(o);return a?this._getStats(o,a):null}else{var u=i.dataLength(),h=365,p=i.recordingDate(),E=p,L=p,z=p;if(i.hasRockRidge())for(var J=i.getSUEntries(this._data),tt=0,ut=J;tt<ut.length;tt+=1){var dt=ut[tt];if(dt instanceof pi)h=dt.mode();else if(dt instanceof vi){var Ft=dt.flags();Ft&4&&(E=dt.access()),Ft&2&&(L=dt.modify()),Ft&1&&(z=dt.creation())}}return h=h&365,new A(i.isDirectory(this._data)?N.DIRECTORY:N.FILE,u,h,E,L,z)}},t}(_t);Lr.Name="IsoFS",Lr.Options={data:{type:"object",description:"The ISO file in a buffer",validator:$t}},[g,mr,Sr,Ge,Er,Ke,or,Lr,sr,Je,lr,br,Or,Ze].forEach(function(n){var t=n.Create;n.Create=function(r,e){var i=typeof r=="function",o=i?r:e,a=i?{}:r;function u(h){h?o(h):t.call(n,a,o)}S(n,a,u)}});var Dr={AsyncMirror:g,Dropbox:mr,Emscripten:Sr,FolderAdapter:Ge,HTML5FS:Er,InMemory:Ke,IndexedDB:or,IsoFS:Lr,LocalStorage:sr,MountableFileSystem:Je,OverlayFS:lr,WorkerFS:br,XmlHttpRequest:Or,ZipFS:Ze};O.initializeTTYs&&O.initializeTTYs();function Ia(n){n.Buffer=R,n.process=O;var t=n.require?n.require:null;n.require=function(r){var e=gi(r);return e||t.apply(null,Array.prototype.slice.call(arguments,0))}}function xa(n,t){Dr[n]=t}function gi(n){switch(n){case"fs":return ft;case"path":return d;case"buffer":return F;case"process":return O;case"bfs_utils":return _;default:return Dr[n]}}function wi(n){return ft.initialize(n)}function ka(n,t){Jr(n,function(r,e){e?(wi(e),t()):t(r)})}function Jr(n,t){var r=n.fs;if(!r)return t(new f(s.EPERM,'Missing "fs" property on configuration object.'));var e=n.options,i=0,o=!1;function a(){if(!o){o=!0;var p=Dr[r];p?p.Create(e,t):t(new f(s.EPERM,"File system "+r+" is not available in BrowserFS."))}}if(e!==null&&typeof e=="object"){var u=!1,h=Object.keys(e).filter(function(p){return p!=="fs"});h.forEach(function(p){var E=e[p];E!==null&&typeof E=="object"&&E.fs&&(i++,Jr(E,function(L,z){if(i--,L){if(o)return;o=!0,t(L)}else e[p]=z,i===0&&u&&a()}))}),u=!0}i===0&&a()}"ab".substr(-1)!=="b"&&(String.prototype.substr=function(n){return function(t,r){return t<0&&(t=this.length+t),n.call(this,t,r)}}(String.prototype.substr)),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&(Uint8Array.prototype.slice||(Uint8Array.prototype.slice=function(n,t){n===void 0&&(n=0),t===void 0&&(t=this.length);var r=this;return n<0&&(n=this.length+n,n<0&&(n=0)),t<0&&(t=this.length+t,t<0&&(t=0)),t<n&&(t=n),new Uint8Array(r.buffer,r.byteOffset+n,t-n)})),D.install=Ia,D.registerFileSystem=xa,D.BFSRequire=gi,D.initialize=wi,D.configure=ka,D.getFileSystem=Jr,D.EmscriptenFS=lt,D.FileSystem=Dr,D.Errors=x,D.setImmediate=Vr}).call(D,k(1),function(){return this}(),k(5)(et),k(6))},function(et,D,k){et.exports=k(2).Buffer},function(et,D,k){(function(s){"use strict";var j=k(3),I=k(4);D.Buffer=s,D.SlowBuffer=C,D.INSPECT_MAX_BYTES=50;var O=2147483647;D.kMaxLength=O,s.TYPED_ARRAY_SUPPORT=F(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function F(){try{var g=new Uint8Array(1);return g.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},g.foo()===42}catch{return!1}}function d(g){if(g>O)throw new RangeError("Invalid typed array length");var c=new Uint8Array(g);return c.__proto__=s.prototype,c}function s(g,c,l){if(typeof g=="number"){if(typeof c=="string")throw new Error("If encoding is specified then the first argument must be a string");return b(g)}return v(g,c,l)}typeof Symbol<"u"&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192;function v(g,c,l){if(typeof g=="number")throw new TypeError('"value" argument must not be a number');return Yt(g)?A(g,c,l):typeof g=="string"?m(g,c):q(g)}s.from=function(g,c,l){return v(g,c,l)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array;function f(g){if(typeof g!="number")throw new TypeError('"size" argument must be a number');if(g<0)throw new RangeError('"size" argument must not be negative')}function x(g,c,l){return f(g),g<=0?d(g):c!==void 0?typeof l=="string"?d(g).fill(c,l):d(g).fill(c):d(g)}s.alloc=function(g,c,l){return x(g,c,l)};function b(g){return f(g),d(g<0?0:H(g)|0)}s.allocUnsafe=function(g){return b(g)},s.allocUnsafeSlow=function(g){return b(g)};function m(g,c){if((typeof c!="string"||c==="")&&(c="utf8"),!s.isEncoding(c))throw new TypeError('"encoding" must be a valid string encoding');var l=St(g,c)|0,w=d(l),T=w.write(g,c);return T!==l&&(w=w.slice(0,T)),w}function N(g){for(var c=g.length<0?0:H(g.length)|0,l=d(c),w=0;w<c;w+=1)l[w]=g[w]&255;return l}function A(g,c,l){if(c<0||g.byteLength<c)throw new RangeError("'offset' is out of bounds");if(g.byteLength<c+(l||0))throw new RangeError("'length' is out of bounds");var w;return c===void 0&&l===void 0?w=new Uint8Array(g):l===void 0?w=new Uint8Array(g,c):w=new Uint8Array(g,c,l),w.__proto__=s.prototype,w}function q(g){if(s.isBuffer(g)){var c=H(g.length)|0,l=d(c);return l.length===0||g.copy(l,0,0,c),l}if(g){if(ae(g)||"length"in g)return typeof g.length!="number"||me(g.length)?d(0):N(g);if(g.type==="Buffer"&&Array.isArray(g.data))return N(g.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function H(g){if(g>=O)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+O.toString(16)+" bytes");return g|0}function C(g){return+g!=g&&(g=0),s.alloc(+g)}s.isBuffer=function(c){return c!=null&&c._isBuffer===!0},s.compare=function(c,l){if(!s.isBuffer(c)||!s.isBuffer(l))throw new TypeError("Arguments must be Buffers");if(c===l)return 0;for(var w=c.length,T=l.length,W=0,Y=Math.min(w,T);W<Y;++W)if(c[W]!==l[W]){w=c[W],T=l[W];break}return w<T?-1:T<w?1:0},s.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(c,l){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return s.alloc(0);var w;if(l===void 0)for(l=0,w=0;w<c.length;++w)l+=c[w].length;var T=s.allocUnsafe(l),W=0;for(w=0;w<c.length;++w){var Y=c[w];if(!s.isBuffer(Y))throw new TypeError('"list" argument must be an Array of Buffers');Y.copy(T,W),W+=Y.length}return T};function St(g,c){if(s.isBuffer(g))return g.length;if(ae(g)||Yt(g))return g.byteLength;typeof g!="string"&&(g=""+g);var l=g.length;if(l===0)return 0;for(var w=!1;;)switch(c){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":case void 0:return K(g).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return _t(g).length;default:if(w)return K(g).length;c=(""+c).toLowerCase(),w=!0}}s.byteLength=St;function $(g,c,l){var w=!1;if((c===void 0||c<0)&&(c=0),c>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,c>>>=0,l<=c))return"";for(g||(g="utf8");;)switch(g){case"hex":return It(this,c,l);case"utf8":case"utf-8":return Xt(this,c,l);case"ascii":return G(this,c,l);case"latin1":case"binary":return st(this,c,l);case"base64":return mt(this,c,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return vt(this,c,l);default:if(w)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase(),w=!0}}s.prototype._isBuffer=!0;function wt(g,c,l){var w=g[c];g[c]=g[l],g[l]=w}s.prototype.swap16=function(){var c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var l=0;l<c;l+=2)wt(this,l,l+1);return this},s.prototype.swap32=function(){var c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var l=0;l<c;l+=4)wt(this,l,l+3),wt(this,l+1,l+2);return this},s.prototype.swap64=function(){var c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var l=0;l<c;l+=8)wt(this,l,l+7),wt(this,l+1,l+6),wt(this,l+2,l+5),wt(this,l+3,l+4);return this},s.prototype.toString=function(){var c=this.length;return c===0?"":arguments.length===0?Xt(this,0,c):$.apply(this,arguments)},s.prototype.equals=function(c){if(!s.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:s.compare(this,c)===0},s.prototype.inspect=function(){var c="",l=D.INSPECT_MAX_BYTES;return this.length>0&&(c=this.toString("hex",0,l).match(/.{2}/g).join(" "),this.length>l&&(c+=" ... ")),"<Buffer "+c+">"},s.prototype.compare=function(c,l,w,T,W){if(!s.isBuffer(c))throw new TypeError("Argument must be a Buffer");if(l===void 0&&(l=0),w===void 0&&(w=c?c.length:0),T===void 0&&(T=0),W===void 0&&(W=this.length),l<0||w>c.length||T<0||W>this.length)throw new RangeError("out of range index");if(T>=W&&l>=w)return 0;if(T>=W)return-1;if(l>=w)return 1;if(l>>>=0,w>>>=0,T>>>=0,W>>>=0,this===c)return 0;for(var Y=W-T,xt=w-l,Lt=Math.min(Y,xt),Ct=this.slice(T,W),qt=c.slice(l,w),Tt=0;Tt<Lt;++Tt)if(Ct[Tt]!==qt[Tt]){Y=Ct[Tt],xt=qt[Tt];break}return Y<xt?-1:xt<Y?1:0};function ht(g,c,l,w,T){if(g.length===0)return-1;if(typeof l=="string"?(w=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,me(l)&&(l=T?0:g.length-1),l<0&&(l=g.length+l),l>=g.length){if(T)return-1;l=g.length-1}else if(l<0)if(T)l=0;else return-1;if(typeof c=="string"&&(c=s.from(c,w)),s.isBuffer(c))return c.length===0?-1:M(g,c,l,w,T);if(typeof c=="number")return c=c&255,typeof Uint8Array.prototype.indexOf=="function"?T?Uint8Array.prototype.indexOf.call(g,c,l):Uint8Array.prototype.lastIndexOf.call(g,c,l):M(g,[c],l,w,T);throw new TypeError("val must be string, number or Buffer")}function M(g,c,l,w,T){var W=1,Y=g.length,xt=c.length;if(w!==void 0&&(w=String(w).toLowerCase(),w==="ucs2"||w==="ucs-2"||w==="utf16le"||w==="utf-16le")){if(g.length<2||c.length<2)return-1;W=2,Y/=2,xt/=2,l/=2}function Lt(Xe,Ce){return W===1?Xe[Ce]:Xe.readUInt16BE(Ce*W)}var Ct;if(T){var qt=-1;for(Ct=l;Ct<Y;Ct++)if(Lt(g,Ct)===Lt(c,qt===-1?0:Ct-qt)){if(qt===-1&&(qt=Ct),Ct-qt+1===xt)return qt*W}else qt!==-1&&(Ct-=Ct-qt),qt=-1}else for(l+xt>Y&&(l=Y-xt),Ct=l;Ct>=0;Ct--){for(var Tt=!0,Se=0;Se<xt;Se++)if(Lt(g,Ct+Se)!==Lt(c,Se)){Tt=!1;break}if(Tt)return Ct}return-1}s.prototype.includes=function(c,l,w){return this.indexOf(c,l,w)!==-1},s.prototype.indexOf=function(c,l,w){return ht(this,c,l,w,!0)},s.prototype.lastIndexOf=function(c,l,w){return ht(this,c,l,w,!1)};function Q(g,c,l,w){l=Number(l)||0;var T=g.length-l;w?(w=Number(w),w>T&&(w=T)):w=T;var W=c.length;if(W%2!==0)throw new TypeError("Invalid hex string");w>W/2&&(w=W/2);for(var Y=0;Y<w;++Y){var xt=parseInt(c.substr(Y*2,2),16);if(me(xt))return Y;g[l+Y]=xt}return Y}function ft(g,c,l,w){return yt(K(c,g.length-l),g,l,w)}function Rt(g,c,l,w){return yt(lt(c),g,l,w)}function pt(g,c,l,w){return Rt(g,c,l,w)}function Dt(g,c,l,w){return yt(_t(c),g,l,w)}function kt(g,c,l,w){return yt(rt(c,g.length-l),g,l,w)}s.prototype.write=function(c,l,w,T){if(l===void 0)T="utf8",w=this.length,l=0;else if(w===void 0&&typeof l=="string")T=l,w=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(w)?(w=w>>>0,T===void 0&&(T="utf8")):(T=w,w=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var W=this.length-l;if((w===void 0||w>W)&&(w=W),c.length>0&&(w<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");T||(T="utf8");for(var Y=!1;;)switch(T){case"hex":return Q(this,c,l,w);case"utf8":case"utf-8":return ft(this,c,l,w);case"ascii":return Rt(this,c,l,w);case"latin1":case"binary":return pt(this,c,l,w);case"base64":return Dt(this,c,l,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return kt(this,c,l,w);default:if(Y)throw new TypeError("Unknown encoding: "+T);T=(""+T).toLowerCase(),Y=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function mt(g,c,l){return c===0&&l===g.length?j.fromByteArray(g):j.fromByteArray(g.slice(c,l))}function Xt(g,c,l){l=Math.min(g.length,l);for(var w=[],T=c;T<l;){var W=g[T],Y=null,xt=W>239?4:W>223?3:W>191?2:1;if(T+xt<=l){var Lt,Ct,qt,Tt;switch(xt){case 1:W<128&&(Y=W);break;case 2:Lt=g[T+1],(Lt&192)===128&&(Tt=(W&31)<<6|Lt&63,Tt>127&&(Y=Tt));break;case 3:Lt=g[T+1],Ct=g[T+2],(Lt&192)===128&&(Ct&192)===128&&(Tt=(W&15)<<12|(Lt&63)<<6|Ct&63,Tt>2047&&(Tt<55296||Tt>57343)&&(Y=Tt));break;case 4:Lt=g[T+1],Ct=g[T+2],qt=g[T+3],(Lt&192)===128&&(Ct&192)===128&&(qt&192)===128&&(Tt=(W&15)<<18|(Lt&63)<<12|(Ct&63)<<6|qt&63,Tt>65535&&Tt<1114112&&(Y=Tt))}}Y===null?(Y=65533,xt=1):Y>65535&&(Y-=65536,w.push(Y>>>10&1023|55296),Y=56320|Y&1023),w.push(Y),T+=xt}return P(w)}var U=4096;function P(g){var c=g.length;if(c<=U)return String.fromCharCode.apply(String,g);for(var l="",w=0;w<c;)l+=String.fromCharCode.apply(String,g.slice(w,w+=U));return l}function G(g,c,l){var w="";l=Math.min(g.length,l);for(var T=c;T<l;++T)w+=String.fromCharCode(g[T]&127);return w}function st(g,c,l){var w="";l=Math.min(g.length,l);for(var T=c;T<l;++T)w+=String.fromCharCode(g[T]);return w}function It(g,c,l){var w=g.length;(!c||c<0)&&(c=0),(!l||l<0||l>w)&&(l=w);for(var T="",W=c;W<l;++W)T+=X(g[W]);return T}function vt(g,c,l){for(var w=g.slice(c,l),T="",W=0;W<w.length;W+=2)T+=String.fromCharCode(w[W]+w[W+1]*256);return T}s.prototype.slice=function(c,l){var w=this.length;c=~~c,l=l===void 0?w:~~l,c<0?(c+=w,c<0&&(c=0)):c>w&&(c=w),l<0?(l+=w,l<0&&(l=0)):l>w&&(l=w),l<c&&(l=c);var T=this.subarray(c,l);return T.__proto__=s.prototype,T};function Et(g,c,l){if(g%1!==0||g<0)throw new RangeError("offset is not uint");if(g+c>l)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUIntLE=function(c,l,w){c=c>>>0,l=l>>>0,w||Et(c,l,this.length);for(var T=this[c],W=1,Y=0;++Y<l&&(W*=256);)T+=this[c+Y]*W;return T},s.prototype.readUIntBE=function(c,l,w){c=c>>>0,l=l>>>0,w||Et(c,l,this.length);for(var T=this[c+--l],W=1;l>0&&(W*=256);)T+=this[c+--l]*W;return T},s.prototype.readUInt8=function(c,l){return c=c>>>0,l||Et(c,1,this.length),this[c]},s.prototype.readUInt16LE=function(c,l){return c=c>>>0,l||Et(c,2,this.length),this[c]|this[c+1]<<8},s.prototype.readUInt16BE=function(c,l){return c=c>>>0,l||Et(c,2,this.length),this[c]<<8|this[c+1]},s.prototype.readUInt32LE=function(c,l){return c=c>>>0,l||Et(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216},s.prototype.readUInt32BE=function(c,l){return c=c>>>0,l||Et(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])},s.prototype.readIntLE=function(c,l,w){c=c>>>0,l=l>>>0,w||Et(c,l,this.length);for(var T=this[c],W=1,Y=0;++Y<l&&(W*=256);)T+=this[c+Y]*W;return W*=128,T>=W&&(T-=Math.pow(2,8*l)),T},s.prototype.readIntBE=function(c,l,w){c=c>>>0,l=l>>>0,w||Et(c,l,this.length);for(var T=l,W=1,Y=this[c+--T];T>0&&(W*=256);)Y+=this[c+--T]*W;return W*=128,Y>=W&&(Y-=Math.pow(2,8*l)),Y},s.prototype.readInt8=function(c,l){return c=c>>>0,l||Et(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]},s.prototype.readInt16LE=function(c,l){c=c>>>0,l||Et(c,2,this.length);var w=this[c]|this[c+1]<<8;return w&32768?w|4294901760:w},s.prototype.readInt16BE=function(c,l){c=c>>>0,l||Et(c,2,this.length);var w=this[c+1]|this[c]<<8;return w&32768?w|4294901760:w},s.prototype.readInt32LE=function(c,l){return c=c>>>0,l||Et(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},s.prototype.readInt32BE=function(c,l){return c=c>>>0,l||Et(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},s.prototype.readFloatLE=function(c,l){return c=c>>>0,l||Et(c,4,this.length),I.read(this,c,!0,23,4)},s.prototype.readFloatBE=function(c,l){return c=c>>>0,l||Et(c,4,this.length),I.read(this,c,!1,23,4)},s.prototype.readDoubleLE=function(c,l){return c=c>>>0,l||Et(c,8,this.length),I.read(this,c,!0,52,8)},s.prototype.readDoubleBE=function(c,l){return c=c>>>0,l||Et(c,8,this.length),I.read(this,c,!1,52,8)};function bt(g,c,l,w,T,W){if(!s.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>T||c<W)throw new RangeError('"value" argument is out of bounds');if(l+w>g.length)throw new RangeError("Index out of range")}s.prototype.writeUIntLE=function(c,l,w,T){if(c=+c,l=l>>>0,w=w>>>0,!T){var W=Math.pow(2,8*w)-1;bt(this,c,l,w,W,0)}var Y=1,xt=0;for(this[l]=c&255;++xt<w&&(Y*=256);)this[l+xt]=c/Y&255;return l+w},s.prototype.writeUIntBE=function(c,l,w,T){if(c=+c,l=l>>>0,w=w>>>0,!T){var W=Math.pow(2,8*w)-1;bt(this,c,l,w,W,0)}var Y=w-1,xt=1;for(this[l+Y]=c&255;--Y>=0&&(xt*=256);)this[l+Y]=c/xt&255;return l+w},s.prototype.writeUInt8=function(c,l,w){return c=+c,l=l>>>0,w||bt(this,c,l,1,255,0),this[l]=c&255,l+1},s.prototype.writeUInt16LE=function(c,l,w){return c=+c,l=l>>>0,w||bt(this,c,l,2,65535,0),this[l]=c&255,this[l+1]=c>>>8,l+2},s.prototype.writeUInt16BE=function(c,l,w){return c=+c,l=l>>>0,w||bt(this,c,l,2,65535,0),this[l]=c>>>8,this[l+1]=c&255,l+2},s.prototype.writeUInt32LE=function(c,l,w){return c=+c,l=l>>>0,w||bt(this,c,l,4,4294967295,0),this[l+3]=c>>>24,this[l+2]=c>>>16,this[l+1]=c>>>8,this[l]=c&255,l+4},s.prototype.writeUInt32BE=function(c,l,w){return c=+c,l=l>>>0,w||bt(this,c,l,4,4294967295,0),this[l]=c>>>24,this[l+1]=c>>>16,this[l+2]=c>>>8,this[l+3]=c&255,l+4},s.prototype.writeIntLE=function(c,l,w,T){if(c=+c,l=l>>>0,!T){var W=Math.pow(2,8*w-1);bt(this,c,l,w,W-1,-W)}var Y=0,xt=1,Lt=0;for(this[l]=c&255;++Y<w&&(xt*=256);)c<0&&Lt===0&&this[l+Y-1]!==0&&(Lt=1),this[l+Y]=(c/xt>>0)-Lt&255;return l+w},s.prototype.writeIntBE=function(c,l,w,T){if(c=+c,l=l>>>0,!T){var W=Math.pow(2,8*w-1);bt(this,c,l,w,W-1,-W)}var Y=w-1,xt=1,Lt=0;for(this[l+Y]=c&255;--Y>=0&&(xt*=256);)c<0&&Lt===0&&this[l+Y+1]!==0&&(Lt=1),this[l+Y]=(c/xt>>0)-Lt&255;return l+w},s.prototype.writeInt8=function(c,l,w){return c=+c,l=l>>>0,w||bt(this,c,l,1,127,-128),c<0&&(c=255+c+1),this[l]=c&255,l+1},s.prototype.writeInt16LE=function(c,l,w){return c=+c,l=l>>>0,w||bt(this,c,l,2,32767,-32768),this[l]=c&255,this[l+1]=c>>>8,l+2},s.prototype.writeInt16BE=function(c,l,w){return c=+c,l=l>>>0,w||bt(this,c,l,2,32767,-32768),this[l]=c>>>8,this[l+1]=c&255,l+2},s.prototype.writeInt32LE=function(c,l,w){return c=+c,l=l>>>0,w||bt(this,c,l,4,2147483647,-2147483648),this[l]=c&255,this[l+1]=c>>>8,this[l+2]=c>>>16,this[l+3]=c>>>24,l+4},s.prototype.writeInt32BE=function(c,l,w){return c=+c,l=l>>>0,w||bt(this,c,l,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[l]=c>>>24,this[l+1]=c>>>16,this[l+2]=c>>>8,this[l+3]=c&255,l+4};function zt(g,c,l,w,T,W){if(l+w>g.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function At(g,c,l,w,T){return c=+c,l=l>>>0,T||zt(g,c,l,4,34028234663852886e22,-34028234663852886e22),I.write(g,c,l,w,23,4),l+4}s.prototype.writeFloatLE=function(c,l,w){return At(this,c,l,!0,w)},s.prototype.writeFloatBE=function(c,l,w){return At(this,c,l,!1,w)};function $t(g,c,l,w,T){return c=+c,l=l>>>0,T||zt(g,c,l,8,17976931348623157e292,-17976931348623157e292),I.write(g,c,l,w,52,8),l+8}s.prototype.writeDoubleLE=function(c,l,w){return $t(this,c,l,!0,w)},s.prototype.writeDoubleBE=function(c,l,w){return $t(this,c,l,!1,w)},s.prototype.copy=function(c,l,w,T){if(w||(w=0),!T&&T!==0&&(T=this.length),l>=c.length&&(l=c.length),l||(l=0),T>0&&T<w&&(T=w),T===w||c.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(w<0||w>=this.length)throw new RangeError("sourceStart out of bounds");if(T<0)throw new RangeError("sourceEnd out of bounds");T>this.length&&(T=this.length),c.length-l<T-w&&(T=c.length-l+w);var W=T-w,Y;if(this===c&&w<l&&l<T)for(Y=W-1;Y>=0;--Y)c[Y+l]=this[Y+w];else if(W<1e3)for(Y=0;Y<W;++Y)c[Y+l]=this[Y+w];else Uint8Array.prototype.set.call(c,this.subarray(w,w+W),l);return W},s.prototype.fill=function(c,l,w,T){if(typeof c=="string"){if(typeof l=="string"?(T=l,l=0,w=this.length):typeof w=="string"&&(T=w,w=this.length),c.length===1){var W=c.charCodeAt(0);W<256&&(c=W)}if(T!==void 0&&typeof T!="string")throw new TypeError("encoding must be a string");if(typeof T=="string"&&!s.isEncoding(T))throw new TypeError("Unknown encoding: "+T)}else typeof c=="number"&&(c=c&255);if(l<0||this.length<l||this.length<w)throw new RangeError("Out of range index");if(w<=l)return this;l=l>>>0,w=w===void 0?this.length:w>>>0,c||(c=0);var Y;if(typeof c=="number")for(Y=l;Y<w;++Y)this[Y]=c;else{var xt=s.isBuffer(c)?c:new s(c,T),Lt=xt.length;for(Y=0;Y<w-l;++Y)this[Y+l]=xt[Y%Lt]}return this};var S=/[^+/0-9A-Za-z-_]/g;function _(g){if(g=g.trim().replace(S,""),g.length<2)return"";for(;g.length%4!==0;)g=g+"=";return g}function X(g){return g<16?"0"+g.toString(16):g.toString(16)}function K(g,c){c=c||1/0;for(var l,w=g.length,T=null,W=[],Y=0;Y<w;++Y){if(l=g.charCodeAt(Y),l>55295&&l<57344){if(!T){if(l>56319){(c-=3)>-1&&W.push(239,191,189);continue}else if(Y+1===w){(c-=3)>-1&&W.push(239,191,189);continue}T=l;continue}if(l<56320){(c-=3)>-1&&W.push(239,191,189),T=l;continue}l=(T-55296<<10|l-56320)+65536}else T&&(c-=3)>-1&&W.push(239,191,189);if(T=null,l<128){if((c-=1)<0)break;W.push(l)}else if(l<2048){if((c-=2)<0)break;W.push(l>>6|192,l&63|128)}else if(l<65536){if((c-=3)<0)break;W.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((c-=4)<0)break;W.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return W}function lt(g){for(var c=[],l=0;l<g.length;++l)c.push(g.charCodeAt(l)&255);return c}function rt(g,c){for(var l,w,T,W=[],Y=0;Y<g.length&&!((c-=2)<0);++Y)l=g.charCodeAt(Y),w=l>>8,T=l%256,W.push(T),W.push(w);return W}function _t(g){return j.toByteArray(_(g))}function yt(g,c,l,w){for(var T=0;T<w&&!(T+l>=c.length||T>=g.length);++T)c[T+l]=g[T];return T}function Yt(g){return g instanceof ArrayBuffer||g!=null&&g.constructor!=null&&g.constructor.name==="ArrayBuffer"&&typeof g.byteLength=="number"}function ae(g){return typeof ArrayBuffer.isView=="function"&&ArrayBuffer.isView(g)}function me(g){return g!==g}}).call(D,k(1))},function(et,D){"use strict";D.byteLength=s,D.toByteArray=v,D.fromByteArray=b;for(var k=[],R=[],j=typeof Uint8Array<"u"?Uint8Array:Array,I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O=0,F=I.length;O<F;++O)k[O]=I[O],R[I.charCodeAt(O)]=O;R["-".charCodeAt(0)]=62,R["_".charCodeAt(0)]=63;function d(m){var N=m.length;if(N%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return m[N-2]==="="?2:m[N-1]==="="?1:0}function s(m){return m.length*3/4-d(m)}function v(m){var N,A,q,H,C,St,$=m.length;C=d(m),St=new j($*3/4-C),q=C>0?$-4:$;var wt=0;for(N=0,A=0;N<q;N+=4,A+=3)H=R[m.charCodeAt(N)]<<18|R[m.charCodeAt(N+1)]<<12|R[m.charCodeAt(N+2)]<<6|R[m.charCodeAt(N+3)],St[wt++]=H>>16&255,St[wt++]=H>>8&255,St[wt++]=H&255;return C===2?(H=R[m.charCodeAt(N)]<<2|R[m.charCodeAt(N+1)]>>4,St[wt++]=H&255):C===1&&(H=R[m.charCodeAt(N)]<<10|R[m.charCodeAt(N+1)]<<4|R[m.charCodeAt(N+2)]>>2,St[wt++]=H>>8&255,St[wt++]=H&255),St}function f(m){return k[m>>18&63]+k[m>>12&63]+k[m>>6&63]+k[m&63]}function x(m,N,A){for(var q,H=[],C=N;C<A;C+=3)q=(m[C]<<16)+(m[C+1]<<8)+m[C+2],H.push(f(q));return H.join("")}function b(m){for(var N,A=m.length,q=A%3,H="",C=[],St=16383,$=0,wt=A-q;$<wt;$+=St)C.push(x(m,$,$+St>wt?wt:$+St));return q===1?(N=m[A-1],H+=k[N>>2],H+=k[N<<4&63],H+="=="):q===2&&(N=(m[A-2]<<8)+m[A-1],H+=k[N>>10],H+=k[N>>4&63],H+=k[N<<2&63],H+="="),C.push(H),C.join("")}},function(et,D){D.read=function(k,R,j,I,O){var F,d,s=O*8-I-1,v=(1<<s)-1,f=v>>1,x=-7,b=j?O-1:0,m=j?-1:1,N=k[R+b];for(b+=m,F=N&(1<<-x)-1,N>>=-x,x+=s;x>0;F=F*256+k[R+b],b+=m,x-=8);for(d=F&(1<<-x)-1,F>>=-x,x+=I;x>0;d=d*256+k[R+b],b+=m,x-=8);if(F===0)F=1-f;else{if(F===v)return d?NaN:(N?-1:1)*(1/0);d=d+Math.pow(2,I),F=F-f}return(N?-1:1)*d*Math.pow(2,F-I)},D.write=function(k,R,j,I,O,F){var d,s,v,f=F*8-O-1,x=(1<<f)-1,b=x>>1,m=O===23?Math.pow(2,-24)-Math.pow(2,-77):0,N=I?0:F-1,A=I?1:-1,q=R<0||R===0&&1/R<0?1:0;for(R=Math.abs(R),isNaN(R)||R===1/0?(s=isNaN(R)?1:0,d=x):(d=Math.floor(Math.log(R)/Math.LN2),R*(v=Math.pow(2,-d))<1&&(d--,v*=2),d+b>=1?R+=m/v:R+=m*Math.pow(2,1-b),R*v>=2&&(d++,v/=2),d+b>=x?(s=0,d=x):d+b>=1?(s=(R*v-1)*Math.pow(2,O),d=d+b):(s=R*Math.pow(2,b-1)*Math.pow(2,O),d=0));O>=8;k[j+N]=s&255,N+=A,s/=256,O-=8);for(d=d<<O|s,f+=O;f>0;k[j+N]=d&255,N+=A,d/=256,f-=8);k[j+N-A]|=q*128}},function(et,D){et.exports=function(k){return k.webpackPolyfill||(k.deprecate=function(){},k.paths=[],k.children=[],k.webpackPolyfill=1),k}},function(et,D,k){"use strict";var R=k(7),j=new R,I={};function O(d){I[d]||(typeof j[d]=="function"?I[d]=function(){return j[d].apply(j,arguments)}:I[d]=j[d])}for(var F in j)O(F);I.initializeTTYs=function(){j.stdin===null&&(j.initializeTTYs(),I.stdin=j.stdin,I.stdout=j.stdout,I.stderr=j.stderr)},j.nextTick(function(){I.initializeTTYs()}),et.exports=I},function(et,D,k){(function(R){"use strict";var j=this&&this.__extends||function(v,f){for(var x in f)f.hasOwnProperty(x)&&(v[x]=f[x]);function b(){this.constructor=v}v.prototype=f===null?Object.create(f):(b.prototype=f.prototype,new b)},I=k(8),O=null,F=function(){function v(f,x){this.fun=f,this.array=x}return v.prototype.run=function(){this.fun.apply(null,this.array)},v}(),d=function(){function v(){this._queue=[],this._draining=!1,this._currentQueue=null,this._queueIndex=-1}return v.prototype.push=function(f){var x=this;this._queue.push(f)===1&&!this._draining&&setTimeout(function(){return x._drainQueue()},0)},v.prototype._cleanUpNextTick=function(){this._draining=!1,this._currentQueue&&this._currentQueue.length?this._queue=this._currentQueue.concat(this._queue):this._queueIndex=-1,this._queue.length&&this._drainQueue()},v.prototype._drainQueue=function(){var f=this;if(!this._draining){var x=setTimeout(function(){return f._cleanUpNextTick()});this._draining=!0;for(var b=this._queue.length;b;){for(this._currentQueue=this._queue,this._queue=[];++this._queueIndex<b;)this._currentQueue&&this._currentQueue[this._queueIndex].run();this._queueIndex=-1,b=this._queue.length}this._currentQueue=null,this._draining=!1,clearTimeout(x)}},v}(),s=function(v){j(f,v);function f(){v.apply(this,arguments),this.startTime=Date.now(),this._cwd="/",this.platform="browser",this.argv=[],this.execArgv=[],this.stdout=null,this.stderr=null,this.stdin=null,this.domain=null,this._queue=new d,this.execPath=R,this.env={},this.exitCode=0,this._gid=1,this._uid=1,this.version="v5.0",this.versions={http_parser:"0.0",node:"5.0",v8:"0.0",uv:"0.0",zlib:"0.0",ares:"0.0",icu:"0.0",modules:"0",openssl:"0.0"},this.config={target_defaults:{cflags:[],default_configuration:"Release",defines:[],include_dirs:[],libraries:[]},variables:{clang:0,host_arch:"x32",node_install_npm:!1,node_install_waf:!1,node_prefix:"",node_shared_cares:!1,node_shared_http_parser:!1,node_shared_libuv:!1,node_shared_zlib:!1,node_shared_v8:!1,node_use_dtrace:!1,node_use_etw:!1,node_use_openssl:!1,node_shared_openssl:!1,strict_aliasing:!1,target_arch:"x32",v8_use_snapshot:!1,v8_no_strict_aliasing:0,visibility:""}},this.pid=Math.random()*1e3|0,this.title="node",this.arch="x32",this._mask=18,this.connected=void 0}return f.prototype.chdir=function(x){O===null&&(O=k(9)),this._cwd=O.resolve(x)},f.prototype.cwd=function(){return this._cwd},f.prototype.uptime=function(){return(Date.now()-this.startTime)/1e3|0},f.prototype.nextTick=function(x){for(var b=[],m=1;m<arguments.length;m++)b[m-1]=arguments[m];this._queue.push(new F(x,b))},f.prototype.abort=function(){this.emit("abort")},f.prototype.exit=function(x){this.exitCode=x,this.emit("exit",[x])},f.prototype.getgid=function(){return this._gid},f.prototype.setgid=function(x){typeof x=="number"?this._gid=x:this._gid=1},f.prototype.getuid=function(){return this._uid},f.prototype.setuid=function(x){typeof x=="number"?this._uid=x:this._uid=1},f.prototype.kill=function(x,b){this.emit("kill",[x,b])},f.prototype.memoryUsage=function(){return{rss:0,heapTotal:0,heapUsed:0}},f.prototype.umask=function(x){x===void 0&&(x=this._mask);var b=this._mask;return this._mask=x,this.emit("umask",[x]),b},f.prototype.hrtime=function(){var x;typeof performance<"u"?x=performance.now():Date.now?x=Date.now():x=new Date().getTime();var b=x/1e3|0;return x-=b*1e3,x=x*1e6|0,[b,x]},f.prototype.initializeTTYs=function(){if(this.stdout===null){var x=k(10);this.stdout=new x,this.stderr=new x,this.stdin=new x}},f.prototype.disconnect=function(){},f}(I.EventEmitter);et.exports=s}).call(D,"/")},function(et,D){function k(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}et.exports=k,k.EventEmitter=k,k.prototype._events=void 0,k.prototype._maxListeners=void 0,k.defaultMaxListeners=10,k.prototype.setMaxListeners=function(F){if(!j(F)||F<0||isNaN(F))throw TypeError("n must be a positive number");return this._maxListeners=F,this},k.prototype.emit=function(F){var d,s,v,f,x,b;if(this._events||(this._events={}),F==="error"&&(!this._events.error||I(this._events.error)&&!this._events.error.length)){if(d=arguments[1],d instanceof Error)throw d;var m=new Error('Uncaught, unspecified "error" event. ('+d+")");throw m.context=d,m}if(s=this._events[F],O(s))return!1;if(R(s))switch(arguments.length){case 1:s.call(this);break;case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:f=Array.prototype.slice.call(arguments,1),s.apply(this,f)}else if(I(s))for(f=Array.prototype.slice.call(arguments,1),b=s.slice(),v=b.length,x=0;x<v;x++)b[x].apply(this,f);return!0},k.prototype.addListener=function(F,d){var s;if(!R(d))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",F,R(d.listener)?d.listener:d),this._events[F]?I(this._events[F])?this._events[F].push(d):this._events[F]=[this._events[F],d]:this._events[F]=d,I(this._events[F])&&!this._events[F].warned&&(O(this._maxListeners)?s=k.defaultMaxListeners:s=this._maxListeners,s&&s>0&&this._events[F].length>s&&(this._events[F].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[F].length),typeof console.trace=="function"&&console.trace())),this},k.prototype.on=k.prototype.addListener,k.prototype.once=function(F,d){if(!R(d))throw TypeError("listener must be a function");var s=!1;function v(){this.removeListener(F,v),s||(s=!0,d.apply(this,arguments))}return v.listener=d,this.on(F,v),this},k.prototype.removeListener=function(F,d){var s,v,f,x;if(!R(d))throw TypeError("listener must be a function");if(!this._events||!this._events[F])return this;if(s=this._events[F],f=s.length,v=-1,s===d||R(s.listener)&&s.listener===d)delete this._events[F],this._events.removeListener&&this.emit("removeListener",F,d);else if(I(s)){for(x=f;x-- >0;)if(s[x]===d||s[x].listener&&s[x].listener===d){v=x;break}if(v<0)return this;s.length===1?(s.length=0,delete this._events[F]):s.splice(v,1),this._events.removeListener&&this.emit("removeListener",F,d)}return this},k.prototype.removeAllListeners=function(F){var d,s;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[F]&&delete this._events[F],this;if(arguments.length===0){for(d in this._events)d!=="removeListener"&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events={},this}if(s=this._events[F],R(s))this.removeListener(F,s);else if(s)for(;s.length;)this.removeListener(F,s[s.length-1]);return delete this._events[F],this},k.prototype.listeners=function(F){var d;return!this._events||!this._events[F]?d=[]:R(this._events[F])?d=[this._events[F]]:d=this._events[F].slice(),d},k.prototype.listenerCount=function(F){if(this._events){var d=this._events[F];if(R(d))return 1;if(d)return d.length}return 0},k.listenerCount=function(F,d){return F.listenerCount(d)};function R(F){return typeof F=="function"}function j(F){return typeof F=="number"}function I(F){return typeof F=="object"&&F!==null}function O(F){return F===void 0}},function(et,D,k){(function(R){"use strict";var j=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;function I(d){var s=j.exec(d);return s.shift(),s}var O=function(){function d(){}return d.normalize=function(s){s===""&&(s=".");var v=s.charAt(0)===d.sep;s=d._removeDuplicateSeps(s);for(var f=s.split(d.sep),x=[],b=0;b<f.length;b++){var m=f[b];m!=="."&&(m===".."&&(v||!v&&x.length>0&&x[0]!=="..")?x.pop():x.push(m))}if(!v&&x.length<2)switch(x.length){case 1:x[0]===""&&x.unshift(".");break;default:x.push(".")}return s=x.join(d.sep),v&&s.charAt(0)!==d.sep&&(s=d.sep+s),s},d.join=function(){for(var s=[],v=0;v<arguments.length;v++)s[v-0]=arguments[v];for(var f=[],x=0;x<s.length;x++){var b=s[x];if(typeof b!="string")throw new TypeError("Invalid argument type to path.join: "+typeof b);b!==""&&f.push(b)}return d.normalize(f.join(d.sep))},d.resolve=function(){for(var s=[],v=0;v<arguments.length;v++)s[v-0]=arguments[v];for(var f=[],x=0;x<s.length;x++){var b=s[x];if(typeof b!="string")throw new TypeError("Invalid argument type to path.join: "+typeof b);b!==""&&(b.charAt(0)===d.sep&&(f=[]),f.push(b))}var m=d.normalize(f.join(d.sep));if(m.length>1&&m.charAt(m.length-1)===d.sep)return m.substr(0,m.length-1);if(m.charAt(0)!==d.sep){m.charAt(0)==="."&&(m.length===1||m.charAt(1)===d.sep)&&(m=m.length===1?"":m.substr(2));var N=R.cwd();m!==""?m=this.normalize(N+(N!=="/"?d.sep:"")+m):m=N}return m},d.relative=function(s,v){var f;s=d.resolve(s),v=d.resolve(v);var x=s.split(d.sep),b=v.split(d.sep);b.shift(),x.shift();var m=0,N=[];for(f=0;f<x.length;f++){var A=x[f];if(A!==b[f]){m=x.length-f;break}}N=b.slice(f),x.length===1&&x[0]===""&&(m=0),m>x.length&&(m=x.length);var q="";for(f=0;f<m;f++)q+="../";return q+=N.join(d.sep),q.length>1&&q.charAt(q.length-1)===d.sep&&(q=q.substr(0,q.length-1)),q},d.dirname=function(s){s=d._removeDuplicateSeps(s);var v=s.charAt(0)===d.sep,f=s.split(d.sep);return f.pop()===""&&f.length>0&&f.pop(),f.length>1||f.length===1&&!v?f.join(d.sep):v?d.sep:"."},d.basename=function(s,v){if(v===void 0&&(v=""),s==="")return s;s=d.normalize(s);var f=s.split(d.sep),x=f[f.length-1];if(x===""&&f.length>1)return f[f.length-2];if(v.length>0){var b=x.substr(x.length-v.length);if(b===v)return x.substr(0,x.length-v.length)}return x},d.extname=function(s){s=d.normalize(s);var v=s.split(d.sep);if(s=v.pop(),s===""&&v.length>0&&(s=v.pop()),s==="..")return"";var f=s.lastIndexOf(".");return f===-1||f===0?"":s.substr(f)},d.isAbsolute=function(s){return s.length>0&&s.charAt(0)===d.sep},d._makeLong=function(s){return s},d.parse=function(s){var v=I(s);return{root:v[0],dir:v[0]+v[1].slice(0,-1),base:v[2],ext:v[3],name:v[2].slice(0,v[2].length-v[3].length)}},d.format=function(s){if(s===null||typeof s!="object")throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof s);var v=s.root||"";if(typeof v!="string")throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof s.root);var f=s.dir?s.dir+d.sep:"",x=s.base||"";return f+x},d._removeDuplicateSeps=function(s){return s=s.replace(this._replaceRegex,this.sep),s},d.sep="/",d._replaceRegex=new RegExp("//+","g"),d.delimiter=":",d.posix=d,d.win32=d,d}(),F=O;et.exports=O}).call(D,k(6))},function(et,D,k){(function(R){"use strict";var j=this&&this.__extends||function(F,d){for(var s in d)d.hasOwnProperty(s)&&(F[s]=d[s]);function v(){this.constructor=F}F.prototype=d===null?Object.create(d):(v.prototype=d.prototype,new v)},I=k(11),O=function(F){j(d,F);function d(){F.call(this),this.isRaw=!1,this.columns=80,this.rows=120,this.isTTY=!0,this._bufferedWrites=[],this._waitingForWrites=!1}return d.prototype.setRawMode=function(s){this.isRaw!==s&&(this.isRaw=s,this.emit("modeChange"))},d.prototype.changeColumns=function(s){s!==this.columns&&(this.columns=s,this.emit("resize"))},d.prototype.changeRows=function(s){s!==this.rows&&(this.rows=s,this.emit("resize"))},d.isatty=function(s){return s&&s instanceof d},d.prototype._write=function(s,v,f){var x;try{var b;typeof s=="string"?b=new R(s,v):b=s,this._bufferedWrites.push(b),this._waitingForWrites&&this._read(1024)}catch(m){x=m}finally{f(x)}},d.prototype._read=function(s){if(this._bufferedWrites.length===0)this._waitingForWrites=!0;else for(;this._bufferedWrites.length>0&&(this._waitingForWrites=this.push(this._bufferedWrites.shift()),!!this._waitingForWrites););},d}(I.Duplex);et.exports=O}).call(D,k(1))},function(et,D,k){et.exports=I;var R=k(8).EventEmitter,j=k(12);j(I,R),I.Readable=k(13),I.Writable=k(27),I.Duplex=k(28),I.Transform=k(29),I.PassThrough=k(30),I.Stream=I;function I(){R.call(this)}I.prototype.pipe=function(O,F){var d=this;function s(A){O.writable&&O.write(A)===!1&&d.pause&&d.pause()}d.on("data",s);function v(){d.readable&&d.resume&&d.resume()}O.on("drain",v),!O._isStdio&&(!F||F.end!==!1)&&(d.on("end",x),d.on("close",b));var f=!1;function x(){f||(f=!0,O.end())}function b(){f||(f=!0,typeof O.destroy=="function"&&O.destroy())}function m(A){if(N(),R.listenerCount(this,"error")===0)throw A}d.on("error",m),O.on("error",m);function N(){d.removeListener("data",s),O.removeListener("drain",v),d.removeListener("end",x),d.removeListener("close",b),d.removeListener("error",m),O.removeListener("error",m),d.removeListener("end",N),d.removeListener("close",N),O.removeListener("close",N)}return d.on("end",N),d.on("close",N),O.on("close",N),O.emit("pipe",d),O}},function(et,D){typeof Object.create=="function"?et.exports=function(R,j){R.super_=j,R.prototype=Object.create(j.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}})}:et.exports=function(R,j){R.super_=j;var I=function(){};I.prototype=j.prototype,R.prototype=new I,R.prototype.constructor=R}},function(et,D,k){(function(R){var j=function(){try{return k(11)}catch{}}();D=et.exports=k(14),D.Stream=j||D,D.Readable=D,D.Writable=k(22),D.Duplex=k(21),D.Transform=k(25),D.PassThrough=k(26),!R.browser&&R.env.READABLE_STREAM==="disable"&&j&&(et.exports=j)}).call(D,k(6))},function(et,D,k){(function(R){"use strict";et.exports=C;var j=k(15),I=k(16),O;C.ReadableState=H;var F=k(8).EventEmitter,d=function(S,_){return S.listeners(_).length},s;(function(){try{s=k(11)}catch{}finally{s||(s=k(8).EventEmitter)}})();var v=k(2).Buffer,f=k(17),x=k(18);x.inherits=k(12);var b=k(19),m=void 0;b&&b.debuglog?m=b.debuglog("stream"):m=function(){};var N=k(20),A;x.inherits(C,s);function q(S,_,X){if(typeof S.prependListener=="function")return S.prependListener(_,X);!S._events||!S._events[_]?S.on(_,X):I(S._events[_])?S._events[_].unshift(X):S._events[_]=[X,S._events[_]]}function H(S,_){O=O||k(21),S=S||{},this.objectMode=!!S.objectMode,_ instanceof O&&(this.objectMode=this.objectMode||!!S.readableObjectMode);var X=S.highWaterMark,K=this.objectMode?16:16*1024;this.highWaterMark=X||X===0?X:K,this.highWaterMark=~~this.highWaterMark,this.buffer=new N,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=S.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,S.encoding&&(A||(A=k(24).StringDecoder),this.decoder=new A(S.encoding),this.encoding=S.encoding)}function C(S){if(O=O||k(21),!(this instanceof C))return new C(S);this._readableState=new H(S,this),this.readable=!0,S&&typeof S.read=="function"&&(this._read=S.read),s.call(this)}C.prototype.push=function(S,_){var X=this._readableState;return!X.objectMode&&typeof S=="string"&&(_=_||X.defaultEncoding,_!==X.encoding&&(S=f.from(S,_),_="")),St(this,X,S,_,!1)},C.prototype.unshift=function(S){var _=this._readableState;return St(this,_,S,"",!0)},C.prototype.isPaused=function(){return this._readableState.flowing===!1};function St(S,_,X,K,lt){var rt=Q(_,X);if(rt)S.emit("error",rt);else if(X===null)_.reading=!1,ft(S,_);else if(_.objectMode||X&&X.length>0)if(_.ended&&!lt){var _t=new Error("stream.push() after EOF");S.emit("error",_t)}else if(_.endEmitted&&lt){var yt=new Error("stream.unshift() after end event");S.emit("error",yt)}else{var Yt;_.decoder&&!lt&&!K&&(X=_.decoder.write(X),Yt=!_.objectMode&&X.length===0),lt||(_.reading=!1),Yt||(_.flowing&&_.length===0&&!_.sync?(S.emit("data",X),S.read(0)):(_.length+=_.objectMode?1:X.length,lt?_.buffer.unshift(X):_.buffer.push(X),_.needReadable&&Rt(S))),Dt(S,_)}else lt||(_.reading=!1);return $(_)}function $(S){return!S.ended&&(S.needReadable||S.length<S.highWaterMark||S.length===0)}C.prototype.setEncoding=function(S){return A||(A=k(24).StringDecoder),this._readableState.decoder=new A(S),this._readableState.encoding=S,this};var wt=8388608;function ht(S){return S>=wt?S=wt:(S--,S|=S>>>1,S|=S>>>2,S|=S>>>4,S|=S>>>8,S|=S>>>16,S++),S}function M(S,_){return S<=0||_.length===0&&_.ended?0:_.objectMode?1:S!==S?_.flowing&&_.length?_.buffer.head.data.length:_.length:(S>_.highWaterMark&&(_.highWaterMark=ht(S)),S<=_.length?S:_.ended?_.length:(_.needReadable=!0,0))}C.prototype.read=function(S){m("read",S),S=parseInt(S,10);var _=this._readableState,X=S;if(S!==0&&(_.emittedReadable=!1),S===0&&_.needReadable&&(_.length>=_.highWaterMark||_.ended))return m("read: emitReadable",_.length,_.ended),_.length===0&&_.ended?bt(this):Rt(this),null;if(S=M(S,_),S===0&&_.ended)return _.length===0&&bt(this),null;var K=_.needReadable;m("need readable",K),(_.length===0||_.length-S<_.highWaterMark)&&(K=!0,m("length less than watermark",K)),_.ended||_.reading?(K=!1,m("reading or ended",K)):K&&(m("do read"),_.reading=!0,_.sync=!0,_.length===0&&(_.needReadable=!0),this._read(_.highWaterMark),_.sync=!1,_.reading||(S=M(X,_)));var lt;return S>0?lt=st(S,_):lt=null,lt===null?(_.needReadable=!0,S=0):_.length-=S,_.length===0&&(_.ended||(_.needReadable=!0),X!==S&&_.ended&&bt(this)),lt!==null&&this.emit("data",lt),lt};function Q(S,_){var X=null;return!v.isBuffer(_)&&typeof _!="string"&&_!==null&&_!==void 0&&!S.objectMode&&(X=new TypeError("Invalid non-string/buffer chunk")),X}function ft(S,_){if(!_.ended){if(_.decoder){var X=_.decoder.end();X&&X.length&&(_.buffer.push(X),_.length+=_.objectMode?1:X.length)}_.ended=!0,Rt(S)}}function Rt(S){var _=S._readableState;_.needReadable=!1,_.emittedReadable||(m("emitReadable",_.flowing),_.emittedReadable=!0,_.sync?j(pt,S):pt(S))}function pt(S){m("emit readable"),S.emit("readable"),G(S)}function Dt(S,_){_.readingMore||(_.readingMore=!0,j(kt,S,_))}function kt(S,_){for(var X=_.length;!_.reading&&!_.flowing&&!_.ended&&_.length<_.highWaterMark&&(m("maybeReadMore read 0"),S.read(0),X!==_.length);)X=_.length;_.readingMore=!1}C.prototype._read=function(S){this.emit("error",new Error("_read() is not implemented"))},C.prototype.pipe=function(S,_){var X=this,K=this._readableState;switch(K.pipesCount){case 0:K.pipes=S;break;case 1:K.pipes=[K.pipes,S];break;default:K.pipes.push(S);break}K.pipesCount+=1,m("pipe count=%d opts=%j",K.pipesCount,_);var lt=(!_||_.end!==!1)&&S!==R.stdout&&S!==R.stderr,rt=lt?yt:me;K.endEmitted?j(rt):X.once("end",rt),S.on("unpipe",_t);function _t(Y){m("onunpipe"),Y===X&&me()}function yt(){m("onend"),S.end()}var Yt=mt(X);S.on("drain",Yt);var ae=!1;function me(){m("cleanup"),S.removeListener("close",w),S.removeListener("finish",T),S.removeListener("drain",Yt),S.removeListener("error",l),S.removeListener("unpipe",_t),X.removeListener("end",yt),X.removeListener("end",me),X.removeListener("data",c),ae=!0,K.awaitDrain&&(!S._writableState||S._writableState.needDrain)&&Yt()}var g=!1;X.on("data",c);function c(Y){m("ondata"),g=!1;var xt=S.write(Y);xt===!1&&!g&&((K.pipesCount===1&&K.pipes===S||K.pipesCount>1&&$t(K.pipes,S)!==-1)&&!ae&&(m("false write response, pause",X._readableState.awaitDrain),X._readableState.awaitDrain++,g=!0),X.pause())}function l(Y){m("onerror",Y),W(),S.removeListener("error",l),d(S,"error")===0&&S.emit("error",Y)}q(S,"error",l);function w(){S.removeListener("finish",T),W()}S.once("close",w);function T(){m("onfinish"),S.removeListener("close",w),W()}S.once("finish",T);function W(){m("unpipe"),X.unpipe(S)}return S.emit("pipe",X),K.flowing||(m("pipe resume"),X.resume()),S};function mt(S){return function(){var _=S._readableState;m("pipeOnDrain",_.awaitDrain),_.awaitDrain&&_.awaitDrain--,_.awaitDrain===0&&d(S,"data")&&(_.flowing=!0,G(S))}}C.prototype.unpipe=function(S){var _=this._readableState;if(_.pipesCount===0)return this;if(_.pipesCount===1)return S&&S!==_.pipes?this:(S||(S=_.pipes),_.pipes=null,_.pipesCount=0,_.flowing=!1,S&&S.emit("unpipe",this),this);if(!S){var X=_.pipes,K=_.pipesCount;_.pipes=null,_.pipesCount=0,_.flowing=!1;for(var lt=0;lt<K;lt++)X[lt].emit("unpipe",this);return this}var rt=$t(_.pipes,S);return rt===-1?this:(_.pipes.splice(rt,1),_.pipesCount-=1,_.pipesCount===1&&(_.pipes=_.pipes[0]),S.emit("unpipe",this),this)},C.prototype.on=function(S,_){var X=s.prototype.on.call(this,S,_);if(S==="data")this._readableState.flowing!==!1&&this.resume();else if(S==="readable"){var K=this._readableState;!K.endEmitted&&!K.readableListening&&(K.readableListening=K.needReadable=!0,K.emittedReadable=!1,K.reading?K.length&&Rt(this,K):j(Xt,this))}return X},C.prototype.addListener=C.prototype.on;function Xt(S){m("readable nexttick read 0"),S.read(0)}C.prototype.resume=function(){var S=this._readableState;return S.flowing||(m("resume"),S.flowing=!0,U(this,S)),this};function U(S,_){_.resumeScheduled||(_.resumeScheduled=!0,j(P,S,_))}function P(S,_){_.reading||(m("resume read 0"),S.read(0)),_.resumeScheduled=!1,_.awaitDrain=0,S.emit("resume"),G(S),_.flowing&&!_.reading&&S.read(0)}C.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function G(S){var _=S._readableState;for(m("flow",_.flowing);_.flowing&&S.read()!==null;);}C.prototype.wrap=function(S){var _=this._readableState,X=!1,K=this;S.on("end",function(){if(m("wrapped end"),_.decoder&&!_.ended){var _t=_.decoder.end();_t&&_t.length&&K.push(_t)}K.push(null)}),S.on("data",function(_t){if(m("wrapped data"),_.decoder&&(_t=_.decoder.write(_t)),!(_.objectMode&&_t==null)&&!(!_.objectMode&&(!_t||!_t.length))){var yt=K.push(_t);yt||(X=!0,S.pause())}});for(var lt in S)this[lt]===void 0&&typeof S[lt]=="function"&&(this[lt]=function(_t){return function(){return S[_t].apply(S,arguments)}}(lt));var rt=["error","close","destroy","pause","resume"];return At(rt,function(_t){S.on(_t,K.emit.bind(K,_t))}),K._read=function(_t){m("wrapped _read",_t),X&&(X=!1,S.resume())},K},C._fromList=st;function st(S,_){if(_.length===0)return null;var X;return _.objectMode?X=_.buffer.shift():!S||S>=_.length?(_.decoder?X=_.buffer.join(""):_.buffer.length===1?X=_.buffer.head.data:X=_.buffer.concat(_.length),_.buffer.clear()):X=It(S,_.buffer,_.decoder),X}function It(S,_,X){var K;return S<_.head.data.length?(K=_.head.data.slice(0,S),_.head.data=_.head.data.slice(S)):S===_.head.data.length?K=_.shift():K=X?vt(S,_):Et(S,_),K}function vt(S,_){var X=_.head,K=1,lt=X.data;for(S-=lt.length;X=X.next;){var rt=X.data,_t=S>rt.length?rt.length:S;if(_t===rt.length?lt+=rt:lt+=rt.slice(0,S),S-=_t,S===0){_t===rt.length?(++K,X.next?_.head=X.next:_.head=_.tail=null):(_.head=X,X.data=rt.slice(_t));break}++K}return _.length-=K,lt}function Et(S,_){var X=f.allocUnsafe(S),K=_.head,lt=1;for(K.data.copy(X),S-=K.data.length;K=K.next;){var rt=K.data,_t=S>rt.length?rt.length:S;if(rt.copy(X,X.length-S,0,_t),S-=_t,S===0){_t===rt.length?(++lt,K.next?_.head=K.next:_.head=_.tail=null):(_.head=K,K.data=rt.slice(_t));break}++lt}return _.length-=lt,X}function bt(S){var _=S._readableState;if(_.length>0)throw new Error('"endReadable()" called on non-empty stream');_.endEmitted||(_.ended=!0,j(zt,_,S))}function zt(S,_){!S.endEmitted&&S.length===0&&(S.endEmitted=!0,_.readable=!1,_.emit("end"))}function At(S,_){for(var X=0,K=S.length;X<K;X++)_(S[X],X)}function $t(S,_){for(var X=0,K=S.length;X<K;X++)if(S[X]===_)return X;return-1}}).call(D,k(6))},function(et,D,k){(function(R){"use strict";!R.version||R.version.indexOf("v0.")===0||R.version.indexOf("v1.")===0&&R.version.indexOf("v1.8.")!==0?et.exports=j:et.exports=R.nextTick;function j(I,O,F,d){if(typeof I!="function")throw new TypeError('"callback" argument must be a function');var s=arguments.length,v,f;switch(s){case 0:case 1:return R.nextTick(I);case 2:return R.nextTick(function(){I.call(null,O)});case 3:return R.nextTick(function(){I.call(null,O,F)});case 4:return R.nextTick(function(){I.call(null,O,F,d)});default:for(v=new Array(s-1),f=0;f<v.length;)v[f++]=arguments[f];return R.nextTick(function(){I.apply(null,v)})}}}).call(D,k(6))},function(et,D){var k={}.toString;et.exports=Array.isArray||function(R){return k.call(R)=="[object Array]"}},function(et,D,k){(function(R){"use strict";var j=k(2),I=j.Buffer,O=j.SlowBuffer,F=j.kMaxLength||2147483647;D.alloc=function(s,v,f){if(typeof I.alloc=="function")return I.alloc(s,v,f);if(typeof f=="number")throw new TypeError("encoding must not be number");if(typeof s!="number")throw new TypeError("size must be a number");if(s>F)throw new RangeError("size is too large");var x=f,b=v;b===void 0&&(x=void 0,b=0);var m=new I(s);if(typeof b=="string")for(var N=new I(b,x),A=N.length,q=-1;++q<s;)m[q]=N[q%A];else m.fill(b);return m},D.allocUnsafe=function(s){if(typeof I.allocUnsafe=="function")return I.allocUnsafe(s);if(typeof s!="number")throw new TypeError("size must be a number");if(s>F)throw new RangeError("size is too large");return new I(s)},D.from=function(s,v,f){if(typeof I.from=="function"&&(!R.Uint8Array||Uint8Array.from!==I.from))return I.from(s,v,f);if(typeof s=="number")throw new TypeError('"value" argument must not be a number');if(typeof s=="string")return new I(s,v);if(typeof ArrayBuffer<"u"&&s instanceof ArrayBuffer){var x=v;if(arguments.length===1)return new I(s);typeof x>"u"&&(x=0);var b=f;if(typeof b>"u"&&(b=s.byteLength-x),x>=s.byteLength)throw new RangeError("'offset' is out of bounds");if(b>s.byteLength-x)throw new RangeError("'length' is out of bounds");return new I(s.slice(x,x+b))}if(I.isBuffer(s)){var m=new I(s.length);return s.copy(m,0,0,s.length),m}if(s){if(Array.isArray(s)||typeof ArrayBuffer<"u"&&s.buffer instanceof ArrayBuffer||"length"in s)return new I(s);if(s.type==="Buffer"&&Array.isArray(s.data))return new I(s.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},D.allocUnsafeSlow=function(s){if(typeof I.allocUnsafeSlow=="function")return I.allocUnsafeSlow(s);if(typeof s!="number")throw new TypeError("size must be a number");if(s>=F)throw new RangeError("size is too large");return new O(s)}}).call(D,function(){return this}())},function(et,D,k){(function(R){function j(C){return Array.isArray?Array.isArray(C):H(C)==="[object Array]"}D.isArray=j;function I(C){return typeof C=="boolean"}D.isBoolean=I;function O(C){return C===null}D.isNull=O;function F(C){return C==null}D.isNullOrUndefined=F;function d(C){return typeof C=="number"}D.isNumber=d;function s(C){return typeof C=="string"}D.isString=s;function v(C){return typeof C=="symbol"}D.isSymbol=v;function f(C){return C===void 0}D.isUndefined=f;function x(C){return H(C)==="[object RegExp]"}D.isRegExp=x;function b(C){return typeof C=="object"&&C!==null}D.isObject=b;function m(C){return H(C)==="[object Date]"}D.isDate=m;function N(C){return H(C)==="[object Error]"||C instanceof Error}D.isError=N;function A(C){return typeof C=="function"}D.isFunction=A;function q(C){return C===null||typeof C=="boolean"||typeof C=="number"||typeof C=="string"||typeof C=="symbol"||typeof C>"u"}D.isPrimitive=q,D.isBuffer=R.isBuffer;function H(C){return Object.prototype.toString.call(C)}}).call(D,k(1))},function(et,D){},function(et,D,k){"use strict";var R=k(2).Buffer,j=k(17);et.exports=I;function I(){this.head=null,this.tail=null,this.length=0}I.prototype.push=function(O){var F={data:O,next:null};this.length>0?this.tail.next=F:this.head=F,this.tail=F,++this.length},I.prototype.unshift=function(O){var F={data:O,next:this.head};this.length===0&&(this.tail=F),this.head=F,++this.length},I.prototype.shift=function(){if(this.length!==0){var O=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,O}},I.prototype.clear=function(){this.head=this.tail=null,this.length=0},I.prototype.join=function(O){if(this.length===0)return"";for(var F=this.head,d=""+F.data;F=F.next;)d+=O+F.data;return d},I.prototype.concat=function(O){if(this.length===0)return j.alloc(0);if(this.length===1)return this.head.data;for(var F=j.allocUnsafe(O>>>0),d=this.head,s=0;d;)d.data.copy(F,s),s+=d.data.length,d=d.next;return F}},function(et,D,k){"use strict";var R=Object.keys||function(N){var A=[];for(var q in N)A.push(q);return A};et.exports=f;var j=k(15),I=k(18);I.inherits=k(12);var O=k(14),F=k(22);I.inherits(f,O);for(var d=R(F.prototype),s=0;s<d.length;s++){var v=d[s];f.prototype[v]||(f.prototype[v]=F.prototype[v])}function f(N){if(!(this instanceof f))return new f(N);O.call(this,N),F.call(this,N),N&&N.readable===!1&&(this.readable=!1),N&&N.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,N&&N.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",x)}function x(){this.allowHalfOpen||this._writableState.ended||j(b,this)}function b(N){N.end()}function m(N,A){for(var q=0,H=N.length;q<H;q++)A(N[q],q)}},function(et,D,k){(function(R){"use strict";et.exports=A;var j=k(15),I=!R.browser&&["v0.10","v0.9."].indexOf(R.version.slice(0,5))>-1?setImmediate:j,O;A.WritableState=m;var F=k(18);F.inherits=k(12);var d={deprecate:k(23)},s;(function(){try{s=k(11)}catch{}finally{s||(s=k(8).EventEmitter)}})();var v=k(2).Buffer,f=k(17);F.inherits(A,s);function x(){}function b(U,P,G){this.chunk=U,this.encoding=P,this.callback=G,this.next=null}function m(U,P){O=O||k(21),U=U||{},this.objectMode=!!U.objectMode,P instanceof O&&(this.objectMode=this.objectMode||!!U.writableObjectMode);var G=U.highWaterMark,st=this.objectMode?16:16*1024;this.highWaterMark=G||G===0?G:st,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var It=U.decodeStrings===!1;this.decodeStrings=!It,this.defaultEncoding=U.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(vt){M(P,vt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Xt(this)}m.prototype.getBuffer=function(){for(var P=this.bufferedRequest,G=[];P;)G.push(P),P=P.next;return G},function(){try{Object.defineProperty(m.prototype,"buffer",{get:d.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch{}}();var N;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(N=Function.prototype[Symbol.hasInstance],Object.defineProperty(A,Symbol.hasInstance,{value:function(U){return N.call(this,U)?!0:U&&U._writableState instanceof m}})):N=function(U){return U instanceof this};function A(U){if(O=O||k(21),!N.call(A,this)&&!(this instanceof O))return new A(U);this._writableState=new m(U,this),this.writable=!0,U&&(typeof U.write=="function"&&(this._write=U.write),typeof U.writev=="function"&&(this._writev=U.writev)),s.call(this)}A.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function q(U,P){var G=new Error("write after end");U.emit("error",G),j(P,G)}function H(U,P,G,st){var It=!0,vt=!1;return G===null?vt=new TypeError("May not write null values to stream"):typeof G!="string"&&G!==void 0&&!P.objectMode&&(vt=new TypeError("Invalid non-string/buffer chunk")),vt&&(U.emit("error",vt),j(st,vt),It=!1),It}A.prototype.write=function(U,P,G){var st=this._writableState,It=!1,vt=v.isBuffer(U);return typeof P=="function"&&(G=P,P=null),vt?P="buffer":P||(P=st.defaultEncoding),typeof G!="function"&&(G=x),st.ended?q(this,G):(vt||H(this,st,U,G))&&(st.pendingcb++,It=St(this,st,vt,U,P,G)),It},A.prototype.cork=function(){var U=this._writableState;U.corked++},A.prototype.uncork=function(){var U=this._writableState;U.corked&&(U.corked--,!U.writing&&!U.corked&&!U.finished&&!U.bufferProcessing&&U.bufferedRequest&&Rt(this,U))},A.prototype.setDefaultEncoding=function(P){if(typeof P=="string"&&(P=P.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((P+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+P);return this._writableState.defaultEncoding=P,this};function C(U,P,G){return!U.objectMode&&U.decodeStrings!==!1&&typeof P=="string"&&(P=f.from(P,G)),P}function St(U,P,G,st,It,vt){G||(st=C(P,st,It),v.isBuffer(st)&&(It="buffer"));var Et=P.objectMode?1:st.length;P.length+=Et;var bt=P.length<P.highWaterMark;if(bt||(P.needDrain=!0),P.writing||P.corked){var zt=P.lastBufferedRequest;P.lastBufferedRequest=new b(st,It,vt),zt?zt.next=P.lastBufferedRequest:P.bufferedRequest=P.lastBufferedRequest,P.bufferedRequestCount+=1}else $(U,P,!1,Et,st,It,vt);return bt}function $(U,P,G,st,It,vt,Et){P.writelen=st,P.writecb=Et,P.writing=!0,P.sync=!0,G?U._writev(It,P.onwrite):U._write(It,vt,P.onwrite),P.sync=!1}function wt(U,P,G,st,It){--P.pendingcb,G?j(It,st):It(st),U._writableState.errorEmitted=!0,U.emit("error",st)}function ht(U){U.writing=!1,U.writecb=null,U.length-=U.writelen,U.writelen=0}function M(U,P){var G=U._writableState,st=G.sync,It=G.writecb;if(ht(G),P)wt(U,G,st,P,It);else{var vt=pt(G);!vt&&!G.corked&&!G.bufferProcessing&&G.bufferedRequest&&Rt(U,G),st?I(Q,U,G,vt,It):Q(U,G,vt,It)}}function Q(U,P,G,st){G||ft(U,P),P.pendingcb--,st(),kt(U,P)}function ft(U,P){P.length===0&&P.needDrain&&(P.needDrain=!1,U.emit("drain"))}function Rt(U,P){P.bufferProcessing=!0;var G=P.bufferedRequest;if(U._writev&&G&&G.next){var st=P.bufferedRequestCount,It=new Array(st),vt=P.corkedRequestsFree;vt.entry=G;for(var Et=0;G;)It[Et]=G,G=G.next,Et+=1;$(U,P,!0,P.length,It,"",vt.finish),P.pendingcb++,P.lastBufferedRequest=null,vt.next?(P.corkedRequestsFree=vt.next,vt.next=null):P.corkedRequestsFree=new Xt(P)}else{for(;G;){var bt=G.chunk,zt=G.encoding,At=G.callback,$t=P.objectMode?1:bt.length;if($(U,P,!1,$t,bt,zt,At),G=G.next,P.writing)break}G===null&&(P.lastBufferedRequest=null)}P.bufferedRequestCount=0,P.bufferedRequest=G,P.bufferProcessing=!1}A.prototype._write=function(U,P,G){G(new Error("_write() is not implemented"))},A.prototype._writev=null,A.prototype.end=function(U,P,G){var st=this._writableState;typeof U=="function"?(G=U,U=null,P=null):typeof P=="function"&&(G=P,P=null),U!=null&&this.write(U,P),st.corked&&(st.corked=1,this.uncork()),!st.ending&&!st.finished&&mt(this,st,G)};function pt(U){return U.ending&&U.length===0&&U.bufferedRequest===null&&!U.finished&&!U.writing}function Dt(U,P){P.prefinished||(P.prefinished=!0,U.emit("prefinish"))}function kt(U,P){var G=pt(P);return G&&(P.pendingcb===0?(Dt(U,P),P.finished=!0,U.emit("finish")):Dt(U,P)),G}function mt(U,P,G){P.ending=!0,kt(U,P),G&&(P.finished?j(G):U.once("finish",G)),P.ended=!0,U.writable=!1}function Xt(U){var P=this;this.next=null,this.entry=null,this.finish=function(G){var st=P.entry;for(P.entry=null;st;){var It=st.callback;U.pendingcb--,It(G),st=st.next}U.corkedRequestsFree?U.corkedRequestsFree.next=P:U.corkedRequestsFree=P}}}).call(D,k(6))},function(et,D){(function(k){et.exports=R;function R(I,O){if(j("noDeprecation"))return I;var F=!1;function d(){if(!F){if(j("throwDeprecation"))throw new Error(O);j("traceDeprecation")?console.trace(O):console.warn(O),F=!0}return I.apply(this,arguments)}return d}function j(I){try{if(!k.localStorage)return!1}catch{return!1}var O=k.localStorage[I];return O==null?!1:String(O).toLowerCase()==="true"}}).call(D,function(){return this}())},function(et,D,k){var R=k(2).Buffer,j=R.isEncoding||function(v){switch(v&&v.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function I(v){if(v&&!j(v))throw new Error("Unknown encoding: "+v)}var O=D.StringDecoder=function(v){switch(this.encoding=(v||"utf8").toLowerCase().replace(/[-_]/,""),I(v),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=d;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:this.write=F;return}this.charBuffer=new R(6),this.charReceived=0,this.charLength=0};O.prototype.write=function(v){for(var f="";this.charLength;){var x=v.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:v.length;if(v.copy(this.charBuffer,this.charReceived,0,x),this.charReceived+=x,this.charReceived<this.charLength)return"";v=v.slice(x,v.length),f=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var m=f.charCodeAt(f.length-1);if(m>=55296&&m<=56319){this.charLength+=this.surrogateSize,f="";continue}if(this.charReceived=this.charLength=0,v.length===0)return f;break}this.detectIncompleteChar(v);var b=v.length;this.charLength&&(v.copy(this.charBuffer,0,v.length-this.charReceived,b),b-=this.charReceived),f+=v.toString(this.encoding,0,b);var b=f.length-1,m=f.charCodeAt(b);if(m>=55296&&m<=56319){var N=this.surrogateSize;return this.charLength+=N,this.charReceived+=N,this.charBuffer.copy(this.charBuffer,N,0,N),v.copy(this.charBuffer,0,0,N),f.substring(0,b)}return f},O.prototype.detectIncompleteChar=function(v){for(var f=v.length>=3?3:v.length;f>0;f--){var x=v[v.length-f];if(f==1&&x>>5==6){this.charLength=2;break}if(f<=2&&x>>4==14){this.charLength=3;break}if(f<=3&&x>>3==30){this.charLength=4;break}}this.charReceived=f},O.prototype.end=function(v){var f="";if(v&&v.length&&(f=this.write(v)),this.charReceived){var x=this.charReceived,b=this.charBuffer,m=this.encoding;f+=b.slice(0,x).toString(m)}return f};function F(v){return v.toString(this.encoding)}function d(v){this.charReceived=v.length%2,this.charLength=this.charReceived?2:0}function s(v){this.charReceived=v.length%3,this.charLength=this.charReceived?3:0}},function(et,D,k){"use strict";et.exports=F;var R=k(21),j=k(18);j.inherits=k(12),j.inherits(F,R);function I(s){this.afterTransform=function(v,f){return O(s,v,f)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function O(s,v,f){var x=s._transformState;x.transforming=!1;var b=x.writecb;if(!b)return s.emit("error",new Error("no writecb in Transform class"));x.writechunk=null,x.writecb=null,f!=null&&s.push(f),b(v);var m=s._readableState;m.reading=!1,(m.needReadable||m.length<m.highWaterMark)&&s._read(m.highWaterMark)}function F(s){if(!(this instanceof F))return new F(s);R.call(this,s),this._transformState=new I(this);var v=this;this._readableState.needReadable=!0,this._readableState.sync=!1,s&&(typeof s.transform=="function"&&(this._transform=s.transform),typeof s.flush=="function"&&(this._flush=s.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(f,x){d(v,f,x)}):d(v)})}F.prototype.push=function(s,v){return this._transformState.needTransform=!1,R.prototype.push.call(this,s,v)},F.prototype._transform=function(s,v,f){throw new Error("_transform() is not implemented")},F.prototype._write=function(s,v,f){var x=this._transformState;if(x.writecb=f,x.writechunk=s,x.writeencoding=v,!x.transforming){var b=this._readableState;(x.needTransform||b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}},F.prototype._read=function(s){var v=this._transformState;v.writechunk!==null&&v.writecb&&!v.transforming?(v.transforming=!0,this._transform(v.writechunk,v.writeencoding,v.afterTransform)):v.needTransform=!0};function d(s,v,f){if(v)return s.emit("error",v);f!=null&&s.push(f);var x=s._writableState,b=s._transformState;if(x.length)throw new Error("Calling transform done when ws.length != 0");if(b.transforming)throw new Error("Calling transform done when still transforming");return s.push(null)}},function(et,D,k){"use strict";et.exports=I;var R=k(25),j=k(18);j.inherits=k(12),j.inherits(I,R);function I(O){if(!(this instanceof I))return new I(O);R.call(this,O)}I.prototype._transform=function(O,F,d){d(null,O)}},function(et,D,k){et.exports=k(22)},function(et,D,k){et.exports=k(21)},function(et,D,k){et.exports=k(25)},function(et,D,k){et.exports=k(26)},function(et,D,k){"use strict";var R=k(32),j=k(33),I=k(38),O=k(39),F=k(40),d=k(41),s=k(42),v=Object.prototype.toString;function f(m){if(!(this instanceof f))return new f(m);this.options=j.assign({chunkSize:16384,windowBits:0,to:""},m||{});var N=this.options;N.raw&&N.windowBits>=0&&N.windowBits<16&&(N.windowBits=-N.windowBits,N.windowBits===0&&(N.windowBits=-15)),N.windowBits>=0&&N.windowBits<16&&!(m&&m.windowBits)&&(N.windowBits+=32),N.windowBits>15&&N.windowBits<48&&(N.windowBits&15)===0&&(N.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var A=R.inflateInit2(this.strm,N.windowBits);if(A!==O.Z_OK)throw new Error(F[A]);this.header=new s,R.inflateGetHeader(this.strm,this.header)}f.prototype.push=function(m,N){var A=this.strm,q=this.options.chunkSize,H=this.options.dictionary,C,St,$,wt,ht,M,Q=!1;if(this.ended)return!1;St=N===~~N?N:N===!0?O.Z_FINISH:O.Z_NO_FLUSH,typeof m=="string"?A.input=I.binstring2buf(m):v.call(m)==="[object ArrayBuffer]"?A.input=new Uint8Array(m):A.input=m,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new j.Buf8(q),A.next_out=0,A.avail_out=q),C=R.inflate(A,O.Z_NO_FLUSH),C===O.Z_NEED_DICT&&H&&(typeof H=="string"?M=I.string2buf(H):v.call(H)==="[object ArrayBuffer]"?M=new Uint8Array(H):M=H,C=R.inflateSetDictionary(this.strm,M)),C===O.Z_BUF_ERROR&&Q===!0&&(C=O.Z_OK,Q=!1),C!==O.Z_STREAM_END&&C!==O.Z_OK)return this.onEnd(C),this.ended=!0,!1;A.next_out&&(A.avail_out===0||C===O.Z_STREAM_END||A.avail_in===0&&(St===O.Z_FINISH||St===O.Z_SYNC_FLUSH))&&(this.options.to==="string"?($=I.utf8border(A.output,A.next_out),wt=A.next_out-$,ht=I.buf2string(A.output,$),A.next_out=wt,A.avail_out=q-wt,wt&&j.arraySet(A.output,A.output,$,wt,0),this.onData(ht)):this.onData(j.shrinkBuf(A.output,A.next_out))),A.avail_in===0&&A.avail_out===0&&(Q=!0)}while((A.avail_in>0||A.avail_out===0)&&C!==O.Z_STREAM_END);return C===O.Z_STREAM_END&&(St=O.Z_FINISH),St===O.Z_FINISH?(C=R.inflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===O.Z_OK):(St===O.Z_SYNC_FLUSH&&(this.onEnd(O.Z_OK),A.avail_out=0),!0)},f.prototype.onData=function(m){this.chunks.push(m)},f.prototype.onEnd=function(m){m===O.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=j.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg};function x(m,N){var A=new f(N);if(A.push(m,!0),A.err)throw A.msg||F[A.err];return A.result}function b(m,N){return N=N||{},N.raw=!0,x(m,N)}D.Inflate=f,D.inflate=x,D.inflateRaw=b,D.ungzip=x},function(et,D,k){"use strict";var R=k(33),j=k(34),I=k(35),O=k(36),F=k(37),d=0,s=1,v=2,f=4,x=5,b=6,m=0,N=1,A=2,q=-2,H=-3,C=-4,St=-5,$=8,wt=1,ht=2,M=3,Q=4,ft=5,Rt=6,pt=7,Dt=8,kt=9,mt=10,Xt=11,U=12,P=13,G=14,st=15,It=16,vt=17,Et=18,bt=19,zt=20,At=21,$t=22,S=23,_=24,X=25,K=26,lt=27,rt=28,_t=29,yt=30,Yt=31,ae=32,me=852,g=592,c=15,l=c;function w(B){return(B>>>24&255)+(B>>>8&65280)+((B&65280)<<8)+((B&255)<<24)}function T(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new R.Buf16(320),this.work=new R.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function W(B){var it;return!B||!B.state?q:(it=B.state,B.total_in=B.total_out=it.total=0,B.msg="",it.wrap&&(B.adler=it.wrap&1),it.mode=wt,it.last=0,it.havedict=0,it.dmax=32768,it.head=null,it.hold=0,it.bits=0,it.lencode=it.lendyn=new R.Buf32(me),it.distcode=it.distdyn=new R.Buf32(g),it.sane=1,it.back=-1,m)}function Y(B){var it;return!B||!B.state?q:(it=B.state,it.wsize=0,it.whave=0,it.wnext=0,W(B))}function xt(B,it){var y,at;return!B||!B.state||(at=B.state,it<0?(y=0,it=-it):(y=(it>>4)+1,it<48&&(it&=15)),it&&(it<8||it>15))?q:(at.window!==null&&at.wbits!==it&&(at.window=null),at.wrap=y,at.wbits=it,Y(B))}function Lt(B,it){var y,at;return B?(at=new T,B.state=at,at.window=null,y=xt(B,it),y!==m&&(B.state=null),y):q}function Ct(B){return Lt(B,l)}var qt=!0,Tt,Se;function Xe(B){if(qt){var it;for(Tt=new R.Buf32(512),Se=new R.Buf32(32),it=0;it<144;)B.lens[it++]=8;for(;it<256;)B.lens[it++]=9;for(;it<280;)B.lens[it++]=7;for(;it<288;)B.lens[it++]=8;for(F(s,B.lens,0,288,Tt,0,B.work,{bits:9}),it=0;it<32;)B.lens[it++]=5;F(v,B.lens,0,32,Se,0,B.work,{bits:5}),qt=!1}B.lencode=Tt,B.lenbits=9,B.distcode=Se,B.distbits=5}function Ce(B,it,y,at){var Mt,nt=B.state;return nt.window===null&&(nt.wsize=1<<nt.wbits,nt.wnext=0,nt.whave=0,nt.window=new R.Buf8(nt.wsize)),at>=nt.wsize?(R.arraySet(nt.window,it,y-nt.wsize,nt.wsize,0),nt.wnext=0,nt.whave=nt.wsize):(Mt=nt.wsize-nt.wnext,Mt>at&&(Mt=at),R.arraySet(nt.window,it,y-at,Mt,nt.wnext),at-=Mt,at?(R.arraySet(nt.window,it,y-at,at,0),nt.wnext=at,nt.whave=nt.wsize):(nt.wnext+=Mt,nt.wnext===nt.wsize&&(nt.wnext=0),nt.whave<nt.wsize&&(nt.whave+=Mt))),0}function Me(B,it){var y,at,Mt,nt,se,ot,Gt,V,Z,Ye,Ut,ct,Ue,Re,jt=0,Ot,ee,oe,re,qe,Pe,Zt,ue,te=new R.Buf8(4),_e,ve,vr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!B||!B.state||!B.output||!B.input&&B.avail_in!==0)return q;y=B.state,y.mode===U&&(y.mode=P),se=B.next_out,Mt=B.output,Gt=B.avail_out,nt=B.next_in,at=B.input,ot=B.avail_in,V=y.hold,Z=y.bits,Ye=ot,Ut=Gt,ue=m;t:for(;;)switch(y.mode){case wt:if(y.wrap===0){y.mode=P;break}for(;Z<16;){if(ot===0)break t;ot--,V+=at[nt++]<<Z,Z+=8}if(y.wrap&2&&V===35615){y.check=0,te[0]=V&255,te[1]=V>>>8&255,y.check=I(y.check,te,2,0),V=0,Z=0,y.mode=ht;break}if(y.flags=0,y.head&&(y.head.done=!1),!(y.wrap&1)||(((V&255)<<8)+(V>>8))%31){B.msg="incorrect header check",y.mode=yt;break}if((V&15)!==$){B.msg="unknown compression method",y.mode=yt;break}if(V>>>=4,Z-=4,Zt=(V&15)+8,y.wbits===0)y.wbits=Zt;else if(Zt>y.wbits){B.msg="invalid window size",y.mode=yt;break}y.dmax=1<<Zt,B.adler=y.check=1,y.mode=V&512?mt:U,V=0,Z=0;break;case ht:for(;Z<16;){if(ot===0)break t;ot--,V+=at[nt++]<<Z,Z+=8}if(y.flags=V,(y.flags&255)!==$){B.msg="unknown compression method",y.mode=yt;break}if(y.flags&57344){B.msg="unknown header flags set",y.mode=yt;break}y.head&&(y.head.text=V>>8&1),y.flags&512&&(te[0]=V&255,te[1]=V>>>8&255,y.check=I(y.check,te,2,0)),V=0,Z=0,y.mode=M;case M:for(;Z<32;){if(ot===0)break t;ot--,V+=at[nt++]<<Z,Z+=8}y.head&&(y.head.time=V),y.flags&512&&(te[0]=V&255,te[1]=V>>>8&255,te[2]=V>>>16&255,te[3]=V>>>24&255,y.check=I(y.check,te,4,0)),V=0,Z=0,y.mode=Q;case Q:for(;Z<16;){if(ot===0)break t;ot--,V+=at[nt++]<<Z,Z+=8}y.head&&(y.head.xflags=V&255,y.head.os=V>>8),y.flags&512&&(te[0]=V&255,te[1]=V>>>8&255,y.check=I(y.check,te,2,0)),V=0,Z=0,y.mode=ft;case ft:if(y.flags&1024){for(;Z<16;){if(ot===0)break t;ot--,V+=at[nt++]<<Z,Z+=8}y.length=V,y.head&&(y.head.extra_len=V),y.flags&512&&(te[0]=V&255,te[1]=V>>>8&255,y.check=I(y.check,te,2,0)),V=0,Z=0}else y.head&&(y.head.extra=null);y.mode=Rt;case Rt:if(y.flags&1024&&(ct=y.length,ct>ot&&(ct=ot),ct&&(y.head&&(Zt=y.head.extra_len-y.length,y.head.extra||(y.head.extra=new Array(y.head.extra_len)),R.arraySet(y.head.extra,at,nt,ct,Zt)),y.flags&512&&(y.check=I(y.check,at,ct,nt)),ot-=ct,nt+=ct,y.length-=ct),y.length))break t;y.length=0,y.mode=pt;case pt:if(y.flags&2048){if(ot===0)break t;ct=0;do Zt=at[nt+ct++],y.head&&Zt&&y.length<65536&&(y.head.name+=String.fromCharCode(Zt));while(Zt&&ct<ot);if(y.flags&512&&(y.check=I(y.check,at,ct,nt)),ot-=ct,nt+=ct,Zt)break t}else y.head&&(y.head.name=null);y.length=0,y.mode=Dt;case Dt:if(y.flags&4096){if(ot===0)break t;ct=0;do Zt=at[nt+ct++],y.head&&Zt&&y.length<65536&&(y.head.comment+=String.fromCharCode(Zt));while(Zt&&ct<ot);if(y.flags&512&&(y.check=I(y.check,at,ct,nt)),ot-=ct,nt+=ct,Zt)break t}else y.head&&(y.head.comment=null);y.mode=kt;case kt:if(y.flags&512){for(;Z<16;){if(ot===0)break t;ot--,V+=at[nt++]<<Z,Z+=8}if(V!==(y.check&65535)){B.msg="header crc mismatch",y.mode=yt;break}V=0,Z=0}y.head&&(y.head.hcrc=y.flags>>9&1,y.head.done=!0),B.adler=y.check=0,y.mode=U;break;case mt:for(;Z<32;){if(ot===0)break t;ot--,V+=at[nt++]<<Z,Z+=8}B.adler=y.check=w(V),V=0,Z=0,y.mode=Xt;case Xt:if(y.havedict===0)return B.next_out=se,B.avail_out=Gt,B.next_in=nt,B.avail_in=ot,y.hold=V,y.bits=Z,A;B.adler=y.check=1,y.mode=U;case U:if(it===x||it===b)break t;case P:if(y.last){V>>>=Z&7,Z-=Z&7,y.mode=lt;break}for(;Z<3;){if(ot===0)break t;ot--,V+=at[nt++]<<Z,Z+=8}switch(y.last=V&1,V>>>=1,Z-=1,V&3){case 0:y.mode=G;break;case 1:if(Xe(y),y.mode=zt,it===b){V>>>=2,Z-=2;break t}break;case 2:y.mode=vt;break;case 3:B.msg="invalid block type",y.mode=yt}V>>>=2,Z-=2;break;case G:for(V>>>=Z&7,Z-=Z&7;Z<32;){if(ot===0)break t;ot--,V+=at[nt++]<<Z,Z+=8}if((V&65535)!==(V>>>16^65535)){B.msg="invalid stored block lengths",y.mode=yt;break}if(y.length=V&65535,V=0,Z=0,y.mode=st,it===b)break t;case st:y.mode=It;case It:if(ct=y.length,ct){if(ct>ot&&(ct=ot),ct>Gt&&(ct=Gt),ct===0)break t;R.arraySet(Mt,at,nt,ct,se),ot-=ct,nt+=ct,Gt-=ct,se+=ct,y.length-=ct;break}y.mode=U;break;case vt:for(;Z<14;){if(ot===0)break t;ot--,V+=at[nt++]<<Z,Z+=8}if(y.nlen=(V&31)+257,V>>>=5,Z-=5,y.ndist=(V&31)+1,V>>>=5,Z-=5,y.ncode=(V&15)+4,V>>>=4,Z-=4,y.nlen>286||y.ndist>30){B.msg="too many length or distance symbols",y.mode=yt;break}y.have=0,y.mode=Et;case Et:for(;y.have<y.ncode;){for(;Z<3;){if(ot===0)break t;ot--,V+=at[nt++]<<Z,Z+=8}y.lens[vr[y.have++]]=V&7,V>>>=3,Z-=3}for(;y.have<19;)y.lens[vr[y.have++]]=0;if(y.lencode=y.lendyn,y.lenbits=7,_e={bits:y.lenbits},ue=F(d,y.lens,0,19,y.lencode,0,y.work,_e),y.lenbits=_e.bits,ue){B.msg="invalid code lengths set",y.mode=yt;break}y.have=0,y.mode=bt;case bt:for(;y.have<y.nlen+y.ndist;){for(;jt=y.lencode[V&(1<<y.lenbits)-1],Ot=jt>>>24,ee=jt>>>16&255,oe=jt&65535,!(Ot<=Z);){if(ot===0)break t;ot--,V+=at[nt++]<<Z,Z+=8}if(oe<16)V>>>=Ot,Z-=Ot,y.lens[y.have++]=oe;else{if(oe===16){for(ve=Ot+2;Z<ve;){if(ot===0)break t;ot--,V+=at[nt++]<<Z,Z+=8}if(V>>>=Ot,Z-=Ot,y.have===0){B.msg="invalid bit length repeat",y.mode=yt;break}Zt=y.lens[y.have-1],ct=3+(V&3),V>>>=2,Z-=2}else if(oe===17){for(ve=Ot+3;Z<ve;){if(ot===0)break t;ot--,V+=at[nt++]<<Z,Z+=8}V>>>=Ot,Z-=Ot,Zt=0,ct=3+(V&7),V>>>=3,Z-=3}else{for(ve=Ot+7;Z<ve;){if(ot===0)break t;ot--,V+=at[nt++]<<Z,Z+=8}V>>>=Ot,Z-=Ot,Zt=0,ct=11+(V&127),V>>>=7,Z-=7}if(y.have+ct>y.nlen+y.ndist){B.msg="invalid bit length repeat",y.mode=yt;break}for(;ct--;)y.lens[y.have++]=Zt}}if(y.mode===yt)break;if(y.lens[256]===0){B.msg="invalid code -- missing end-of-block",y.mode=yt;break}if(y.lenbits=9,_e={bits:y.lenbits},ue=F(s,y.lens,0,y.nlen,y.lencode,0,y.work,_e),y.lenbits=_e.bits,ue){B.msg="invalid literal/lengths set",y.mode=yt;break}if(y.distbits=6,y.distcode=y.distdyn,_e={bits:y.distbits},ue=F(v,y.lens,y.nlen,y.ndist,y.distcode,0,y.work,_e),y.distbits=_e.bits,ue){B.msg="invalid distances set",y.mode=yt;break}if(y.mode=zt,it===b)break t;case zt:y.mode=At;case At:if(ot>=6&&Gt>=258){B.next_out=se,B.avail_out=Gt,B.next_in=nt,B.avail_in=ot,y.hold=V,y.bits=Z,O(B,Ut),se=B.next_out,Mt=B.output,Gt=B.avail_out,nt=B.next_in,at=B.input,ot=B.avail_in,V=y.hold,Z=y.bits,y.mode===U&&(y.back=-1);break}for(y.back=0;jt=y.lencode[V&(1<<y.lenbits)-1],Ot=jt>>>24,ee=jt>>>16&255,oe=jt&65535,!(Ot<=Z);){if(ot===0)break t;ot--,V+=at[nt++]<<Z,Z+=8}if(ee&&(ee&240)===0){for(re=Ot,qe=ee,Pe=oe;jt=y.lencode[Pe+((V&(1<<re+qe)-1)>>re)],Ot=jt>>>24,ee=jt>>>16&255,oe=jt&65535,!(re+Ot<=Z);){if(ot===0)break t;ot--,V+=at[nt++]<<Z,Z+=8}V>>>=re,Z-=re,y.back+=re}if(V>>>=Ot,Z-=Ot,y.back+=Ot,y.length=oe,ee===0){y.mode=K;break}if(ee&32){y.back=-1,y.mode=U;break}if(ee&64){B.msg="invalid literal/length code",y.mode=yt;break}y.extra=ee&15,y.mode=$t;case $t:if(y.extra){for(ve=y.extra;Z<ve;){if(ot===0)break t;ot--,V+=at[nt++]<<Z,Z+=8}y.length+=V&(1<<y.extra)-1,V>>>=y.extra,Z-=y.extra,y.back+=y.extra}y.was=y.length,y.mode=S;case S:for(;jt=y.distcode[V&(1<<y.distbits)-1],Ot=jt>>>24,ee=jt>>>16&255,oe=jt&65535,!(Ot<=Z);){if(ot===0)break t;ot--,V+=at[nt++]<<Z,Z+=8}if((ee&240)===0){for(re=Ot,qe=ee,Pe=oe;jt=y.distcode[Pe+((V&(1<<re+qe)-1)>>re)],Ot=jt>>>24,ee=jt>>>16&255,oe=jt&65535,!(re+Ot<=Z);){if(ot===0)break t;ot--,V+=at[nt++]<<Z,Z+=8}V>>>=re,Z-=re,y.back+=re}if(V>>>=Ot,Z-=Ot,y.back+=Ot,ee&64){B.msg="invalid distance code",y.mode=yt;break}y.offset=oe,y.extra=ee&15,y.mode=_;case _:if(y.extra){for(ve=y.extra;Z<ve;){if(ot===0)break t;ot--,V+=at[nt++]<<Z,Z+=8}y.offset+=V&(1<<y.extra)-1,V>>>=y.extra,Z-=y.extra,y.back+=y.extra}if(y.offset>y.dmax){B.msg="invalid distance too far back",y.mode=yt;break}y.mode=X;case X:if(Gt===0)break t;if(ct=Ut-Gt,y.offset>ct){if(ct=y.offset-ct,ct>y.whave&&y.sane){B.msg="invalid distance too far back",y.mode=yt;break}ct>y.wnext?(ct-=y.wnext,Ue=y.wsize-ct):Ue=y.wnext-ct,ct>y.length&&(ct=y.length),Re=y.window}else Re=Mt,Ue=se-y.offset,ct=y.length;ct>Gt&&(ct=Gt),Gt-=ct,y.length-=ct;do Mt[se++]=Re[Ue++];while(--ct);y.length===0&&(y.mode=At);break;case K:if(Gt===0)break t;Mt[se++]=y.length,Gt--,y.mode=At;break;case lt:if(y.wrap){for(;Z<32;){if(ot===0)break t;ot--,V|=at[nt++]<<Z,Z+=8}if(Ut-=Gt,B.total_out+=Ut,y.total+=Ut,Ut&&(B.adler=y.check=y.flags?I(y.check,Mt,Ut,se-Ut):j(y.check,Mt,Ut,se-Ut)),Ut=Gt,(y.flags?V:w(V))!==y.check){B.msg="incorrect data check",y.mode=yt;break}V=0,Z=0}y.mode=rt;case rt:if(y.wrap&&y.flags){for(;Z<32;){if(ot===0)break t;ot--,V+=at[nt++]<<Z,Z+=8}if(V!==(y.total&4294967295)){B.msg="incorrect length check",y.mode=yt;break}V=0,Z=0}y.mode=_t;case _t:ue=N;break t;case yt:ue=H;break t;case Yt:return C;case ae:default:return q}return B.next_out=se,B.avail_out=Gt,B.next_in=nt,B.avail_in=ot,y.hold=V,y.bits=Z,(y.wsize||Ut!==B.avail_out&&y.mode<yt&&(y.mode<lt||it!==f))&&Ce(B,B.output,B.next_out,Ut-B.avail_out)?(y.mode=Yt,C):(Ye-=B.avail_in,Ut-=B.avail_out,B.total_in+=Ye,B.total_out+=Ut,y.total+=Ut,y.wrap&&Ut&&(B.adler=y.check=y.flags?I(y.check,Mt,Ut,B.next_out-Ut):j(y.check,Mt,Ut,B.next_out-Ut)),B.data_type=y.bits+(y.last?64:0)+(y.mode===U?128:0)+(y.mode===zt||y.mode===st?256:0),(Ye===0&&Ut===0||it===f)&&ue===m&&(ue=St),ue)}function Tr(B){if(!B||!B.state)return q;var it=B.state;return it.window&&(it.window=null),B.state=null,m}function Ar(B,it){var y;return!B||!B.state||(y=B.state,(y.wrap&2)===0)?q:(y.head=it,it.done=!1,m)}function Cr(B,it){var y=it.length,at,Mt,nt;return!B||!B.state||(at=B.state,at.wrap!==0&&at.mode!==Xt)?q:at.mode===Xt&&(Mt=1,Mt=j(Mt,it,y,0),Mt!==at.check)?H:(nt=Ce(B,it,y,y),nt?(at.mode=Yt,C):(at.havedict=1,m))}D.inflateReset=Y,D.inflateReset2=xt,D.inflateResetKeep=W,D.inflateInit=Ct,D.inflateInit2=Lt,D.inflate=Me,D.inflateEnd=Tr,D.inflateGetHeader=Ar,D.inflateSetDictionary=Cr,D.inflateInfo="pako inflate (from Nodeca project)"},function(et,D){"use strict";var k=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";D.assign=function(I){for(var O=Array.prototype.slice.call(arguments,1);O.length;){var F=O.shift();if(!!F){if(typeof F!="object")throw new TypeError(F+"must be non-object");for(var d in F)F.hasOwnProperty(d)&&(I[d]=F[d])}}return I},D.shrinkBuf=function(I,O){return I.length===O?I:I.subarray?I.subarray(0,O):(I.length=O,I)};var R={arraySet:function(I,O,F,d,s){if(O.subarray&&I.subarray){I.set(O.subarray(F,F+d),s);return}for(var v=0;v<d;v++)I[s+v]=O[F+v]},flattenChunks:function(I){var O,F,d,s,v,f;for(d=0,O=0,F=I.length;O<F;O++)d+=I[O].length;for(f=new Uint8Array(d),s=0,O=0,F=I.length;O<F;O++)v=I[O],f.set(v,s),s+=v.length;return f}},j={arraySet:function(I,O,F,d,s){for(var v=0;v<d;v++)I[s+v]=O[F+v]},flattenChunks:function(I){return[].concat.apply([],I)}};D.setTyped=function(I){I?(D.Buf8=Uint8Array,D.Buf16=Uint16Array,D.Buf32=Int32Array,D.assign(D,R)):(D.Buf8=Array,D.Buf16=Array,D.Buf32=Array,D.assign(D,j))},D.setTyped(k)},function(et,D){"use strict";function k(R,j,I,O){for(var F=R&65535|0,d=R>>>16&65535|0,s=0;I!==0;){s=I>2e3?2e3:I,I-=s;do F=F+j[O++]|0,d=d+F|0;while(--s);F%=65521,d%=65521}return F|d<<16|0}et.exports=k},function(et,D){"use strict";function k(){for(var I,O=[],F=0;F<256;F++){I=F;for(var d=0;d<8;d++)I=I&1?3988292384^I>>>1:I>>>1;O[F]=I}return O}var R=k();function j(I,O,F,d){var s=R,v=d+F;I^=-1;for(var f=d;f<v;f++)I=I>>>8^s[(I^O[f])&255];return I^-1}et.exports=j},function(et,D){"use strict";var k=30,R=12;et.exports=function(I,O){var F,d,s,v,f,x,b,m,N,A,q,H,C,St,$,wt,ht,M,Q,ft,Rt,pt,Dt,kt,mt;F=I.state,d=I.next_in,kt=I.input,s=d+(I.avail_in-5),v=I.next_out,mt=I.output,f=v-(O-I.avail_out),x=v+(I.avail_out-257),b=F.dmax,m=F.wsize,N=F.whave,A=F.wnext,q=F.window,H=F.hold,C=F.bits,St=F.lencode,$=F.distcode,wt=(1<<F.lenbits)-1,ht=(1<<F.distbits)-1;t:do{C<15&&(H+=kt[d++]<<C,C+=8,H+=kt[d++]<<C,C+=8),M=St[H&wt];e:for(;;){if(Q=M>>>24,H>>>=Q,C-=Q,Q=M>>>16&255,Q===0)mt[v++]=M&65535;else if(Q&16){ft=M&65535,Q&=15,Q&&(C<Q&&(H+=kt[d++]<<C,C+=8),ft+=H&(1<<Q)-1,H>>>=Q,C-=Q),C<15&&(H+=kt[d++]<<C,C+=8,H+=kt[d++]<<C,C+=8),M=$[H&ht];r:for(;;){if(Q=M>>>24,H>>>=Q,C-=Q,Q=M>>>16&255,Q&16){if(Rt=M&65535,Q&=15,C<Q&&(H+=kt[d++]<<C,C+=8,C<Q&&(H+=kt[d++]<<C,C+=8)),Rt+=H&(1<<Q)-1,Rt>b){I.msg="invalid distance too far back",F.mode=k;break t}if(H>>>=Q,C-=Q,Q=v-f,Rt>Q){if(Q=Rt-Q,Q>N&&F.sane){I.msg="invalid distance too far back",F.mode=k;break t}if(pt=0,Dt=q,A===0){if(pt+=m-Q,Q<ft){ft-=Q;do mt[v++]=q[pt++];while(--Q);pt=v-Rt,Dt=mt}}else if(A<Q){if(pt+=m+A-Q,Q-=A,Q<ft){ft-=Q;do mt[v++]=q[pt++];while(--Q);if(pt=0,A<ft){Q=A,ft-=Q;do mt[v++]=q[pt++];while(--Q);pt=v-Rt,Dt=mt}}}else if(pt+=A-Q,Q<ft){ft-=Q;do mt[v++]=q[pt++];while(--Q);pt=v-Rt,Dt=mt}for(;ft>2;)mt[v++]=Dt[pt++],mt[v++]=Dt[pt++],mt[v++]=Dt[pt++],ft-=3;ft&&(mt[v++]=Dt[pt++],ft>1&&(mt[v++]=Dt[pt++]))}else{pt=v-Rt;do mt[v++]=mt[pt++],mt[v++]=mt[pt++],mt[v++]=mt[pt++],ft-=3;while(ft>2);ft&&(mt[v++]=mt[pt++],ft>1&&(mt[v++]=mt[pt++]))}}else if((Q&64)===0){M=$[(M&65535)+(H&(1<<Q)-1)];continue r}else{I.msg="invalid distance code",F.mode=k;break t}break}}else if((Q&64)===0){M=St[(M&65535)+(H&(1<<Q)-1)];continue e}else if(Q&32){F.mode=R;break t}else{I.msg="invalid literal/length code",F.mode=k;break t}break}}while(d<s&&v<x);ft=C>>3,d-=ft,C-=ft<<3,H&=(1<<C)-1,I.next_in=d,I.next_out=v,I.avail_in=d<s?5+(s-d):5-(d-s),I.avail_out=v<x?257+(x-v):257-(v-x),F.hold=H,F.bits=C}},function(et,D,k){"use strict";var R=k(33),j=15,I=852,O=592,F=0,d=1,s=2,v=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],x=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],b=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];et.exports=function(N,A,q,H,C,St,$,wt){var ht=wt.bits,M=0,Q=0,ft=0,Rt=0,pt=0,Dt=0,kt=0,mt=0,Xt=0,U=0,P,G,st,It,vt,Et=null,bt=0,zt,At=new R.Buf16(j+1),$t=new R.Buf16(j+1),S=null,_=0,X,K,lt;for(M=0;M<=j;M++)At[M]=0;for(Q=0;Q<H;Q++)At[A[q+Q]]++;for(pt=ht,Rt=j;Rt>=1&&At[Rt]===0;Rt--);if(pt>Rt&&(pt=Rt),Rt===0)return C[St++]=1<<24|64<<16|0,C[St++]=1<<24|64<<16|0,wt.bits=1,0;for(ft=1;ft<Rt&&At[ft]===0;ft++);for(pt<ft&&(pt=ft),mt=1,M=1;M<=j;M++)if(mt<<=1,mt-=At[M],mt<0)return-1;if(mt>0&&(N===F||Rt!==1))return-1;for($t[1]=0,M=1;M<j;M++)$t[M+1]=$t[M]+At[M];for(Q=0;Q<H;Q++)A[q+Q]!==0&&($[$t[A[q+Q]]++]=Q);if(N===F?(Et=S=$,zt=19):N===d?(Et=v,bt-=257,S=f,_-=257,zt=256):(Et=x,S=b,zt=-1),U=0,Q=0,M=ft,vt=St,Dt=pt,kt=0,st=-1,Xt=1<<pt,It=Xt-1,N===d&&Xt>I||N===s&&Xt>O)return 1;for(;;){X=M-kt,$[Q]<zt?(K=0,lt=$[Q]):$[Q]>zt?(K=S[_+$[Q]],lt=Et[bt+$[Q]]):(K=32+64,lt=0),P=1<<M-kt,G=1<<Dt,ft=G;do G-=P,C[vt+(U>>kt)+G]=X<<24|K<<16|lt|0;while(G!==0);for(P=1<<M-1;U&P;)P>>=1;if(P!==0?(U&=P-1,U+=P):U=0,Q++,--At[M]===0){if(M===Rt)break;M=A[q+$[Q]]}if(M>pt&&(U&It)!==st){for(kt===0&&(kt=pt),vt+=ft,Dt=M-kt,mt=1<<Dt;Dt+kt<Rt&&(mt-=At[Dt+kt],!(mt<=0));)Dt++,mt<<=1;if(Xt+=1<<Dt,N===d&&Xt>I||N===s&&Xt>O)return 1;st=U&It,C[st]=pt<<24|Dt<<16|vt-St|0}}return U!==0&&(C[vt+U]=M-kt<<24|64<<16|0),wt.bits=pt,0}},function(et,D,k){"use strict";var R=k(33),j=!0,I=!0;try{String.fromCharCode.apply(null,[0])}catch{j=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{I=!1}for(var O=new R.Buf8(256),F=0;F<256;F++)O[F]=F>=252?6:F>=248?5:F>=240?4:F>=224?3:F>=192?2:1;O[254]=O[254]=1,D.string2buf=function(s){var v,f,x,b,m,N=s.length,A=0;for(b=0;b<N;b++)f=s.charCodeAt(b),(f&64512)===55296&&b+1<N&&(x=s.charCodeAt(b+1),(x&64512)===56320&&(f=65536+(f-55296<<10)+(x-56320),b++)),A+=f<128?1:f<2048?2:f<65536?3:4;for(v=new R.Buf8(A),m=0,b=0;m<A;b++)f=s.charCodeAt(b),(f&64512)===55296&&b+1<N&&(x=s.charCodeAt(b+1),(x&64512)===56320&&(f=65536+(f-55296<<10)+(x-56320),b++)),f<128?v[m++]=f:f<2048?(v[m++]=192|f>>>6,v[m++]=128|f&63):f<65536?(v[m++]=224|f>>>12,v[m++]=128|f>>>6&63,v[m++]=128|f&63):(v[m++]=240|f>>>18,v[m++]=128|f>>>12&63,v[m++]=128|f>>>6&63,v[m++]=128|f&63);return v};function d(s,v){if(v<65537&&(s.subarray&&I||!s.subarray&&j))return String.fromCharCode.apply(null,R.shrinkBuf(s,v));for(var f="",x=0;x<v;x++)f+=String.fromCharCode(s[x]);return f}D.buf2binstring=function(s){return d(s,s.length)},D.binstring2buf=function(s){for(var v=new R.Buf8(s.length),f=0,x=v.length;f<x;f++)v[f]=s.charCodeAt(f);return v},D.buf2string=function(s,v){var f,x,b,m,N=v||s.length,A=new Array(N*2);for(x=0,f=0;f<N;){if(b=s[f++],b<128){A[x++]=b;continue}if(m=O[b],m>4){A[x++]=65533,f+=m-1;continue}for(b&=m===2?31:m===3?15:7;m>1&&f<N;)b=b<<6|s[f++]&63,m--;if(m>1){A[x++]=65533;continue}b<65536?A[x++]=b:(b-=65536,A[x++]=55296|b>>10&1023,A[x++]=56320|b&1023)}return d(A,x)},D.utf8border=function(s,v){var f;for(v=v||s.length,v>s.length&&(v=s.length),f=v-1;f>=0&&(s[f]&192)===128;)f--;return f<0||f===0?v:f+O[s[f]]>v?f:v}},function(et,D){"use strict";et.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(et,D){"use strict";et.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(et,D){"use strict";function k(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}et.exports=k},function(et,D){"use strict";function k(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}et.exports=k}])})});export default Oa();
/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
* @license  MIT
*/
